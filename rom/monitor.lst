 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 1 - 12/12/2025 18:45:37


    1/   0 :                            ; monitor.asm - Intel 8080 Monitor ROM
    2/   0 :                            ; Assemble with: make
    3/   0 :                            ; 
    4/   0 :                            ; Memory Map:
    5/   0 :                            ;   0x0000-0x00FF: System workspace (RAM)
    6/   0 :                            ;   0x0100-0xEFFF: User program area (RAM)
    7/   0 :                            ;   0xF000-0xFFFF: Monitor ROM (this file)
    8/   0 :                            ;
    9/   0 :                            ; I/O Ports:
   10/   0 :                            ;   0x00: Console data out (write only)
   11/   0 :                            ;   0x01: Console data in (read only)
   12/   0 :                            ;   0x02: Console status (bit 0 = RX ready, bit 1 = TX ready)
   13/   0 :                            
   14/   0 :                                    CPU     8080
   15/F000 :                                    ORG     0F000H
   16/F000 :                            
   17/F000 :                            ; ============================================
   18/F000 :                            ; CONSTANTS
   19/F000 :                            ; ============================================
   20/F000 :                            
   21/F000 : =0H                        CONSOLE_DATA_OUT    EQU     00H
   22/F000 : =1H                        CONSOLE_DATA_IN     EQU     01H
   23/F000 : =2H                        CONSOLE_STATUS      EQU     02H
   24/F000 :                            
   25/F000 : =0F000H                    STACK_TOP       EQU     0F000H      ; Stack grows down from ROM
   26/F000 :                            
   27/F000 : =0DH                       CR              EQU     0DH
   28/F000 : =0AH                       LF              EQU     0AH
   29/F000 : =8H                        BS              EQU     08H
   30/F000 : =20H                       SPACE           EQU     20H
   31/F000 :                            
   32/F000 :                            ; ============================================
   33/F000 :                            ; WORKSPACE (RAM at 0x0080-0x00FF)
   34/F000 :                            ; ============================================
   35/F000 :                            
   36/F000 : =80H                       LINE_BUFFER     EQU     0080H       ; 80 bytes for command line
   37/F000 : =50H                       LINE_LENGTH     EQU     80          ; Max 80 chars
   38/F000 : =0D0H                      BUFFER_PTR      EQU     00D0H       ; Current position in buffer (2 bytes)
   39/F000 : =0D2H                      LAST_DUMP_ADDR  EQU     00D2H       ; Last dump address (2 bytes)
   40/F000 : =0D4H                      LAST_EXAM_ADDR  EQU     00D4H       ; Last examine address (2 bytes)
   41/F000 :                            
   42/F000 :                            ; I/O stubs (self-modifying code)
   43/F000 : =0D6H                      IO_IN_STUB      EQU     00D6H       ; 3 bytes: IN xx / RET
   44/F000 : =0D9H                      IO_OUT_STUB     EQU     00D9H       ; 3 bytes: OUT xx / RET
   45/F000 :                            
   46/F000 :                            ; ============================================
   47/F000 :                            ; COLD START
   48/F000 :                            ; ============================================
   49/F000 :                            
   50/F000 :                            COLD_START:
   51/F000 : 31 00 F0                           LXI     SP,STACK_TOP        ; Initialize stack pointer
   52/F003 :                                    
   53/F003 :                                    ; Initialize workspace
   54/F003 : 21 00 00                           LXI     H,0000H
   55/F006 : 22 D2 00                           SHLD    LAST_DUMP_ADDR      ; Default dump address = 0
   56/F009 : 22 D4 00                           SHLD    LAST_EXAM_ADDR      ; Default exam address = 0
   57/F00C :                                    
   58/F00C :                                    ; Initialize I/O stubs
   59/F00C : 3E DB                              MVI     A,0DBH              ; IN opcode
   60/F00E : 32 D6 00                           STA     IO_IN_STUB
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 2 - 12/12/2025 18:45:37


   61/F011 : 3E 00                              MVI     A,00H               ; Default port 0
   62/F013 : 32 D7 00                           STA     IO_IN_STUB+1
   63/F016 : 3E C9                              MVI     A,0C9H              ; RET opcode
   64/F018 : 32 D8 00                           STA     IO_IN_STUB+2
   65/F01B :                                    
   66/F01B : 3E D3                              MVI     A,0D3H              ; OUT opcode
   67/F01D : 32 D9 00                           STA     IO_OUT_STUB
   68/F020 : 3E 00                              MVI     A,00H               ; Default port 0
   69/F022 : 32 DA 00                           STA     IO_OUT_STUB+1
   70/F025 : 3E C9                              MVI     A,0C9H              ; RET opcode
   71/F027 : 32 DB 00                           STA     IO_OUT_STUB+2
   72/F02A :                                    
   73/F02A : CD 9C F0                           CALL    PRINT_BANNER        ; Show startup message
   74/F02D :                            
   75/F02D :                            ; ============================================
   76/F02D :                            ; MAIN LOOP
   77/F02D :                            ; ============================================
   78/F02D :                            
   79/F02D :                            MAIN_LOOP:
   80/F02D : 3E 3E                              MVI     A,'>'               ; Print prompt
   81/F02F : CD 7E F0                           CALL    CONOUT
   82/F032 : 3E 20                              MVI     A,' '
   83/F034 : CD 7E F0                           CALL    CONOUT
   84/F037 :                                    
   85/F037 : CD E3 F0                           CALL    READ_LINE           ; Read command into LINE_BUFFER
   86/F03A :                                    
   87/F03A : 21 80 00                           LXI     H,LINE_BUFFER       ; Point to start of buffer
   88/F03D : CD 2F F1                           CALL    SKIP_SPACES         ; Skip leading spaces
   89/F040 :                                    
   90/F040 : 7E                                 MOV     A,M                 ; Get command character
   91/F041 : B7                                 ORA     A                   ; Empty line?
   92/F042 : CA 2D F0                           JZ      MAIN_LOOP           ; Yes, just prompt again
   93/F045 :                                    
   94/F045 :                                    ; Convert to uppercase if lowercase
   95/F045 : FE 61                              CPI     'a'
   96/F047 : DA 51 F0                           JC      NOT_LOWER
   97/F04A : FE 7B                              CPI     'z'+1
   98/F04C : D2 51 F0                           JNC     NOT_LOWER
   99/F04F : D6 20                              SUI     20H                 ; Convert to uppercase
  100/F051 :                            NOT_LOWER:
  101/F051 :                                    
  102/F051 : 23                                 INX     H                   ; Point past command char
  103/F052 :                                    
  104/F052 :                                    ; Command dispatch
  105/F052 : FE 44                              CPI     'D'
  106/F054 : CA 94 F1                           JZ      CMD_DUMP
  107/F057 : FE 45                              CPI     'E'
  108/F059 : CA 4A F2                           JZ      CMD_EXAMINE
  109/F05C : FE 47                              CPI     'G'
  110/F05E : CA 9B F2                           JZ      CMD_GO
  111/F061 : FE 48                              CPI     'H'
  112/F063 : CA AA F2                           JZ      CMD_HEX_MATH
  113/F066 : FE 49                              CPI     'I'
  114/F068 : CA E2 F2                           JZ      CMD_INPUT
  115/F06B : FE 4F                              CPI     'O'
  116/F06D : CA 04 F3                           JZ      CMD_OUTPUT
  117/F070 : FE 3F                              CPI     '?'
  118/F072 : CA 2A F3                           JZ      CMD_HELP
  119/F075 :                                    
  120/F075 :                                    ; Unknown command
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 3 - 12/12/2025 18:45:37


  121/F075 : 21 C4 F4                           LXI     H,MSG_UNKNOWN
  122/F078 : CD A3 F0                           CALL    PRINT_STRING
  123/F07B : C3 2D F0                           JMP     MAIN_LOOP
  124/F07E :                            
  125/F07E :                            ; ============================================
  126/F07E :                            ; CONSOLE I/O ROUTINES
  127/F07E :                            ; ============================================
  128/F07E :                            
  129/F07E :                            ; CONOUT - Output character in A
  130/F07E :                            ; Preserves: all registers
  131/F07E :                            CONOUT:
  132/F07E : F5                                 PUSH    PSW
  133/F07F :                            CONOUT_WAIT:
  134/F07F : DB 02                              IN      CONSOLE_STATUS
  135/F081 : E6 02                              ANI     02H
  136/F083 : CA 7F F0                           JZ      CONOUT_WAIT
  137/F086 : F1                                 POP     PSW
  138/F087 : D3 00                              OUT     CONSOLE_DATA_OUT
  139/F089 : C9                                 RET
  140/F08A :                            
  141/F08A :                            ; CONIN - Input character to A
  142/F08A :                            ; Trashes: flags
  143/F08A :                            CONIN:
  144/F08A : DB 02                              IN      CONSOLE_STATUS
  145/F08C : E6 01                              ANI     01H
  146/F08E : CA 8A F0                           JZ      CONIN
  147/F091 : DB 01                              IN      CONSOLE_DATA_IN
  148/F093 : C9                                 RET
  149/F094 :                            
  150/F094 :                            ; CONST - Console status
  151/F094 :                            ; Returns: A = 0xFF if char available, 0x00 if not
  152/F094 :                            ; Trashes: flags
  153/F094 :                            CONST:
  154/F094 : DB 02                              IN      CONSOLE_STATUS
  155/F096 : E6 01                              ANI     01H
  156/F098 : C8                                 RZ                          ; Return 0 if no char
  157/F099 : 3E FF                              MVI     A,0FFH              ; Return FF if char available
  158/F09B : C9                                 RET
  159/F09C :                            
  160/F09C :                            ; ============================================
  161/F09C :                            ; PRINT ROUTINES
  162/F09C :                            ; ============================================
  163/F09C :                            
  164/F09C :                            ; PRINT_BANNER - Display startup message
  165/F09C :                            ; Trashes: A, HL, flags
  166/F09C :                            PRINT_BANNER:
  167/F09C : 21 89 F3                           LXI     H,MSG_BANNER
  168/F09F : CD A3 F0                           CALL    PRINT_STRING
  169/F0A2 : C9                                 RET
  170/F0A3 :                            
  171/F0A3 :                            ; PRINT_STRING - Print null-terminated string at HL
  172/F0A3 :                            ; Trashes: A, HL, flags
  173/F0A3 :                            PRINT_STRING:
  174/F0A3 : 7E                                 MOV     A,M                 ; Get character
  175/F0A4 : B7                                 ORA     A                   ; Check for null
  176/F0A5 : C8                                 RZ                          ; Return if end of string
  177/F0A6 : CD 7E F0                           CALL    CONOUT
  178/F0A9 : 23                                 INX     H
  179/F0AA : C3 A3 F0                           JMP     PRINT_STRING
  180/F0AD :                            
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 4 - 12/12/2025 18:45:37


  181/F0AD :                            ; PRINT_CRLF - Print carriage return and line feed
  182/F0AD :                            ; Trashes: A, flags
  183/F0AD :                            PRINT_CRLF:
  184/F0AD : 3E 0D                              MVI     A,CR
  185/F0AF : CD 7E F0                           CALL    CONOUT
  186/F0B2 : 3E 0A                              MVI     A,LF
  187/F0B4 : CD 7E F0                           CALL    CONOUT
  188/F0B7 : C9                                 RET
  189/F0B8 :                            
  190/F0B8 :                            ; PRINT_SPACE - Print a space
  191/F0B8 :                            ; Trashes: A, flags
  192/F0B8 :                            PRINT_SPACE:
  193/F0B8 : 3E 20                              MVI     A,SPACE
  194/F0BA : CD 7E F0                           CALL    CONOUT
  195/F0BD : C9                                 RET
  196/F0BE :                            
  197/F0BE :                            ; PRINT_HEX_BYTE - Print A as two hex digits
  198/F0BE :                            ; Input: A = byte to print
  199/F0BE :                            ; Trashes: A, flags
  200/F0BE :                            PRINT_HEX_BYTE:
  201/F0BE : F5                                 PUSH    PSW                 ; Save original byte
  202/F0BF : 0F                                 RRC                         ; Shift high nibble to low
  203/F0C0 : 0F                                 RRC
  204/F0C1 : 0F                                 RRC
  205/F0C2 : 0F                                 RRC
  206/F0C3 : CD CB F0                           CALL    PRINT_HEX_NIBBLE    ; Print high nibble
  207/F0C6 : F1                                 POP     PSW                 ; Restore original
  208/F0C7 : CD CB F0                           CALL    PRINT_HEX_NIBBLE    ; Print low nibble
  209/F0CA : C9                                 RET
  210/F0CB :                            
  211/F0CB :                            ; PRINT_HEX_NIBBLE - Print low nibble of A as hex digit
  212/F0CB :                            ; Input: A = value (low 4 bits used)
  213/F0CB :                            ; Trashes: A, flags
  214/F0CB :                            PRINT_HEX_NIBBLE:
  215/F0CB : E6 0F                              ANI     0FH                 ; Mask to low nibble
  216/F0CD : FE 0A                              CPI     0AH                 ; Is it A-F?
  217/F0CF : DA D4 F0                           JC      PHN_DIGIT           ; No, it's 0-9
  218/F0D2 : C6 07                              ADI     07H                 ; Adjust for A-F
  219/F0D4 :                            PHN_DIGIT:
  220/F0D4 : C6 30                              ADI     '0'                 ; Convert to ASCII
  221/F0D6 : CD 7E F0                           CALL    CONOUT
  222/F0D9 : C9                                 RET
  223/F0DA :                            
  224/F0DA :                            ; PRINT_HEX_WORD - Print HL as four hex digits
  225/F0DA :                            ; Input: HL = word to print
  226/F0DA :                            ; Trashes: A, flags
  227/F0DA :                            PRINT_HEX_WORD:
  228/F0DA : 7C                                 MOV     A,H
  229/F0DB : CD BE F0                           CALL    PRINT_HEX_BYTE
  230/F0DE : 7D                                 MOV     A,L
  231/F0DF : CD BE F0                           CALL    PRINT_HEX_BYTE
  232/F0E2 : C9                                 RET
  233/F0E3 :                            
  234/F0E3 :                            ; ============================================
  235/F0E3 :                            ; INPUT ROUTINES
  236/F0E3 :                            ; ============================================
  237/F0E3 :                            
  238/F0E3 :                            ; READ_LINE - Read line into LINE_BUFFER
  239/F0E3 :                            ; Handles: BS (backspace), CR (end of line)
  240/F0E3 :                            ; Returns: LINE_BUFFER contains null-terminated string
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 5 - 12/12/2025 18:45:37


  241/F0E3 :                            ; Trashes: A, B, C, HL, flags
  242/F0E3 :                            READ_LINE:
  243/F0E3 : 21 80 00                           LXI     H,LINE_BUFFER       ; Point to buffer start
  244/F0E6 : 06 00                              MVI     B,0                 ; Character count
  245/F0E8 :                                    
  246/F0E8 :                            RL_LOOP:
  247/F0E8 : CD 8A F0                           CALL    CONIN               ; Get character
  248/F0EB : 4F                                 MOV     C,A                 ; Save it in C
  249/F0EC :                                    
  250/F0EC : FE 0D                              CPI     CR                  ; Enter pressed?
  251/F0EE : CA 29 F1                           JZ      RL_DONE
  252/F0F1 : FE 0A                              CPI     LF
  253/F0F3 : CA 29 F1                           JZ      RL_DONE
  254/F0F6 :                                    
  255/F0F6 : FE 08                              CPI     BS                  ; Backspace?
  256/F0F8 : CA 10 F1                           JZ      RL_BACKSPACE
  257/F0FB :                                    
  258/F0FB : FE 20                              CPI     SPACE               ; Ignore control chars
  259/F0FD : DA E8 F0                           JC      RL_LOOP
  260/F100 :                                    
  261/F100 :                                    ; Check buffer full
  262/F100 : 78                                 MOV     A,B
  263/F101 : FE 4F                              CPI     LINE_LENGTH-1       ; Room for char + null?
  264/F103 : D2 E8 F0                           JNC     RL_LOOP             ; Buffer full, ignore
  265/F106 :                                    
  266/F106 :                                    ; Store and echo character
  267/F106 : 71                                 MOV     M,C                 ; Store in buffer
  268/F107 : 23                                 INX     H                   ; Advance pointer
  269/F108 : 04                                 INR     B                   ; Increment count
  270/F109 : 79                                 MOV     A,C                 ; Echo character
  271/F10A : CD 7E F0                           CALL    CONOUT
  272/F10D : C3 E8 F0                           JMP     RL_LOOP
  273/F110 :                                    
  274/F110 :                            RL_BACKSPACE:
  275/F110 : 78                                 MOV     A,B                 ; Check if buffer empty
  276/F111 : B7                                 ORA     A
  277/F112 : CA E8 F0                           JZ      RL_LOOP             ; Nothing to delete
  278/F115 :                                    
  279/F115 : 2B                                 DCX     H                   ; Back up pointer
  280/F116 : 05                                 DCR     B                   ; Decrement count
  281/F117 :                                    
  282/F117 :                                    ; Erase character on screen: BS, space, BS
  283/F117 : 3E 08                              MVI     A,BS
  284/F119 : CD 7E F0                           CALL    CONOUT
  285/F11C : 3E 20                              MVI     A,SPACE
  286/F11E : CD 7E F0                           CALL    CONOUT
  287/F121 : 3E 08                              MVI     A,BS
  288/F123 : CD 7E F0                           CALL    CONOUT
  289/F126 : C3 E8 F0                           JMP     RL_LOOP
  290/F129 :                                    
  291/F129 :                            RL_DONE:
  292/F129 : 36 00                              MVI     M,0                 ; Null terminate
  293/F12B : CD AD F0                           CALL    PRINT_CRLF          ; Echo newline
  294/F12E : C9                                 RET
  295/F12F :                            
  296/F12F :                            ; ============================================
  297/F12F :                            ; PARSING ROUTINES
  298/F12F :                            ; ============================================
  299/F12F :                            
  300/F12F :                            ; SKIP_SPACES - Skip spaces in buffer
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 6 - 12/12/2025 18:45:37


  301/F12F :                            ; Input: HL = pointer into buffer
  302/F12F :                            ; Output: HL = pointer to first non-space (or null)
  303/F12F :                            ; Trashes: A, flags
  304/F12F :                            SKIP_SPACES:
  305/F12F : 7E                                 MOV     A,M
  306/F130 : FE 20                              CPI     SPACE
  307/F132 : C0                                 RNZ                         ; Return if not a space
  308/F133 : 23                                 INX     H
  309/F134 : C3 2F F1                           JMP     SKIP_SPACES
  310/F137 :                            
  311/F137 :                            ; READ_HEX_WORD - Parse hex number from buffer
  312/F137 :                            ; Input: HL = pointer into buffer
  313/F137 :                            ; Output: DE = parsed value, HL = advanced past number
  314/F137 :                            ;         Carry set if no valid hex digits found
  315/F137 :                            ; Trashes: A, BC, flags
  316/F137 :                            READ_HEX_WORD:
  317/F137 : CD 2F F1                           CALL    SKIP_SPACES         ; Skip leading spaces
  318/F13A : 11 00 00                           LXI     D,0                 ; Initialize result
  319/F13D : 06 00                              MVI     B,0                 ; Digit count
  320/F13F :                                    
  321/F13F :                            RHW_LOOP:
  322/F13F : 7E                                 MOV     A,M                 ; Get character
  323/F140 : CD 6A F1                           CALL    TO_HEX_DIGIT        ; Convert to 0-15
  324/F143 : DA 64 F1                           JC      RHW_DONE            ; Not a hex digit, done
  325/F146 :                                    
  326/F146 :                                    ; Shift DE left 4 bits and add new digit
  327/F146 :                                    ; DE = DE * 16 + A
  328/F146 : F5                                 PUSH    PSW                 ; Save digit
  329/F147 :                                    
  330/F147 :                                    ; Get E's high nibble (will go to D's low nibble)
  331/F147 : 7B                                 MOV     A,E
  332/F148 : E6 F0                              ANI     0F0H                ; Isolate high nibble
  333/F14A : 0F                                 RRC
  334/F14B : 0F                                 RRC
  335/F14C : 0F                                 RRC
  336/F14D : 0F                                 RRC                         ; Move to low nibble position
  337/F14E : 4F                                 MOV     C,A                 ; Save it
  338/F14F :                                    
  339/F14F :                                    ; Shift D left 4 bits
  340/F14F : 7A                                 MOV     A,D
  341/F150 : 87                                 ADD     A
  342/F151 : 87                                 ADD     A
  343/F152 : 87                                 ADD     A
  344/F153 : 87                                 ADD     A                   ; D << 4
  345/F154 : B1                                 ORA     C                   ; OR in E's high nibble
  346/F155 : 57                                 MOV     D,A
  347/F156 :                                    
  348/F156 :                                    ; Shift E left 4 bits
  349/F156 : 7B                                 MOV     A,E
  350/F157 : 87                                 ADD     A
  351/F158 : 87                                 ADD     A
  352/F159 : 87                                 ADD     A
  353/F15A : 87                                 ADD     A                   ; E << 4
  354/F15B : 5F                                 MOV     E,A
  355/F15C :                                    
  356/F15C :                                    ; Add new digit
  357/F15C : F1                                 POP     PSW
  358/F15D : B3                                 ORA     E
  359/F15E : 5F                                 MOV     E,A
  360/F15F :                                    
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 7 - 12/12/2025 18:45:37


  361/F15F : 23                                 INX     H                   ; Advance buffer pointer
  362/F160 : 04                                 INR     B                   ; Count digit
  363/F161 : C3 3F F1                           JMP     RHW_LOOP
  364/F164 :                                    
  365/F164 :                            RHW_DONE:
  366/F164 : 78                                 MOV     A,B                 ; Check digit count
  367/F165 : B7                                 ORA     A
  368/F166 : 37                                 STC                         ; Set carry (no digits)
  369/F167 : C8                                 RZ                          ; Return with carry if no digits
  370/F168 : B7                                 ORA     A                   ; Clear carry (success)
  371/F169 : C9                                 RET
  372/F16A :                            
  373/F16A :                            ; TO_HEX_DIGIT - Convert ASCII to hex value
  374/F16A :                            ; Input: A = ASCII character
  375/F16A :                            ; Output: A = hex value (0-15), Carry clear
  376/F16A :                            ;         Carry set if not a hex digit
  377/F16A :                            ; Trashes: flags
  378/F16A :                            TO_HEX_DIGIT:
  379/F16A : FE 30                              CPI     '0'
  380/F16C : DA 92 F1                           JC      THD_FAIL            ; Below '0'
  381/F16F : FE 3A                              CPI     '9'+1
  382/F171 : DA 8E F1                           JC      THD_DIGIT           ; '0'-'9'
  383/F174 :                                    
  384/F174 : FE 41                              CPI     'A'
  385/F176 : DA 92 F1                           JC      THD_FAIL            ; Between '9' and 'A'
  386/F179 : FE 47                              CPI     'F'+1
  387/F17B : DA 8A F1                           JC      THD_ALPHA           ; 'A'-'F'
  388/F17E :                                    
  389/F17E : FE 61                              CPI     'a'
  390/F180 : DA 92 F1                           JC      THD_FAIL            ; Between 'F' and 'a'
  391/F183 : FE 67                              CPI     'f'+1
  392/F185 : D2 92 F1                           JNC     THD_FAIL            ; Above 'f'
  393/F188 :                                    
  394/F188 :                                    ; 'a'-'f': convert to uppercase first
  395/F188 : D6 20                              SUI     20H
  396/F18A :                                    
  397/F18A :                            THD_ALPHA:
  398/F18A : D6 37                              SUI     'A'-10              ; Convert 'A'-'F' to 10-15
  399/F18C : B7                                 ORA     A                   ; Clear carry
  400/F18D : C9                                 RET
  401/F18E :                                    
  402/F18E :                            THD_DIGIT:
  403/F18E : D6 30                              SUI     '0'                 ; Convert '0'-'9' to 0-9
  404/F190 : B7                                 ORA     A                   ; Clear carry
  405/F191 : C9                                 RET
  406/F192 :                                    
  407/F192 :                            THD_FAIL:
  408/F192 : 37                                 STC                         ; Set carry = not hex
  409/F193 : C9                                 RET
  410/F194 :                            
  411/F194 :                            ; ============================================
  412/F194 :                            ; COMMANDS
  413/F194 :                            ; ============================================
  414/F194 :                            
  415/F194 :                            ; CMD_DUMP - Dump memory
  416/F194 :                            ; Syntax: D [start] [end]
  417/F194 :                            ; If no args, continues from last address
  418/F194 :                            ; If one arg, dumps 128 bytes from start
  419/F194 :                            ; If two args, dumps from start to end
  420/F194 :                            CMD_DUMP:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 8 - 12/12/2025 18:45:37


  421/F194 : CD 2F F1                           CALL    SKIP_SPACES
  422/F197 : 7E                                 MOV     A,M
  423/F198 : B7                                 ORA     A                   ; End of line?
  424/F199 : CA B5 F1                           JZ      CD_NO_ARGS
  425/F19C :                                    
  426/F19C :                                    ; Parse start address
  427/F19C : CD 37 F1                           CALL    READ_HEX_WORD
  428/F19F : DA DB F1                           JC      CD_ERROR            ; No valid address
  429/F1A2 : D5                                 PUSH    D                   ; Save start address
  430/F1A3 :                                    
  431/F1A3 : CD 2F F1                           CALL    SKIP_SPACES
  432/F1A6 : 7E                                 MOV     A,M
  433/F1A7 : B7                                 ORA     A                   ; End of line?
  434/F1A8 : CA C9 F1                           JZ      CD_ONE_ARG
  435/F1AB :                                    
  436/F1AB :                                    ; Parse end address
  437/F1AB : CD 37 F1                           CALL    READ_HEX_WORD
  438/F1AE : DA DA F1                           JC      CD_POP_ERROR        ; Invalid end address
  439/F1B1 :                                    
  440/F1B1 :                                    ; Two args: start in stack, end in DE
  441/F1B1 : E1                                 POP     H                   ; HL = start
  442/F1B2 : C3 E4 F1                           JMP     CD_DUMP_RANGE
  443/F1B5 :                                    
  444/F1B5 :                            CD_NO_ARGS:
  445/F1B5 :                                    ; Continue from last address
  446/F1B5 : 2A D2 00                           LHLD    LAST_DUMP_ADDR
  447/F1B8 : 11 7F 00                           LXI     D,007FH             ; 128 bytes
  448/F1BB : 19                                 DAD     D                   ; HL = start + 127 = end
  449/F1BC : D2 C2 F1                           JNC     CD_NO_WRAP1         ; No overflow, HL is valid end
  450/F1BF : 21 FF FF                           LXI     H,0FFFFH            ; Cap at FFFF
  451/F1C2 :                            CD_NO_WRAP1:
  452/F1C2 : EB                                 XCHG                        ; DE = end
  453/F1C3 : 2A D2 00                           LHLD    LAST_DUMP_ADDR      ; HL = start
  454/F1C6 : C3 E4 F1                           JMP     CD_DUMP_RANGE
  455/F1C9 :                                    
  456/F1C9 :                            CD_ONE_ARG:
  457/F1C9 : E1                                 POP     H                   ; HL = start
  458/F1CA : E5                                 PUSH    H                   ; Save start again
  459/F1CB : 11 7F 00                           LXI     D,007FH
  460/F1CE : 19                                 DAD     D                   ; HL = start + 127 = end
  461/F1CF : D2 D5 F1                           JNC     CD_NO_WRAP2         ; No overflow
  462/F1D2 : 21 FF FF                           LXI     H,0FFFFH            ; Cap at FFFF
  463/F1D5 :                            CD_NO_WRAP2:
  464/F1D5 : EB                                 XCHG                        ; DE = end
  465/F1D6 : E1                                 POP     H                   ; HL = start
  466/F1D7 : C3 E4 F1                           JMP     CD_DUMP_RANGE
  467/F1DA :                                    
  468/F1DA :                            CD_POP_ERROR:
  469/F1DA : D1                                 POP     D                   ; Clean up stack
  470/F1DB :                            CD_ERROR:
  471/F1DB : 21 E8 F4                           LXI     H,MSG_BAD_ADDR
  472/F1DE : CD A3 F0                           CALL    PRINT_STRING
  473/F1E1 : C3 2D F0                           JMP     MAIN_LOOP
  474/F1E4 :                            
  475/F1E4 :                            ; CD_DUMP_RANGE - Dump memory from HL to DE
  476/F1E4 :                            ; Input: HL = start address, DE = end address
  477/F1E4 :                            CD_DUMP_RANGE:
  478/F1E4 : D5                                 PUSH    D                   ; Save end address
  479/F1E5 :                            
  480/F1E5 :                            CD_LINE:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 9 - 12/12/2025 18:45:37


  481/F1E5 :                                    ; Print address
  482/F1E5 : CD DA F0                           CALL    PRINT_HEX_WORD
  483/F1E8 : 3E 3A                              MVI     A,':'
  484/F1EA : CD 7E F0                           CALL    CONOUT
  485/F1ED : CD B8 F0                           CALL    PRINT_SPACE
  486/F1F0 :                                    
  487/F1F0 :                                    ; Print 16 hex bytes
  488/F1F0 : E5                                 PUSH    H                   ; Save line start for ASCII
  489/F1F1 : 0E 10                              MVI     C,16                ; Byte counter
  490/F1F3 :                                    
  491/F1F3 :                            CD_HEX_BYTE:
  492/F1F3 : 7E                                 MOV     A,M                 ; Get byte
  493/F1F4 : CD BE F0                           CALL    PRINT_HEX_BYTE
  494/F1F7 : CD B8 F0                           CALL    PRINT_SPACE
  495/F1FA :                                    
  496/F1FA :                                    ; Extra space after 8th byte
  497/F1FA : 79                                 MOV     A,C
  498/F1FB : FE 09                              CPI     9
  499/F1FD : C2 03 F2                           JNZ     CD_NO_GAP
  500/F200 : CD B8 F0                           CALL    PRINT_SPACE
  501/F203 :                            CD_NO_GAP:
  502/F203 :                                    
  503/F203 : 23                                 INX     H
  504/F204 : 0D                                 DCR     C
  505/F205 : C2 F3 F1                           JNZ     CD_HEX_BYTE
  506/F208 :                                    
  507/F208 :                                    ; Print ASCII representation
  508/F208 : CD B8 F0                           CALL    PRINT_SPACE
  509/F20B : E1                                 POP     H                   ; Restore line start
  510/F20C : 0E 10                              MVI     C,16
  511/F20E :                                    
  512/F20E :                            CD_ASCII:
  513/F20E : 7E                                 MOV     A,M
  514/F20F : FE 20                              CPI     SPACE               ; Printable? (>= 0x20)
  515/F211 : DA 19 F2                           JC      CD_DOT
  516/F214 : FE 7F                              CPI     07FH                ; Printable? (< 0x7F)
  517/F216 : DA 1B F2                           JC      CD_PRINT_CHAR
  518/F219 :                            CD_DOT:
  519/F219 : 3E 2E                              MVI     A,'.'
  520/F21B :                            CD_PRINT_CHAR:
  521/F21B : CD 7E F0                           CALL    CONOUT
  522/F21E : 23                                 INX     H
  523/F21F : 0D                                 DCR     C
  524/F220 : C2 0E F2                           JNZ     CD_ASCII
  525/F223 :                                    
  526/F223 : CD AD F0                           CALL    PRINT_CRLF
  527/F226 :                                    
  528/F226 :                                    ; Check if done (HL > end address OR wrapped)
  529/F226 : D1                                 POP     D                   ; DE = end address
  530/F227 : D5                                 PUSH    D                   ; Keep it on stack
  531/F228 :                                    
  532/F228 :                                    ; Detect wrap-around: if H is 00 and D is FF, we wrapped past FFFF
  533/F228 : 7C                                 MOV     A,H
  534/F229 : B7                                 ORA     A
  535/F22A : C2 33 F2                           JNZ     CD_NO_WRAP3         ; H != 0, no wrap
  536/F22D : 7A                                 MOV     A,D
  537/F22E : FE F0                              CPI     0F0H                ; Were we dumping high memory?
  538/F230 : D2 43 F2                           JNC     CD_DONE             ; Yes and H=0, we wrapped, done
  539/F233 :                                    
  540/F233 :                            CD_NO_WRAP3:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 10 - 12/12/2025 18:45:37


  541/F233 :                                    ; Compare HL to DE: if HL > DE, we're done
  542/F233 : 7A                                 MOV     A,D
  543/F234 : BC                                 CMP     H
  544/F235 : DA 43 F2                           JC      CD_DONE             ; D < H, done
  545/F238 : C2 E5 F1                           JNZ     CD_LINE             ; D > H, continue
  546/F23B : 7B                                 MOV     A,E
  547/F23C : BD                                 CMP     L
  548/F23D : DA 43 F2                           JC      CD_DONE             ; E < L, done (D == H)
  549/F240 : C3 E5 F1                           JMP     CD_LINE             ; E >= L, continue
  550/F243 :                                    
  551/F243 :                            CD_DONE:
  552/F243 : D1                                 POP     D                   ; Clean up stack
  553/F244 : 22 D2 00                           SHLD    LAST_DUMP_ADDR      ; Save for next time
  554/F247 : C3 2D F0                           JMP     MAIN_LOOP
  555/F24A :                            
  556/F24A :                            ; CMD_EXAMINE - Examine/modify memory
  557/F24A :                            ; Syntax: E [addr]
  558/F24A :                            ; Shows "ADDR: XX-" and waits for input
  559/F24A :                            ; Enter hex to modify, CR to advance, period to exit
  560/F24A :                            CMD_EXAMINE:
  561/F24A : CD 2F F1                           CALL    SKIP_SPACES
  562/F24D : 7E                                 MOV     A,M
  563/F24E : B7                                 ORA     A                   ; Any address given?
  564/F24F : CA 5C F2                           JZ      CE_USE_LAST
  565/F252 :                                    
  566/F252 : CD 37 F1                           CALL    READ_HEX_WORD       ; Parse address into DE
  567/F255 : DA 92 F2                           JC      CE_ERROR            ; Invalid hex
  568/F258 : EB                                 XCHG                        ; HL = address to examine
  569/F259 : C3 5F F2                           JMP     CE_LOOP
  570/F25C :                                    
  571/F25C :                            CE_USE_LAST:
  572/F25C : 2A D4 00                           LHLD    LAST_EXAM_ADDR
  573/F25F :                                    
  574/F25F :                            CE_LOOP:
  575/F25F : CD DA F0                           CALL    PRINT_HEX_WORD      ; Print address
  576/F262 : 3E 3A                              MVI     A,':'
  577/F264 : CD 7E F0                           CALL    CONOUT
  578/F267 : 3E 20                              MVI     A,' '
  579/F269 : CD 7E F0                           CALL    CONOUT
  580/F26C : 7E                                 MOV     A,M                 ; Get current byte
  581/F26D : CD BE F0                           CALL    PRINT_HEX_BYTE
  582/F270 : 3E 2D                              MVI     A,'-'
  583/F272 : CD 7E F0                           CALL    CONOUT
  584/F275 :                                    
  585/F275 : CD 33 F3                           CALL    READ_EXAM_BYTE      ; Get user input
  586/F278 : DA 89 F2                           JC      CE_EXIT             ; Carry = exit requested
  587/F27B : 78                                 MOV     A,B                 ; Check digit count
  588/F27C : B7                                 ORA     A
  589/F27D : CA 82 F2                           JZ      CE_NEXT             ; No digits = don't modify
  590/F280 : 79                                 MOV     A,C                 ; Get the value from C
  591/F281 : 77                                 MOV     M,A                 ; Store it
  592/F282 :                                    
  593/F282 :                            CE_NEXT:
  594/F282 : 23                                 INX     H
  595/F283 : CD AD F0                           CALL    PRINT_CRLF
  596/F286 : C3 5F F2                           JMP     CE_LOOP
  597/F289 :                                    
  598/F289 :                            CE_EXIT:
  599/F289 : 22 D4 00                           SHLD    LAST_EXAM_ADDR
  600/F28C : CD AD F0                           CALL    PRINT_CRLF
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 11 - 12/12/2025 18:45:37


  601/F28F : C3 2D F0                           JMP     MAIN_LOOP
  602/F292 :                                    
  603/F292 :                            CE_ERROR:
  604/F292 : 21 E8 F4                           LXI     H,MSG_BAD_ADDR
  605/F295 : CD A3 F0                           CALL    PRINT_STRING
  606/F298 : C3 2D F0                           JMP     MAIN_LOOP
  607/F29B :                            
  608/F29B :                            ; CMD_GO - Execute at address
  609/F29B :                            ; Syntax: G [addr]
  610/F29B :                            ; If no address, defaults to 0100H (TPA)
  611/F29B :                            CMD_GO:
  612/F29B : CD 2F F1                           CALL    SKIP_SPACES
  613/F29E : CD 37 F1                           CALL    READ_HEX_WORD       ; Parse address into DE
  614/F2A1 : DA A6 F2                           JC      CG_DEFAULT          ; No address given
  615/F2A4 : EB                                 XCHG                        ; HL = parsed address
  616/F2A5 : E9                                 PCHL                        ; Jump and never return
  617/F2A6 :                                    
  618/F2A6 :                            CG_DEFAULT:
  619/F2A6 : 21 00 01                           LXI     H,0100H             ; Default to TPA
  620/F2A9 : E9                                 PCHL
  621/F2AA :                            
  622/F2AA :                            ; CMD_HEX_MATH - Hex addition and subtraction
  623/F2AA :                            ; Syntax: H num1 num2
  624/F2AA :                            ; Output: sum difference
  625/F2AA :                            CMD_HEX_MATH:
  626/F2AA : CD 2F F1                           CALL    SKIP_SPACES
  627/F2AD : CD 37 F1                           CALL    READ_HEX_WORD       ; First number -> DE
  628/F2B0 : DA D9 F2                           JC      CH_ERROR
  629/F2B3 : D5                                 PUSH    D                   ; Save first number
  630/F2B4 :                                    
  631/F2B4 : CD 2F F1                           CALL    SKIP_SPACES
  632/F2B7 : CD 37 F1                           CALL    READ_HEX_WORD       ; Second number -> DE
  633/F2BA : DA D8 F2                           JC      CH_POP_ERROR
  634/F2BD :                                    
  635/F2BD :                                    ; DE = second, stack = first
  636/F2BD : E1                                 POP     H                   ; HL = first
  637/F2BE : E5                                 PUSH    H                   ; Save first again
  638/F2BF : D5                                 PUSH    D                   ; Save second
  639/F2C0 :                                    
  640/F2C0 : 19                                 DAD     D                   ; HL = first + second
  641/F2C1 : CD DA F0                           CALL    PRINT_HEX_WORD
  642/F2C4 : CD B8 F0                           CALL    PRINT_SPACE
  643/F2C7 :                                    
  644/F2C7 : D1                                 POP     D                   ; DE = second
  645/F2C8 : E1                                 POP     H                   ; HL = first
  646/F2C9 :                                    
  647/F2C9 :                                    ; HL = first - second
  648/F2C9 : 7D                                 MOV     A,L
  649/F2CA : 93                                 SUB     E
  650/F2CB : 6F                                 MOV     L,A
  651/F2CC : 7C                                 MOV     A,H
  652/F2CD : 9A                                 SBB     D
  653/F2CE : 67                                 MOV     H,A
  654/F2CF :                                    
  655/F2CF : CD DA F0                           CALL    PRINT_HEX_WORD
  656/F2D2 : CD AD F0                           CALL    PRINT_CRLF
  657/F2D5 : C3 2D F0                           JMP     MAIN_LOOP
  658/F2D8 :                            
  659/F2D8 :                            CH_POP_ERROR:
  660/F2D8 : D1                                 POP     D                   ; Clean stack
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 12 - 12/12/2025 18:45:37


  661/F2D9 :                            CH_ERROR:
  662/F2D9 : 21 FA F4                           LXI     H,MSG_BAD_HEX
  663/F2DC : CD A3 F0                           CALL    PRINT_STRING
  664/F2DF : C3 2D F0                           JMP     MAIN_LOOP
  665/F2E2 :                            
  666/F2E2 :                            ; CMD_INPUT - Read from I/O port
  667/F2E2 :                            ; Syntax: I port
  668/F2E2 :                            CMD_INPUT:
  669/F2E2 : CD 2F F1                           CALL    SKIP_SPACES
  670/F2E5 : CD 37 F1                           CALL    READ_HEX_WORD       ; Port -> DE (use E only)
  671/F2E8 : DA FB F2                           JC      CI_ERROR
  672/F2EB :                                    
  673/F2EB : 7B                                 MOV     A,E                 ; Get port number (0-255)
  674/F2EC : 32 D7 00                           STA     IO_IN_STUB+1        ; Patch the IN instruction
  675/F2EF : CD D6 00                           CALL    IO_IN_STUB          ; Execute: IN port / RET
  676/F2F2 :                                    
  677/F2F2 : CD BE F0                           CALL    PRINT_HEX_BYTE      ; Print result
  678/F2F5 : CD AD F0                           CALL    PRINT_CRLF
  679/F2F8 : C3 2D F0                           JMP     MAIN_LOOP
  680/F2FB :                            
  681/F2FB :                            CI_ERROR:
  682/F2FB : 21 0E F5                           LXI     H,MSG_BAD_PORT
  683/F2FE : CD A3 F0                           CALL    PRINT_STRING
  684/F301 : C3 2D F0                           JMP     MAIN_LOOP
  685/F304 :                            
  686/F304 :                            ; CMD_OUTPUT - Write to I/O port
  687/F304 :                            ; Syntax: O port value
  688/F304 :                            CMD_OUTPUT:
  689/F304 : CD 2F F1                           CALL    SKIP_SPACES
  690/F307 : CD 37 F1                           CALL    READ_HEX_WORD       ; Port -> DE
  691/F30A : DA 21 F3                           JC      CO_ERROR
  692/F30D : 7B                                 MOV     A,E
  693/F30E : 32 DA 00                           STA     IO_OUT_STUB+1       ; Patch port
  694/F311 :                                    
  695/F311 : CD 2F F1                           CALL    SKIP_SPACES
  696/F314 : CD 37 F1                           CALL    READ_HEX_WORD       ; Value -> DE
  697/F317 : DA 21 F3                           JC      CO_ERROR
  698/F31A :                                    
  699/F31A : 7B                                 MOV     A,E                 ; Value to output
  700/F31B : CD D9 00                           CALL    IO_OUT_STUB         ; Execute: OUT port / RET
  701/F31E : C3 2D F0                           JMP     MAIN_LOOP
  702/F321 :                            
  703/F321 :                            CO_ERROR:
  704/F321 : 21 0E F5                           LXI     H,MSG_BAD_PORT
  705/F324 : CD A3 F0                           CALL    PRINT_STRING
  706/F327 : C3 2D F0                           JMP     MAIN_LOOP
  707/F32A :                            
  708/F32A :                            ; CMD_HELP - Show help
  709/F32A :                            ; Syntax: ?
  710/F32A :                            CMD_HELP:
  711/F32A : 21 C3 F3                           LXI     H,MSG_HELP
  712/F32D : CD A3 F0                           CALL    PRINT_STRING
  713/F330 : C3 2D F0                           JMP     MAIN_LOOP
  714/F333 :                            
  715/F333 :                            ; ============================================
  716/F333 :                            ; HELPER ROUTINES
  717/F333 :                            ; ============================================
  718/F333 :                            
  719/F333 :                            ; READ_EXAM_BYTE - Read byte value for examine command
  720/F333 :                            ; Reads up to 2 hex digits from console
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 13 - 12/12/2025 18:45:37


  721/F333 :                            ; Output: Carry set = exit (period pressed)
  722/F333 :                            ;         Carry clear: B = digit count, C = value
  723/F333 :                            ;         (caller checks B: 0 = no modification, >0 = store C)
  724/F333 :                            ; Trashes: A, B, C, D, flags
  725/F333 :                            READ_EXAM_BYTE:
  726/F333 : 06 00                              MVI     B,0                 ; Digit count
  727/F335 : 0E 00                              MVI     C,0                 ; Accumulated value
  728/F337 :                                    
  729/F337 :                            REB_LOOP:
  730/F337 : CD 8A F0                           CALL    CONIN
  731/F33A : 57                                 MOV     D,A                 ; Save original for echo
  732/F33B :                                    
  733/F33B : FE 2E                              CPI     '.'                 ; Exit?
  734/F33D : CA 67 F3                           JZ      REB_EXIT
  735/F340 : FE 0D                              CPI     CR                  ; Enter?
  736/F342 : CA 65 F3                           JZ      REB_DONE
  737/F345 : FE 08                              CPI     BS                  ; Backspace?
  738/F347 : CA 69 F3                           JZ      REB_BS
  739/F34A :                                    
  740/F34A : CD 6A F1                           CALL    TO_HEX_DIGIT        ; Convert to 0-15
  741/F34D : DA 37 F3                           JC      REB_LOOP            ; Not hex, ignore
  742/F350 :                                    
  743/F350 :                                    ; Valid hex digit in A
  744/F350 : F5                                 PUSH    PSW
  745/F351 : 79                                 MOV     A,C
  746/F352 : 87                                 ADD     A                   ; Shift left 4
  747/F353 : 87                                 ADD     A
  748/F354 : 87                                 ADD     A
  749/F355 : 87                                 ADD     A
  750/F356 : 4F                                 MOV     C,A
  751/F357 : F1                                 POP     PSW
  752/F358 : B1                                 ORA     C                   ; Add new digit
  753/F359 : 4F                                 MOV     C,A
  754/F35A :                                    
  755/F35A : 04                                 INR     B                   ; Count digit
  756/F35B : 7A                                 MOV     A,D                 ; Echo original char
  757/F35C : CD 7E F0                           CALL    CONOUT
  758/F35F :                                    
  759/F35F : 78                                 MOV     A,B
  760/F360 : FE 02                              CPI     2                   ; Two digits entered?
  761/F362 : DA 37 F3                           JC      REB_LOOP            ; No, keep reading
  762/F365 :                                    ; Fall through with 2 digits
  763/F365 :                                    
  764/F365 :                            REB_DONE:
  765/F365 :                                    ; Carry clear, B = digit count, C = value
  766/F365 : B7                                 ORA     A                   ; Clear carry
  767/F366 : C9                                 RET
  768/F367 :                                    
  769/F367 :                            REB_EXIT:
  770/F367 : 37                                 STC                         ; Set carry = exit
  771/F368 : C9                                 RET
  772/F369 :                                    
  773/F369 :                            REB_BS:
  774/F369 : 78                                 MOV     A,B
  775/F36A : B7                                 ORA     A
  776/F36B : CA 37 F3                           JZ      REB_LOOP            ; Nothing to delete
  777/F36E :                                    
  778/F36E : 05                                 DCR     B
  779/F36F : 79                                 MOV     A,C                 ; Undo the shift
  780/F370 : 0F                                 RRC
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 14 - 12/12/2025 18:45:37


  781/F371 : 0F                                 RRC
  782/F372 : 0F                                 RRC
  783/F373 : 0F                                 RRC
  784/F374 : E6 0F                              ANI     0FH
  785/F376 : 4F                                 MOV     C,A
  786/F377 :                                    
  787/F377 : 3E 08                              MVI     A,BS                ; Erase on screen
  788/F379 : CD 7E F0                           CALL    CONOUT
  789/F37C : 3E 20                              MVI     A,' '
  790/F37E : CD 7E F0                           CALL    CONOUT
  791/F381 : 3E 08                              MVI     A,BS
  792/F383 : CD 7E F0                           CALL    CONOUT
  793/F386 : C3 37 F3                           JMP     REB_LOOP
  794/F389 :                            
  795/F389 :                            ; ============================================
  796/F389 :                            ; STRINGS
  797/F389 :                            ; ============================================
  798/F389 :                            
  799/F389 :                            MSG_BANNER:
  800/F389 : 0D 0A                              DB      CR,LF
  801/F38B : 38 30 38 30 20 4D 6F 6E 69         DB      "8080 Monitor v0.1",CR,LF
      F394 : 74 6F 72 20 76 30 2E 31 0D
      F39D : 0A                        
  802/F39E : 42 75 69 6C 74 3A 20 31 32         DB      'Built: ', DATE, ' ', TIME, CR, LF
      F3A7 : 2F 31 32 2F 32 30 32 35 20
      F3B0 : 31 38 3A 34 35 3A 33 37 0D
      F3B9 : 0A                        
  803/F3BA : 52 65 61 64 79 2E 0D 0A            DB      "Ready.",CR,LF
  804/F3C2 : 00                                 DB      0
  805/F3C3 :                            
  806/F3C3 :                            MSG_HELP:
  807/F3C3 : 43 6F 6D 6D 61 6E 64 73 3A         DB      "Commands:",CR,LF
      F3CC : 0D 0A                     
  808/F3CE : 20 20 44 20 5B 73 74 61 72         DB      "  D [start] [end]  - Dump memory",CR,LF
      F3D7 : 74 5D 20 5B 65 6E 64 5D 20
      F3E0 : 20 2D 20 44 75 6D 70 20 6D
      F3E9 : 65 6D 6F 72 79 0D 0A      
  809/F3F0 : 20 20 45 20 5B 61 64 64 72         DB      "  E [addr]         - Examine/modify",CR,LF
      F3F9 : 5D 20 20 20 20 20 20 20 20
      F402 : 20 2D 20 45 78 61 6D 69 6E
      F40B : 65 2F 6D 6F 64 69 66 79 0D
      F414 : 0A                        
  810/F415 : 20 20 47 20 5B 61 64 64 72         DB      "  G [addr]         - Go (execute)",CR,LF
      F41E : 5D 20 20 20 20 20 20 20 20
      F427 : 20 2D 20 47 6F 20 28 65 78
      F430 : 65 63 75 74 65 29 0D 0A   
  811/F438 : 20 20 48 20 6E 75 6D 31 20         DB      "  H num1 num2      - Hex math (+/-)",CR,LF
      F441 : 6E 75 6D 32 20 20 20 20 20
      F44A : 20 2D 20 48 65 78 20 6D 61
      F453 : 74 68 20 28 2B 2F 2D 29 0D
      F45C : 0A                        
  812/F45D : 20 20 49 20 70 6F 72 74 20         DB      "  I port           - Input from port",CR,LF
      F466 : 20 20 20 20 20 20 20 20 20
      F46F : 20 2D 20 49 6E 70 75 74 20
      F478 : 66 72 6F 6D 20 70 6F 72 74
      F481 : 0D 0A                     
  813/F483 : 20 20 4F 20 70 6F 72 74 20         DB      "  O port value     - Output to port",CR,LF
      F48C : 76 61 6C 75 65 20 20 20 20
      F495 : 20 2D 20 4F 75 74 70 75 74
      F49E : 20 74 6F 20 70 6F 72 74 0D
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 15 - 12/12/2025 18:45:37


      F4A7 : 0A                        
  814/F4A8 : 20 20 3F 20 20 20 20 20 20         DB      "  ?                - Help",CR,LF
      F4B1 : 20 20 20 20 20 20 20 20 20
      F4BA : 20 2D 20 48 65 6C 70 0D 0A
  815/F4C3 : 00                                 DB      0
  816/F4C4 :                            
  817/F4C4 :                            MSG_UNKNOWN:
  818/F4C4 : 55 6E 6B 6E 6F 77 6E 20 63         DB      "Unknown command. Type ? for help.",CR,LF,0
      F4CD : 6F 6D 6D 61 6E 64 2E 20 54
      F4D6 : 79 70 65 20 3F 20 66 6F 72
      F4DF : 20 68 65 6C 70 2E 0D 0A 00
  819/F4E8 :                            
  820/F4E8 :                            MSG_BAD_ADDR:
  821/F4E8 : 49 6E 76 61 6C 69 64 20 61         DB      "Invalid address",CR,LF,0
      F4F1 : 64 64 72 65 73 73 0D 0A 00
  822/F4FA :                            
  823/F4FA :                            MSG_BAD_HEX:
  824/F4FA : 49 6E 76 61 6C 69 64 20 68         DB      "Invalid hex value",CR,LF,0
      F503 : 65 78 20 76 61 6C 75 65 0D
      F50C : 0A 00                     
  825/F50E :                            
  826/F50E :                            MSG_BAD_PORT:
  827/F50E : 49 6E 76 61 6C 69 64 20 70         DB      "Invalid port/value",CR,LF,0
      F517 : 6F 72 74 2F 76 61 6C 75 65
      F520 : 0D 0A 00                  
  828/F523 :                            
  829/F523 :                            ; ============================================
  830/F523 :                            ; PADDING
  831/F523 :                            ; ============================================
  832/F523 :                            
  833/F523 : =>FALSE                            IF      $ > 0FFFFH
  834/F523 :                                    ERROR   "ROM exceeds 4KB!"
  835/F523 : [833]                              ENDIF
  836/F523 :                            
  837/F523 :                                    END     COLD_START
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 16 - 12/12/2025 18:45:37


  Symbol Table (* = unused):
  --------------------------

*ARCHITECTURE :                                      "aarch64-apple-darwin" - |
 BS :                             8 - | *BUFFER_PTR :                   0D0 - |
*CASESENSITIVE :                  0 - |  CD_ASCII :                   0F20E C |
 CD_DONE :                    0F243 C |  CD_DOT :                     0F219 C |
 CD_DUMP_RANGE :              0F1E4 C |  CD_ERROR :                   0F1DB C |
 CD_HEX_BYTE :                0F1F3 C |  CD_LINE :                    0F1E5 C |
 CD_NO_ARGS :                 0F1B5 C |  CD_NO_GAP :                  0F203 C |
 CD_NO_WRAP1 :                0F1C2 C |  CD_NO_WRAP2 :                0F1D5 C |
 CD_NO_WRAP3 :                0F233 C |  CD_ONE_ARG :                 0F1C9 C |
 CD_POP_ERROR :               0F1DA C |  CD_PRINT_CHAR :              0F21B C |
 CE_ERROR :                   0F292 C |  CE_EXIT :                    0F289 C |
 CE_LOOP :                    0F25F C |  CE_NEXT :                    0F282 C |
 CE_USE_LAST :                0F25C C |  CG_DEFAULT :                 0F2A6 C |
 CH_ERROR :                   0F2D9 C |  CH_POP_ERROR :               0F2D8 C |
 CI_ERROR :                   0F2FB C |  CMD_DUMP :                   0F194 C |
 CMD_EXAMINE :                0F24A C |  CMD_GO :                     0F29B C |
 CMD_HELP :                   0F32A C |  CMD_HEX_MATH :               0F2AA C |
 CMD_INPUT :                  0F2E2 C |  CMD_OUTPUT :                 0F304 C |
 COLD_START :                 0F000 C |  CONIN :                      0F08A C |
 CONOUT :                     0F07E C |  CONOUT_WAIT :                0F07F C |
 CONSOLE_DATA_IN :                1 - |  CONSOLE_DATA_OUT :               0 - |
 CONSOLE_STATUS :                 2 - | *CONST :                      0F094 C |
*CONSTPI :        3.141592653589793 - |  CO_ERROR :                   0F321 C |
 CR :                            0D - |  DATE :                "12/12/2025" - |
*FALSE :                          0 - | *FLOATMAX :      1.797693134866E308 - |
*HAS64 :                          1 - |  IO_IN_STUB :                   0D6 - |
 IO_OUT_STUB :                  0D9 - |  LAST_DUMP_ADDR :               0D2 - |
 LAST_EXAM_ADDR :               0D4 - |  LF :                            0A - |
 LINE_BUFFER :                   80 - |  LINE_LENGTH :                   50 - |
*LISTON :                         1 - | *MACEXP :                         7 - |
 MAIN_LOOP :                  0F02D C | *MOMCPU :                      8080 - |
*MOMCPUNAME :                "8080" - |  MSG_BAD_ADDR :               0F4E8 C |
 MSG_BAD_HEX :                0F4FA C |  MSG_BAD_PORT :               0F50E C |
 MSG_BANNER :                 0F389 C |  MSG_HELP :                   0F3C3 C |
 MSG_UNKNOWN :                0F4C4 C | *NESTMAX :                      100 - |
 NOT_LOWER :                  0F051 C |  PHN_DIGIT :                  0F0D4 C |
 PRINT_BANNER :               0F09C C |  PRINT_CRLF :                 0F0AD C |
 PRINT_HEX_BYTE :             0F0BE C |  PRINT_HEX_NIBBLE :           0F0CB C |
 PRINT_HEX_WORD :             0F0DA C |  PRINT_SPACE :                0F0B8 C |
 PRINT_STRING :               0F0A3 C |  READ_EXAM_BYTE :             0F333 C |
 READ_HEX_WORD :              0F137 C |  READ_LINE :                  0F0E3 C |
 REB_BS :                     0F369 C |  REB_DONE :                   0F365 C |
 REB_EXIT :                   0F367 C |  REB_LOOP :                   0F337 C |
*RELAXED :                        0 - |  RHW_DONE :                   0F164 C |
 RHW_LOOP :                   0F13F C |  RL_BACKSPACE :               0F110 C |
 RL_DONE :                    0F129 C |  RL_LOOP :                    0F0E8 C |
 SKIP_SPACES :                0F12F C |  SPACE :                         20 - |
 STACK_TOP :                  0F000 - |  THD_ALPHA :                  0F18A C |
 THD_DIGIT :                  0F18E C |  THD_FAIL :                   0F192 C |
 TIME :                  "18:45:37" - |  TO_HEX_DIGIT :               0F16A C |
*TRUE :                           1 - | *VERSION :                     142F - |
*Z80SYNTAX :                      0 - |

    102 symbols
     17 unused symbols

 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 17 - 12/12/2025 18:45:37


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.00 seconds assembly time

    837 lines source file
      2 passes
      0 errors
      0 warnings
