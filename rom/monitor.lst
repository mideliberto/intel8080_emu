 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 1 - 12/20/2025 21:20:05


    1/   0 :                            ; monitor.asm - Intel 8080 Monitor ROM
    2/   0 :                            ; Assemble with: make
    3/   0 :                            ; 
    4/   0 :                            ; Memory Map:
    5/   0 :                            ;   0x0000-0x00FF: System workspace (RAM)
    6/   0 :                            ;   0x0100-0xEFFF: User program area (RAM)
    7/   0 :                            ;   0xF000-0xFFFF: Monitor ROM (this file)
    8/   0 :                            ;
    9/   0 :                            ; I/O Ports:
   10/   0 :                            ;   0x00: Console data out (write only)
   11/   0 :                            ;   0x01: Console data in (read only)
   12/   0 :                            ;   0x02: Console status (bit 0 = RX ready, bit 1 = TX ready)
   13/   0 :                            
   14/   0 :                                    CPU     8080
   15/F000 :                                    ORG     0F000H
   16/F000 :                            
   17/F000 :                            ; ============================================
   18/F000 :                            ; CONSTANTS
   19/F000 :                            ; ============================================
   20/F000 :                            
   21/F000 : =0H                        CONSOLE_DATA_OUT    EQU     00H
   22/F000 : =1H                        CONSOLE_DATA_IN     EQU     01H
   23/F000 : =2H                        CONSOLE_STATUS      EQU     02H
   24/F000 :                            
   25/F000 : =0FEH                      SYSTEM_CONTROL      EQU     0FEH        ; ROM overlay control
   26/F000 :                            
   27/F000 :                            ; Storage Device Ports (0x08-0x0C)
   28/F000 : =8H                        STORAGE_ADDR_LO     EQU     08H
   29/F000 : =9H                        STORAGE_ADDR_MID    EQU     09H
   30/F000 : =0AH                       STORAGE_ADDR_HI     EQU     0AH
   31/F000 : =0BH                       STORAGE_DATA        EQU     0BH
   32/F000 : =0CH                       STORAGE_CTRL        EQU     0CH         ; Write: control, Read: status
   33/F000 :                            
   34/F000 :                            ; Storage Mount Ports (0x0D-0x0F)
   35/F000 : =0DH                       MOUNT_FILENAME      EQU     0DH
   36/F000 : =0EH                       MOUNT_CTRL          EQU     0EH
   37/F000 : =0FH                       MOUNT_STATUS        EQU     0FH
   38/F000 :                            
   39/F000 : =0F000H                    STACK_TOP       EQU     0F000H      ; Stack grows down from ROM
   40/F000 :                            
   41/F000 : =0DH                       CR              EQU     0DH
   42/F000 : =0AH                       LF              EQU     0AH
   43/F000 : =8H                        BS              EQU     08H
   44/F000 : =20H                       SPACE           EQU     20H
   45/F000 :                            
   46/F000 :                            ; ============================================
   47/F000 :                            ; WORKSPACE (RAM at 0x0080-0x00FF)
   48/F000 :                            ; ============================================
   49/F000 :                            
   50/F000 : =80H                       LINE_BUFFER     EQU     0080H       ; 80 bytes for command line
   51/F000 : =50H                       LINE_LENGTH     EQU     80          ; Max 80 chars
   52/F000 : =0D0H                      BUFFER_PTR      EQU     00D0H       ; Current position in buffer (2 bytes)
   53/F000 : =0D2H                      LAST_DUMP_ADDR  EQU     00D2H       ; Last dump address (2 bytes)
   54/F000 : =0D4H                      LAST_EXAM_ADDR  EQU     00D4H       ; Last examine address (2 bytes)
   55/F000 :                            
   56/F000 :                            ; I/O stubs (self-modifying code)
   57/F000 : =0D6H                      IO_IN_STUB      EQU     00D6H       ; 3 bytes: IN xx / RET
   58/F000 : =0D9H                      IO_OUT_STUB     EQU     00D9H       ; 3 bytes: OUT xx / RET
   59/F000 :                            
   60/F000 :                            ; Search command workspace
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 2 - 12/20/2025 21:20:05


   61/F000 : =0DCH                      SEARCH_PATTERN  EQU     00DCH       ; 8 bytes for pattern
   62/F000 : =0E4H                      SEARCH_LENGTH   EQU     00E4H       ; 1 byte for pattern length
   63/F000 : =0E5H                      SEARCH_END      EQU     00E5H       ; 2 bytes for end address
   64/F000 :                            
   65/F000 :                            ; Storage command workspace
   66/F000 : =0E7H                      STOR_ADDR       EQU     00E7H       ; 3 bytes: storage address (lo, mid, hi)
   67/F000 :                            
   68/F000 :                            ; ============================================
   69/F000 :                            ; COLD START
   70/F000 :                            ; ============================================
   71/F000 :                            
   72/F000 :                            COLD_START:
   73/F000 :                                    ; Running from overlay - PC near 0x0000, reading ROM at 0xF000
   74/F000 : 31 00 F0                           LXI     SP,STACK_TOP        ; Initialize stack pointer
   75/F003 : F3                                 DI                          ; Disable interrupts
   76/F004 : C3 07 F0                           JMP     BOOT_CONTINUE       ; Jump to F000+ address space
   77/F007 :                            
   78/F007 :                            ; Now executing from 0xF000+ range - safe to disable overlay
   79/F007 :                            BOOT_CONTINUE:
   80/F007 : AF                                 XRA     A                   ; A = 0x00
   81/F008 : D3 FE                              OUT     SYSTEM_CONTROL      ; Disable overlay, expose RAM at 0x0000
   82/F00A :                                    
   83/F00A :                                    ; Initialize workspace (now writing to actual RAM)
   84/F00A : 21 00 00                           LXI     H,0000H
   85/F00D : 22 D2 00                           SHLD    LAST_DUMP_ADDR      ; Default dump address = 0
   86/F010 : 22 D4 00                           SHLD    LAST_EXAM_ADDR      ; Default exam address = 0
   87/F013 :                                    
   88/F013 :                                    ; Initialize I/O stubs
   89/F013 : 3E DB                              MVI     A,0DBH              ; IN opcode
   90/F015 : 32 D6 00                           STA     IO_IN_STUB
   91/F018 : 3E 00                              MVI     A,00H               ; Default port 0
   92/F01A : 32 D7 00                           STA     IO_IN_STUB+1
   93/F01D : 3E C9                              MVI     A,0C9H              ; RET opcode
   94/F01F : 32 D8 00                           STA     IO_IN_STUB+2
   95/F022 :                                    
   96/F022 : 3E D3                              MVI     A,0D3H              ; OUT opcode
   97/F024 : 32 D9 00                           STA     IO_OUT_STUB
   98/F027 : 3E 00                              MVI     A,00H               ; Default port 0
   99/F029 : 32 DA 00                           STA     IO_OUT_STUB+1
  100/F02C : 3E C9                              MVI     A,0C9H              ; RET opcode
  101/F02E : 32 DB 00                           STA     IO_OUT_STUB+2
  102/F031 :                                    
  103/F031 : CD C6 F0                           CALL    PRINT_BANNER        ; Show startup message
  104/F034 :                            
  105/F034 :                            ; ============================================
  106/F034 :                            ; MAIN LOOP
  107/F034 :                            ; ============================================
  108/F034 :                            
  109/F034 :                            MAIN_LOOP:
  110/F034 : 3E 3E                              MVI     A,'>'               ; Print prompt
  111/F036 : CD A8 F0                           CALL    CONOUT
  112/F039 : 3E 20                              MVI     A,' '
  113/F03B : CD A8 F0                           CALL    CONOUT
  114/F03E :                                    
  115/F03E : CD 0D F1                           CALL    READ_LINE           ; Read command into LINE_BUFFER
  116/F041 :                                    
  117/F041 : 21 80 00                           LXI     H,LINE_BUFFER       ; Point to start of buffer
  118/F044 : CD 59 F1                           CALL    SKIP_SPACES         ; Skip leading spaces
  119/F047 :                                    
  120/F047 : 7E                                 MOV     A,M                 ; Get command character
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 3 - 12/20/2025 21:20:05


  121/F048 : B7                                 ORA     A                   ; Empty line?
  122/F049 : CA 34 F0                           JZ      MAIN_LOOP           ; Yes, just prompt again
  123/F04C :                                    
  124/F04C :                                    ; Convert to uppercase if lowercase
  125/F04C : FE 61                              CPI     'a'
  126/F04E : DA 58 F0                           JC      NOT_LOWER
  127/F051 : FE 7B                              CPI     'z'+1
  128/F053 : D2 58 F0                           JNC     NOT_LOWER
  129/F056 : D6 20                              SUI     20H                 ; Convert to uppercase
  130/F058 :                            NOT_LOWER:
  131/F058 :                                    
  132/F058 : 23                                 INX     H                   ; Point past command char
  133/F059 :                                    
  134/F059 :                                    ; Command dispatch
  135/F059 : FE 43                              CPI     'C'
  136/F05B : CA 17 F2                           JZ      CMD_COMPARE
  137/F05E : FE 44                              CPI     'D'
  138/F060 : CA 8B F2                           JZ      CMD_DUMP
  139/F063 : FE 45                              CPI     'E'
  140/F065 : CA 41 F3                           JZ      CMD_EXAMINE
  141/F068 : FE 46                              CPI     'F'
  142/F06A : CA 92 F3                           JZ      CMD_FILL
  143/F06D : FE 47                              CPI     'G'
  144/F06F : CA D0 F3                           JZ      CMD_GO
  145/F072 : FE 48                              CPI     'H'
  146/F074 : CA DF F3                           JZ      CMD_HEX_MATH
  147/F077 : FE 49                              CPI     'I'
  148/F079 : CA 17 F4                           JZ      CMD_INPUT
  149/F07C : FE 4D                              CPI     'M'
  150/F07E : CA 39 F4                           JZ      CMD_MOVE
  151/F081 : FE 4F                              CPI     'O'
  152/F083 : CA 7E F4                           JZ      CMD_OUTPUT
  153/F086 : FE 53                              CPI     'S'
  154/F088 : CA A4 F4                           JZ      CMD_SEARCH
  155/F08B : FE 4C                              CPI     'L'
  156/F08D : CA F0 F5                           JZ      CMD_LOAD
  157/F090 : FE 57                              CPI     'W'
  158/F092 : CA 52 F6                           JZ      CMD_WRITE
  159/F095 : FE 58                              CPI     'X'
  160/F097 : CA 92 F5                           JZ      CMD_MOUNT
  161/F09A : FE 3F                              CPI     '?'
  162/F09C : CA 2E F5                           JZ      CMD_HELP
  163/F09F :                                    
  164/F09F :                                    ; Unknown command
  165/F09F : 21 F4 F8                           LXI     H,MSG_UNKNOWN
  166/F0A2 : CD CD F0                           CALL    PRINT_STRING
  167/F0A5 : C3 34 F0                           JMP     MAIN_LOOP
  168/F0A8 :                            
  169/F0A8 :                            ; ============================================
  170/F0A8 :                            ; CONSOLE I/O ROUTINES
  171/F0A8 :                            ; ============================================
  172/F0A8 :                            
  173/F0A8 :                            ; CONOUT - Output character in A
  174/F0A8 :                            ; Preserves: all registers
  175/F0A8 :                            CONOUT:
  176/F0A8 : F5                                 PUSH    PSW
  177/F0A9 :                            CONOUT_WAIT:
  178/F0A9 : DB 02                              IN      CONSOLE_STATUS
  179/F0AB : E6 02                              ANI     02H
  180/F0AD : CA A9 F0                           JZ      CONOUT_WAIT
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 4 - 12/20/2025 21:20:05


  181/F0B0 : F1                                 POP     PSW
  182/F0B1 : D3 00                              OUT     CONSOLE_DATA_OUT
  183/F0B3 : C9                                 RET
  184/F0B4 :                            
  185/F0B4 :                            ; CONIN - Input character to A
  186/F0B4 :                            ; Trashes: flags
  187/F0B4 :                            CONIN:
  188/F0B4 : DB 02                              IN      CONSOLE_STATUS
  189/F0B6 : E6 01                              ANI     01H
  190/F0B8 : CA B4 F0                           JZ      CONIN
  191/F0BB : DB 01                              IN      CONSOLE_DATA_IN
  192/F0BD : C9                                 RET
  193/F0BE :                            
  194/F0BE :                            ; CONST - Console status
  195/F0BE :                            ; Returns: A = 0xFF if char available, 0x00 if not
  196/F0BE :                            ; Trashes: flags
  197/F0BE :                            CONST:
  198/F0BE : DB 02                              IN      CONSOLE_STATUS
  199/F0C0 : E6 01                              ANI     01H
  200/F0C2 : C8                                 RZ                          ; Return 0 if no char
  201/F0C3 : 3E FF                              MVI     A,0FFH              ; Return FF if char available
  202/F0C5 : C9                                 RET
  203/F0C6 :                            
  204/F0C6 :                            ; ============================================
  205/F0C6 :                            ; PRINT ROUTINES
  206/F0C6 :                            ; ============================================
  207/F0C6 :                            
  208/F0C6 :                            ; PRINT_BANNER - Display startup message
  209/F0C6 :                            ; Trashes: A, HL, flags
  210/F0C6 :                            PRINT_BANNER:
  211/F0C6 : 21 B9 F6                           LXI     H,MSG_BANNER
  212/F0C9 : CD CD F0                           CALL    PRINT_STRING
  213/F0CC : C9                                 RET
  214/F0CD :                            
  215/F0CD :                            ; PRINT_STRING - Print null-terminated string at HL
  216/F0CD :                            ; Trashes: A, HL, flags
  217/F0CD :                            PRINT_STRING:
  218/F0CD : 7E                                 MOV     A,M                 ; Get character
  219/F0CE : B7                                 ORA     A                   ; Check for null
  220/F0CF : C8                                 RZ                          ; Return if end of string
  221/F0D0 : CD A8 F0                           CALL    CONOUT
  222/F0D3 : 23                                 INX     H
  223/F0D4 : C3 CD F0                           JMP     PRINT_STRING
  224/F0D7 :                            
  225/F0D7 :                            ; PRINT_CRLF - Print carriage return and line feed
  226/F0D7 :                            ; Trashes: A, flags
  227/F0D7 :                            PRINT_CRLF:
  228/F0D7 : 3E 0D                              MVI     A,CR
  229/F0D9 : CD A8 F0                           CALL    CONOUT
  230/F0DC : 3E 0A                              MVI     A,LF
  231/F0DE : CD A8 F0                           CALL    CONOUT
  232/F0E1 : C9                                 RET
  233/F0E2 :                            
  234/F0E2 :                            ; PRINT_SPACE - Print a space
  235/F0E2 :                            ; Trashes: A, flags
  236/F0E2 :                            PRINT_SPACE:
  237/F0E2 : 3E 20                              MVI     A,SPACE
  238/F0E4 : CD A8 F0                           CALL    CONOUT
  239/F0E7 : C9                                 RET
  240/F0E8 :                            
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 5 - 12/20/2025 21:20:05


  241/F0E8 :                            ; PRINT_HEX_BYTE - Print A as two hex digits
  242/F0E8 :                            ; Input: A = byte to print
  243/F0E8 :                            ; Trashes: A, flags
  244/F0E8 :                            PRINT_HEX_BYTE:
  245/F0E8 : F5                                 PUSH    PSW                 ; Save original byte
  246/F0E9 : 0F                                 RRC                         ; Shift high nibble to low
  247/F0EA : 0F                                 RRC
  248/F0EB : 0F                                 RRC
  249/F0EC : 0F                                 RRC
  250/F0ED : CD F5 F0                           CALL    PRINT_HEX_NIBBLE    ; Print high nibble
  251/F0F0 : F1                                 POP     PSW                 ; Restore original
  252/F0F1 : CD F5 F0                           CALL    PRINT_HEX_NIBBLE    ; Print low nibble
  253/F0F4 : C9                                 RET
  254/F0F5 :                            
  255/F0F5 :                            ; PRINT_HEX_NIBBLE - Print low nibble of A as hex digit
  256/F0F5 :                            ; Input: A = value (low 4 bits used)
  257/F0F5 :                            ; Trashes: A, flags
  258/F0F5 :                            PRINT_HEX_NIBBLE:
  259/F0F5 : E6 0F                              ANI     0FH                 ; Mask to low nibble
  260/F0F7 : FE 0A                              CPI     0AH                 ; Is it A-F?
  261/F0F9 : DA FE F0                           JC      PHN_DIGIT           ; No, it's 0-9
  262/F0FC : C6 07                              ADI     07H                 ; Adjust for A-F
  263/F0FE :                            PHN_DIGIT:
  264/F0FE : C6 30                              ADI     '0'                 ; Convert to ASCII
  265/F100 : CD A8 F0                           CALL    CONOUT
  266/F103 : C9                                 RET
  267/F104 :                            
  268/F104 :                            ; PRINT_HEX_WORD - Print HL as four hex digits
  269/F104 :                            ; Input: HL = word to print
  270/F104 :                            ; Trashes: A, flags
  271/F104 :                            PRINT_HEX_WORD:
  272/F104 : 7C                                 MOV     A,H
  273/F105 : CD E8 F0                           CALL    PRINT_HEX_BYTE
  274/F108 : 7D                                 MOV     A,L
  275/F109 : CD E8 F0                           CALL    PRINT_HEX_BYTE
  276/F10C : C9                                 RET
  277/F10D :                            
  278/F10D :                            ; ============================================
  279/F10D :                            ; INPUT ROUTINES
  280/F10D :                            ; ============================================
  281/F10D :                            
  282/F10D :                            ; READ_LINE - Read line into LINE_BUFFER
  283/F10D :                            ; Handles: BS (backspace), CR (end of line)
  284/F10D :                            ; Returns: LINE_BUFFER contains null-terminated string
  285/F10D :                            ; Trashes: A, B, C, HL, flags
  286/F10D :                            READ_LINE:
  287/F10D : 21 80 00                           LXI     H,LINE_BUFFER       ; Point to buffer start
  288/F110 : 06 00                              MVI     B,0                 ; Character count
  289/F112 :                                    
  290/F112 :                            RL_LOOP:
  291/F112 : CD B4 F0                           CALL    CONIN               ; Get character
  292/F115 : 4F                                 MOV     C,A                 ; Save it in C
  293/F116 :                                    
  294/F116 : FE 0D                              CPI     CR                  ; Enter pressed?
  295/F118 : CA 53 F1                           JZ      RL_DONE
  296/F11B : FE 0A                              CPI     LF
  297/F11D : CA 53 F1                           JZ      RL_DONE
  298/F120 :                                    
  299/F120 : FE 08                              CPI     BS                  ; Backspace?
  300/F122 : CA 3A F1                           JZ      RL_BACKSPACE
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 6 - 12/20/2025 21:20:05


  301/F125 :                                    
  302/F125 : FE 20                              CPI     SPACE               ; Ignore control chars
  303/F127 : DA 12 F1                           JC      RL_LOOP
  304/F12A :                                    
  305/F12A :                                    ; Check buffer full
  306/F12A : 78                                 MOV     A,B
  307/F12B : FE 4F                              CPI     LINE_LENGTH-1       ; Room for char + null?
  308/F12D : D2 12 F1                           JNC     RL_LOOP             ; Buffer full, ignore
  309/F130 :                                    
  310/F130 :                                    ; Store and echo character
  311/F130 : 71                                 MOV     M,C                 ; Store in buffer
  312/F131 : 23                                 INX     H                   ; Advance pointer
  313/F132 : 04                                 INR     B                   ; Increment count
  314/F133 : 79                                 MOV     A,C                 ; Echo character
  315/F134 : CD A8 F0                           CALL    CONOUT
  316/F137 : C3 12 F1                           JMP     RL_LOOP
  317/F13A :                                    
  318/F13A :                            RL_BACKSPACE:
  319/F13A : 78                                 MOV     A,B                 ; Check if buffer empty
  320/F13B : B7                                 ORA     A
  321/F13C : CA 12 F1                           JZ      RL_LOOP             ; Nothing to delete
  322/F13F :                                    
  323/F13F : 2B                                 DCX     H                   ; Back up pointer
  324/F140 : 05                                 DCR     B                   ; Decrement count
  325/F141 :                                    
  326/F141 :                                    ; Erase character on screen: BS, space, BS
  327/F141 : 3E 08                              MVI     A,BS
  328/F143 : CD A8 F0                           CALL    CONOUT
  329/F146 : 3E 20                              MVI     A,SPACE
  330/F148 : CD A8 F0                           CALL    CONOUT
  331/F14B : 3E 08                              MVI     A,BS
  332/F14D : CD A8 F0                           CALL    CONOUT
  333/F150 : C3 12 F1                           JMP     RL_LOOP
  334/F153 :                                    
  335/F153 :                            RL_DONE:
  336/F153 : 36 00                              MVI     M,0                 ; Null terminate
  337/F155 : CD D7 F0                           CALL    PRINT_CRLF          ; Echo newline
  338/F158 : C9                                 RET
  339/F159 :                            
  340/F159 :                            ; ============================================
  341/F159 :                            ; PARSING ROUTINES
  342/F159 :                            ; ============================================
  343/F159 :                            
  344/F159 :                            ; SKIP_SPACES - Skip spaces in buffer
  345/F159 :                            ; Input: HL = pointer into buffer
  346/F159 :                            ; Output: HL = pointer to first non-space (or null)
  347/F159 :                            ; Trashes: A, flags
  348/F159 :                            SKIP_SPACES:
  349/F159 : 7E                                 MOV     A,M
  350/F15A : FE 20                              CPI     SPACE
  351/F15C : C0                                 RNZ                         ; Return if not a space
  352/F15D : 23                                 INX     H
  353/F15E : C3 59 F1                           JMP     SKIP_SPACES
  354/F161 :                            
  355/F161 :                            ; READ_HEX_WORD - Parse hex number from buffer
  356/F161 :                            ; Input: HL = pointer into buffer
  357/F161 :                            ; Output: DE = parsed value, HL = advanced past number
  358/F161 :                            ;         Carry set if no valid hex digits found
  359/F161 :                            ; Trashes: A, BC, flags
  360/F161 :                            READ_HEX_WORD:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 7 - 12/20/2025 21:20:05


  361/F161 : CD 59 F1                           CALL    SKIP_SPACES         ; Skip leading spaces
  362/F164 : 11 00 00                           LXI     D,0                 ; Initialize result
  363/F167 : 06 00                              MVI     B,0                 ; Digit count
  364/F169 :                                    
  365/F169 :                            RHW_LOOP:
  366/F169 : 7E                                 MOV     A,M                 ; Get character
  367/F16A : CD 94 F1                           CALL    TO_HEX_DIGIT        ; Convert to 0-15
  368/F16D : DA 8E F1                           JC      RHW_DONE            ; Not a hex digit, done
  369/F170 :                                    
  370/F170 :                                    ; Shift DE left 4 bits and add new digit
  371/F170 :                                    ; DE = DE * 16 + A
  372/F170 : F5                                 PUSH    PSW                 ; Save digit
  373/F171 :                                    
  374/F171 :                                    ; Get E's high nibble (will go to D's low nibble)
  375/F171 : 7B                                 MOV     A,E
  376/F172 : E6 F0                              ANI     0F0H                ; Isolate high nibble
  377/F174 : 0F                                 RRC
  378/F175 : 0F                                 RRC
  379/F176 : 0F                                 RRC
  380/F177 : 0F                                 RRC                         ; Move to low nibble position
  381/F178 : 4F                                 MOV     C,A                 ; Save it
  382/F179 :                                    
  383/F179 :                                    ; Shift D left 4 bits
  384/F179 : 7A                                 MOV     A,D
  385/F17A : 87                                 ADD     A
  386/F17B : 87                                 ADD     A
  387/F17C : 87                                 ADD     A
  388/F17D : 87                                 ADD     A                   ; D << 4
  389/F17E : B1                                 ORA     C                   ; OR in E's high nibble
  390/F17F : 57                                 MOV     D,A
  391/F180 :                                    
  392/F180 :                                    ; Shift E left 4 bits
  393/F180 : 7B                                 MOV     A,E
  394/F181 : 87                                 ADD     A
  395/F182 : 87                                 ADD     A
  396/F183 : 87                                 ADD     A
  397/F184 : 87                                 ADD     A                   ; E << 4
  398/F185 : 5F                                 MOV     E,A
  399/F186 :                                    
  400/F186 :                                    ; Add new digit
  401/F186 : F1                                 POP     PSW
  402/F187 : B3                                 ORA     E
  403/F188 : 5F                                 MOV     E,A
  404/F189 :                                    
  405/F189 : 23                                 INX     H                   ; Advance buffer pointer
  406/F18A : 04                                 INR     B                   ; Count digit
  407/F18B : C3 69 F1                           JMP     RHW_LOOP
  408/F18E :                                    
  409/F18E :                            RHW_DONE:
  410/F18E : 78                                 MOV     A,B                 ; Check digit count
  411/F18F : B7                                 ORA     A
  412/F190 : 37                                 STC                         ; Set carry (no digits)
  413/F191 : C8                                 RZ                          ; Return with carry if no digits
  414/F192 : B7                                 ORA     A                   ; Clear carry (success)
  415/F193 : C9                                 RET
  416/F194 :                            
  417/F194 :                            ; TO_HEX_DIGIT - Convert ASCII to hex value
  418/F194 :                            ; Input: A = ASCII character
  419/F194 :                            ; Output: A = hex value (0-15), Carry clear
  420/F194 :                            ;         Carry set if not a hex digit
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 8 - 12/20/2025 21:20:05


  421/F194 :                            ; Trashes: flags
  422/F194 :                            TO_HEX_DIGIT:
  423/F194 : FE 30                              CPI     '0'
  424/F196 : DA BC F1                           JC      THD_FAIL            ; Below '0'
  425/F199 : FE 3A                              CPI     '9'+1
  426/F19B : DA B8 F1                           JC      THD_DIGIT           ; '0'-'9'
  427/F19E :                                    
  428/F19E : FE 41                              CPI     'A'
  429/F1A0 : DA BC F1                           JC      THD_FAIL            ; Between '9' and 'A'
  430/F1A3 : FE 47                              CPI     'F'+1
  431/F1A5 : DA B4 F1                           JC      THD_ALPHA           ; 'A'-'F'
  432/F1A8 :                                    
  433/F1A8 : FE 61                              CPI     'a'
  434/F1AA : DA BC F1                           JC      THD_FAIL            ; Between 'F' and 'a'
  435/F1AD : FE 67                              CPI     'f'+1
  436/F1AF : D2 BC F1                           JNC     THD_FAIL            ; Above 'f'
  437/F1B2 :                                    
  438/F1B2 :                                    ; 'a'-'f': convert to uppercase first
  439/F1B2 : D6 20                              SUI     20H
  440/F1B4 :                                    
  441/F1B4 :                            THD_ALPHA:
  442/F1B4 : D6 37                              SUI     'A'-10              ; Convert 'A'-'F' to 10-15
  443/F1B6 : B7                                 ORA     A                   ; Clear carry
  444/F1B7 : C9                                 RET
  445/F1B8 :                                    
  446/F1B8 :                            THD_DIGIT:
  447/F1B8 : D6 30                              SUI     '0'                 ; Convert '0'-'9' to 0-9
  448/F1BA : B7                                 ORA     A                   ; Clear carry
  449/F1BB : C9                                 RET
  450/F1BC :                                    
  451/F1BC :                            THD_FAIL:
  452/F1BC : 37                                 STC                         ; Set carry = not hex
  453/F1BD : C9                                 RET
  454/F1BE :                            
  455/F1BE :                            ; READ_HEX_ADDR24 - Parse 24-bit hex number from buffer
  456/F1BE :                            ; Input: HL = pointer into buffer
  457/F1BE :                            ; Output: STOR_ADDR filled (3 bytes: lo, mid, hi), HL advanced
  458/F1BE :                            ;         Carry set if no valid hex digits found
  459/F1BE :                            ; Trashes: A, BC, flags
  460/F1BE :                            READ_HEX_ADDR24:
  461/F1BE : CD 59 F1                           CALL    SKIP_SPACES
  462/F1C1 :                                    ; Clear storage address
  463/F1C1 : AF                                 XRA     A
  464/F1C2 : 32 E7 00                           STA     STOR_ADDR
  465/F1C5 : 32 E8 00                           STA     STOR_ADDR+1
  466/F1C8 : 32 E9 00                           STA     STOR_ADDR+2
  467/F1CB : 06 00                              MVI     B,0                 ; Digit count
  468/F1CD :                                    
  469/F1CD :                            RHA_LOOP:
  470/F1CD : 7E                                 MOV     A,M
  471/F1CE : CD 94 F1                           CALL    TO_HEX_DIGIT
  472/F1D1 : DA 11 F2                           JC      RHA_DONE
  473/F1D4 :                                    
  474/F1D4 :                                    ; Shift 24-bit value left 4, add new digit
  475/F1D4 : F5                                 PUSH    PSW                 ; Save new digit
  476/F1D5 :                                    
  477/F1D5 :                                    ; Shift high byte left 4, get high nibble from mid
  478/F1D5 : 3A E9 00                           LDA     STOR_ADDR+2
  479/F1D8 : 87                                 ADD     A
  480/F1D9 : 87                                 ADD     A
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 9 - 12/20/2025 21:20:05


  481/F1DA : 87                                 ADD     A
  482/F1DB : 87                                 ADD     A
  483/F1DC : 4F                                 MOV     C,A                 ; C = high << 4
  484/F1DD : 3A E8 00                           LDA     STOR_ADDR+1
  485/F1E0 : E6 F0                              ANI     0F0H
  486/F1E2 : 0F                                 RRC
  487/F1E3 : 0F                                 RRC
  488/F1E4 : 0F                                 RRC
  489/F1E5 : 0F                                 RRC
  490/F1E6 : B1                                 ORA     C
  491/F1E7 : 32 E9 00                           STA     STOR_ADDR+2
  492/F1EA :                                    
  493/F1EA :                                    ; Shift mid byte left 4, get high nibble from low
  494/F1EA : 3A E8 00                           LDA     STOR_ADDR+1
  495/F1ED : 87                                 ADD     A
  496/F1EE : 87                                 ADD     A
  497/F1EF : 87                                 ADD     A
  498/F1F0 : 87                                 ADD     A
  499/F1F1 : 4F                                 MOV     C,A
  500/F1F2 : 3A E7 00                           LDA     STOR_ADDR
  501/F1F5 : E6 F0                              ANI     0F0H
  502/F1F7 : 0F                                 RRC
  503/F1F8 : 0F                                 RRC
  504/F1F9 : 0F                                 RRC
  505/F1FA : 0F                                 RRC
  506/F1FB : B1                                 ORA     C
  507/F1FC : 32 E8 00                           STA     STOR_ADDR+1
  508/F1FF :                                    
  509/F1FF :                                    ; Shift low byte left 4, add new digit
  510/F1FF : 3A E7 00                           LDA     STOR_ADDR
  511/F202 : 87                                 ADD     A
  512/F203 : 87                                 ADD     A
  513/F204 : 87                                 ADD     A
  514/F205 : 87                                 ADD     A
  515/F206 : 4F                                 MOV     C,A
  516/F207 : F1                                 POP     PSW                 ; Get new digit
  517/F208 : B1                                 ORA     C
  518/F209 : 32 E7 00                           STA     STOR_ADDR
  519/F20C :                                    
  520/F20C : 23                                 INX     H
  521/F20D : 04                                 INR     B
  522/F20E : C3 CD F1                           JMP     RHA_LOOP
  523/F211 :                                    
  524/F211 :                            RHA_DONE:
  525/F211 : 78                                 MOV     A,B
  526/F212 : B7                                 ORA     A
  527/F213 : 37                                 STC
  528/F214 : C8                                 RZ                          ; Return with carry if no digits
  529/F215 : B7                                 ORA     A                   ; Clear carry
  530/F216 : C9                                 RET
  531/F217 :                            
  532/F217 :                            ; ============================================
  533/F217 :                            ; COMMANDS
  534/F217 :                            ; ============================================
  535/F217 :                            
  536/F217 :                            ; CMD_COMPARE - Compare memory regions
  537/F217 :                            ; Syntax: C start end dest
  538/F217 :                            ; Compares [start,end] with [dest, dest+(end-start)]
  539/F217 :                            ; Shows differences as: addr1:val1 addr2:val2
  540/F217 :                            CMD_COMPARE:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 10 - 12/20/2025 21:20:05


  541/F217 : CD 59 F1                           CALL    SKIP_SPACES
  542/F21A : CD 61 F1                           CALL    READ_HEX_WORD
  543/F21D : DA 82 F2                           JC      CC_ERROR
  544/F220 : D5                                 PUSH    D                   ; Stack: start
  545/F221 :                                    
  546/F221 : CD 59 F1                           CALL    SKIP_SPACES
  547/F224 : CD 61 F1                           CALL    READ_HEX_WORD
  548/F227 : DA 81 F2                           JC      CC_POP1_ERROR
  549/F22A : D5                                 PUSH    D                   ; Stack: end, start
  550/F22B :                                    
  551/F22B : CD 59 F1                           CALL    SKIP_SPACES
  552/F22E : CD 61 F1                           CALL    READ_HEX_WORD
  553/F231 : DA 80 F2                           JC      CC_POP2_ERROR
  554/F234 :                                    ; DE = dest, stack: end, start
  555/F234 :                                    
  556/F234 :                                    ; Now all args parsed. Compute count and set up registers.
  557/F234 : C1                                 POP     B                   ; BC = end
  558/F235 : E1                                 POP     H                   ; HL = start
  559/F236 : D5                                 PUSH    D                   ; Save dest
  560/F237 :                                    
  561/F237 :                                    ; count = end - start + 1 = BC - HL + 1
  562/F237 : 79                                 MOV     A,C
  563/F238 : 95                                 SUB     L
  564/F239 : 5F                                 MOV     E,A
  565/F23A : 78                                 MOV     A,B
  566/F23B : 9C                                 SBB     H
  567/F23C : 57                                 MOV     D,A
  568/F23D : 13                                 INX     D                   ; DE = count
  569/F23E :                                    
  570/F23E : 42                                 MOV     B,D
  571/F23F : 4B                                 MOV     C,E                 ; BC = count
  572/F240 : D1                                 POP     D                   ; DE = dest
  573/F241 :                                    
  574/F241 :                                    ; Now: HL = start, DE = dest, BC = count
  575/F241 :                                    
  576/F241 :                            CC_LOOP:
  577/F241 : 7E                                 MOV     A,M                 ; A = first byte
  578/F242 : E5                                 PUSH    H                   ; Save first pointer
  579/F243 : C5                                 PUSH    B                   ; Save count
  580/F244 : EB                                 XCHG                        ; HL = dest
  581/F245 : BE                                 CMP     M                   ; Compare with second byte
  582/F246 : EB                                 XCHG                        ; HL = first, DE = dest
  583/F247 : CA 73 F2                           JZ      CC_NEXT
  584/F24A :                                    
  585/F24A :                                    ; Mismatch
  586/F24A :                                    ; HL=first ptr, DE=second ptr, stack: count, first ptr
  587/F24A : D5                                 PUSH    D                   ; Save second
  588/F24B : 46                                 MOV     B,M                 ; B = first byte (re-read)
  589/F24C : CD 04 F1                           CALL    PRINT_HEX_WORD      ; Print first addr
  590/F24F : 3E 3A                              MVI     A,':'
  591/F251 : CD A8 F0                           CALL    CONOUT
  592/F254 : 78                                 MOV     A,B
  593/F255 : CD E8 F0                           CALL    PRINT_HEX_BYTE
  594/F258 : CD E2 F0                           CALL    PRINT_SPACE
  595/F25B :                                    
  596/F25B : E1                                 POP     H                   ; HL = second pointer
  597/F25C : 46                                 MOV     B,M                 ; B = second byte
  598/F25D : E5                                 PUSH    H                   ; Save second again
  599/F25E : CD 04 F1                           CALL    PRINT_HEX_WORD
  600/F261 : 3E 3A                              MVI     A,':'
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 11 - 12/20/2025 21:20:05


  601/F263 : CD A8 F0                           CALL    CONOUT
  602/F266 : 78                                 MOV     A,B
  603/F267 : CD E8 F0                           CALL    PRINT_HEX_BYTE
  604/F26A : CD D7 F0                           CALL    PRINT_CRLF
  605/F26D :                                    
  606/F26D : D1                                 POP     D                   ; DE = second ptr
  607/F26E : C1                                 POP     B                   ; BC = count
  608/F26F : E1                                 POP     H                   ; HL = first ptr
  609/F270 : C3 75 F2                           JMP     CC_ADVANCE
  610/F273 :                                    
  611/F273 :                            CC_NEXT:
  612/F273 : C1                                 POP     B                   ; BC = count
  613/F274 : E1                                 POP     H                   ; HL = first ptr
  614/F275 :                                    
  615/F275 :                            CC_ADVANCE:
  616/F275 : 23                                 INX     H                   ; first++
  617/F276 : 13                                 INX     D                   ; second++
  618/F277 : 0B                                 DCX     B                   ; count--
  619/F278 : 78                                 MOV     A,B
  620/F279 : B1                                 ORA     C
  621/F27A : C2 41 F2                           JNZ     CC_LOOP
  622/F27D : C3 34 F0                           JMP     MAIN_LOOP
  623/F280 :                            
  624/F280 :                            CC_POP2_ERROR:
  625/F280 : D1                                 POP     D
  626/F281 :                            CC_POP1_ERROR:
  627/F281 : D1                                 POP     D
  628/F282 :                            CC_ERROR:
  629/F282 : 21 2A F9                           LXI     H,MSG_BAD_HEX
  630/F285 : CD CD F0                           CALL    PRINT_STRING
  631/F288 : C3 34 F0                           JMP     MAIN_LOOP
  632/F28B :                            
  633/F28B :                            ; CMD_DUMP - Dump memory
  634/F28B :                            ; Syntax: D [start] [end]
  635/F28B :                            ; If no args, continues from last address
  636/F28B :                            ; If one arg, dumps 128 bytes from start
  637/F28B :                            ; If two args, dumps from start to end
  638/F28B :                            CMD_DUMP:
  639/F28B : CD 59 F1                           CALL    SKIP_SPACES
  640/F28E : 7E                                 MOV     A,M
  641/F28F : B7                                 ORA     A                   ; End of line?
  642/F290 : CA AC F2                           JZ      CD_NO_ARGS
  643/F293 :                                    
  644/F293 :                                    ; Parse start address
  645/F293 : CD 61 F1                           CALL    READ_HEX_WORD
  646/F296 : DA D2 F2                           JC      CD_ERROR            ; No valid address
  647/F299 : D5                                 PUSH    D                   ; Save start address
  648/F29A :                                    
  649/F29A : CD 59 F1                           CALL    SKIP_SPACES
  650/F29D : 7E                                 MOV     A,M
  651/F29E : B7                                 ORA     A                   ; End of line?
  652/F29F : CA C0 F2                           JZ      CD_ONE_ARG
  653/F2A2 :                                    
  654/F2A2 :                                    ; Parse end address
  655/F2A2 : CD 61 F1                           CALL    READ_HEX_WORD
  656/F2A5 : DA D1 F2                           JC      CD_POP_ERROR        ; Invalid end address
  657/F2A8 :                                    
  658/F2A8 :                                    ; Two args: start in stack, end in DE
  659/F2A8 : E1                                 POP     H                   ; HL = start
  660/F2A9 : C3 DB F2                           JMP     CD_DUMP_RANGE
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 12 - 12/20/2025 21:20:05


  661/F2AC :                                    
  662/F2AC :                            CD_NO_ARGS:
  663/F2AC :                                    ; Continue from last address
  664/F2AC : 2A D2 00                           LHLD    LAST_DUMP_ADDR
  665/F2AF : 11 7F 00                           LXI     D,007FH             ; 128 bytes
  666/F2B2 : 19                                 DAD     D                   ; HL = start + 127 = end
  667/F2B3 : D2 B9 F2                           JNC     CD_NO_WRAP1         ; No overflow, HL is valid end
  668/F2B6 : 21 FF FF                           LXI     H,0FFFFH            ; Cap at FFFF
  669/F2B9 :                            CD_NO_WRAP1:
  670/F2B9 : EB                                 XCHG                        ; DE = end
  671/F2BA : 2A D2 00                           LHLD    LAST_DUMP_ADDR      ; HL = start
  672/F2BD : C3 DB F2                           JMP     CD_DUMP_RANGE
  673/F2C0 :                                    
  674/F2C0 :                            CD_ONE_ARG:
  675/F2C0 : E1                                 POP     H                   ; HL = start
  676/F2C1 : E5                                 PUSH    H                   ; Save start again
  677/F2C2 : 11 7F 00                           LXI     D,007FH
  678/F2C5 : 19                                 DAD     D                   ; HL = start + 127 = end
  679/F2C6 : D2 CC F2                           JNC     CD_NO_WRAP2         ; No overflow
  680/F2C9 : 21 FF FF                           LXI     H,0FFFFH            ; Cap at FFFF
  681/F2CC :                            CD_NO_WRAP2:
  682/F2CC : EB                                 XCHG                        ; DE = end
  683/F2CD : E1                                 POP     H                   ; HL = start
  684/F2CE : C3 DB F2                           JMP     CD_DUMP_RANGE
  685/F2D1 :                                    
  686/F2D1 :                            CD_POP_ERROR:
  687/F2D1 : D1                                 POP     D                   ; Clean up stack
  688/F2D2 :                            CD_ERROR:
  689/F2D2 : 21 18 F9                           LXI     H,MSG_BAD_ADDR
  690/F2D5 : CD CD F0                           CALL    PRINT_STRING
  691/F2D8 : C3 34 F0                           JMP     MAIN_LOOP
  692/F2DB :                            
  693/F2DB :                            ; CD_DUMP_RANGE - Dump memory from HL to DE
  694/F2DB :                            ; Input: HL = start address, DE = end address
  695/F2DB :                            CD_DUMP_RANGE:
  696/F2DB : D5                                 PUSH    D                   ; Save end address
  697/F2DC :                            
  698/F2DC :                            CD_LINE:
  699/F2DC :                                    ; Print address
  700/F2DC : CD 04 F1                           CALL    PRINT_HEX_WORD
  701/F2DF : 3E 3A                              MVI     A,':'
  702/F2E1 : CD A8 F0                           CALL    CONOUT
  703/F2E4 : CD E2 F0                           CALL    PRINT_SPACE
  704/F2E7 :                                    
  705/F2E7 :                                    ; Print 16 hex bytes
  706/F2E7 : E5                                 PUSH    H                   ; Save line start for ASCII
  707/F2E8 : 0E 10                              MVI     C,16                ; Byte counter
  708/F2EA :                                    
  709/F2EA :                            CD_HEX_BYTE:
  710/F2EA : 7E                                 MOV     A,M                 ; Get byte
  711/F2EB : CD E8 F0                           CALL    PRINT_HEX_BYTE
  712/F2EE : CD E2 F0                           CALL    PRINT_SPACE
  713/F2F1 :                                    
  714/F2F1 :                                    ; Extra space after 8th byte
  715/F2F1 : 79                                 MOV     A,C
  716/F2F2 : FE 09                              CPI     9
  717/F2F4 : C2 FA F2                           JNZ     CD_NO_GAP
  718/F2F7 : CD E2 F0                           CALL    PRINT_SPACE
  719/F2FA :                            CD_NO_GAP:
  720/F2FA :                                    
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 13 - 12/20/2025 21:20:05


  721/F2FA : 23                                 INX     H
  722/F2FB : 0D                                 DCR     C
  723/F2FC : C2 EA F2                           JNZ     CD_HEX_BYTE
  724/F2FF :                                    
  725/F2FF :                                    ; Print ASCII representation
  726/F2FF : CD E2 F0                           CALL    PRINT_SPACE
  727/F302 : E1                                 POP     H                   ; Restore line start
  728/F303 : 0E 10                              MVI     C,16
  729/F305 :                                    
  730/F305 :                            CD_ASCII:
  731/F305 : 7E                                 MOV     A,M
  732/F306 : FE 20                              CPI     SPACE               ; Printable? (>= 0x20)
  733/F308 : DA 10 F3                           JC      CD_DOT
  734/F30B : FE 7F                              CPI     07FH                ; Printable? (< 0x7F)
  735/F30D : DA 12 F3                           JC      CD_PRINT_CHAR
  736/F310 :                            CD_DOT:
  737/F310 : 3E 2E                              MVI     A,'.'
  738/F312 :                            CD_PRINT_CHAR:
  739/F312 : CD A8 F0                           CALL    CONOUT
  740/F315 : 23                                 INX     H
  741/F316 : 0D                                 DCR     C
  742/F317 : C2 05 F3                           JNZ     CD_ASCII
  743/F31A :                                    
  744/F31A : CD D7 F0                           CALL    PRINT_CRLF
  745/F31D :                                    
  746/F31D :                                    ; Check if done (HL > end address OR wrapped)
  747/F31D : D1                                 POP     D                   ; DE = end address
  748/F31E : D5                                 PUSH    D                   ; Keep it on stack
  749/F31F :                                    
  750/F31F :                                    ; Detect wrap-around: if H is 00 and D is FF, we wrapped past FFFF
  751/F31F : 7C                                 MOV     A,H
  752/F320 : B7                                 ORA     A
  753/F321 : C2 2A F3                           JNZ     CD_NO_WRAP3         ; H != 0, no wrap
  754/F324 : 7A                                 MOV     A,D
  755/F325 : FE F0                              CPI     0F0H                ; Were we dumping high memory?
  756/F327 : D2 3A F3                           JNC     CD_DONE             ; Yes and H=0, we wrapped, done
  757/F32A :                                    
  758/F32A :                            CD_NO_WRAP3:
  759/F32A :                                    ; Compare HL to DE: if HL > DE, we're done
  760/F32A : 7A                                 MOV     A,D
  761/F32B : BC                                 CMP     H
  762/F32C : DA 3A F3                           JC      CD_DONE             ; D < H, done
  763/F32F : C2 DC F2                           JNZ     CD_LINE             ; D > H, continue
  764/F332 : 7B                                 MOV     A,E
  765/F333 : BD                                 CMP     L
  766/F334 : DA 3A F3                           JC      CD_DONE             ; E < L, done (D == H)
  767/F337 : C3 DC F2                           JMP     CD_LINE             ; E >= L, continue
  768/F33A :                                    
  769/F33A :                            CD_DONE:
  770/F33A : D1                                 POP     D                   ; Clean up stack
  771/F33B : 22 D2 00                           SHLD    LAST_DUMP_ADDR      ; Save for next time
  772/F33E : C3 34 F0                           JMP     MAIN_LOOP
  773/F341 :                            
  774/F341 :                            ; CMD_EXAMINE - Examine/modify memory
  775/F341 :                            ; Syntax: E [addr]
  776/F341 :                            ; Shows "ADDR: XX-" and waits for input
  777/F341 :                            ; Enter hex to modify, CR to advance, period to exit
  778/F341 :                            CMD_EXAMINE:
  779/F341 : CD 59 F1                           CALL    SKIP_SPACES
  780/F344 : 7E                                 MOV     A,M
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 14 - 12/20/2025 21:20:05


  781/F345 : B7                                 ORA     A                   ; Any address given?
  782/F346 : CA 53 F3                           JZ      CE_USE_LAST
  783/F349 :                                    
  784/F349 : CD 61 F1                           CALL    READ_HEX_WORD       ; Parse address into DE
  785/F34C : DA 89 F3                           JC      CE_ERROR            ; Invalid hex
  786/F34F : EB                                 XCHG                        ; HL = address to examine
  787/F350 : C3 56 F3                           JMP     CE_LOOP
  788/F353 :                                    
  789/F353 :                            CE_USE_LAST:
  790/F353 : 2A D4 00                           LHLD    LAST_EXAM_ADDR
  791/F356 :                                    
  792/F356 :                            CE_LOOP:
  793/F356 : CD 04 F1                           CALL    PRINT_HEX_WORD      ; Print address
  794/F359 : 3E 3A                              MVI     A,':'
  795/F35B : CD A8 F0                           CALL    CONOUT
  796/F35E : 3E 20                              MVI     A,' '
  797/F360 : CD A8 F0                           CALL    CONOUT
  798/F363 : 7E                                 MOV     A,M                 ; Get current byte
  799/F364 : CD E8 F0                           CALL    PRINT_HEX_BYTE
  800/F367 : 3E 2D                              MVI     A,'-'
  801/F369 : CD A8 F0                           CALL    CONOUT
  802/F36C :                                    
  803/F36C : CD 37 F5                           CALL    READ_EXAM_BYTE      ; Get user input
  804/F36F : DA 80 F3                           JC      CE_EXIT             ; Carry = exit requested
  805/F372 : 78                                 MOV     A,B                 ; Check digit count
  806/F373 : B7                                 ORA     A
  807/F374 : CA 79 F3                           JZ      CE_NEXT             ; No digits = don't modify
  808/F377 : 79                                 MOV     A,C                 ; Get the value from C
  809/F378 : 77                                 MOV     M,A                 ; Store it
  810/F379 :                                    
  811/F379 :                            CE_NEXT:
  812/F379 : 23                                 INX     H
  813/F37A : CD D7 F0                           CALL    PRINT_CRLF
  814/F37D : C3 56 F3                           JMP     CE_LOOP
  815/F380 :                                    
  816/F380 :                            CE_EXIT:
  817/F380 : 22 D4 00                           SHLD    LAST_EXAM_ADDR
  818/F383 : CD D7 F0                           CALL    PRINT_CRLF
  819/F386 : C3 34 F0                           JMP     MAIN_LOOP
  820/F389 :                                    
  821/F389 :                            CE_ERROR:
  822/F389 : 21 18 F9                           LXI     H,MSG_BAD_ADDR
  823/F38C : CD CD F0                           CALL    PRINT_STRING
  824/F38F : C3 34 F0                           JMP     MAIN_LOOP
  825/F392 :                            
  826/F392 :                            ; CMD_FILL - Fill memory with value
  827/F392 :                            ; Syntax: F start end value
  828/F392 :                            CMD_FILL:
  829/F392 : CD 59 F1                           CALL    SKIP_SPACES
  830/F395 : CD 61 F1                           CALL    READ_HEX_WORD
  831/F398 : DA C7 F3                           JC      CF_ERROR
  832/F39B : D5                                 PUSH    D                   ; Save start
  833/F39C :                                    
  834/F39C : CD 59 F1                           CALL    SKIP_SPACES
  835/F39F : CD 61 F1                           CALL    READ_HEX_WORD
  836/F3A2 : DA C6 F3                           JC      CF_POP1_ERROR
  837/F3A5 : D5                                 PUSH    D                   ; Save end
  838/F3A6 :                                    
  839/F3A6 : CD 59 F1                           CALL    SKIP_SPACES
  840/F3A9 : CD 61 F1                           CALL    READ_HEX_WORD
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 15 - 12/20/2025 21:20:05


  841/F3AC : DA C5 F3                           JC      CF_POP2_ERROR
  842/F3AF :                                    
  843/F3AF :                                    ; E = value, stack: end, start
  844/F3AF : C1                                 POP     B                   ; BC = end
  845/F3B0 : E1                                 POP     H                   ; HL = start
  846/F3B1 :                                    
  847/F3B1 :                            CF_LOOP:
  848/F3B1 : 73                                 MOV     M,E
  849/F3B2 : 7C                                 MOV     A,H
  850/F3B3 : B8                                 CMP     B
  851/F3B4 : C2 BC F3                           JNZ     CF_NEXT
  852/F3B7 : 7D                                 MOV     A,L
  853/F3B8 : B9                                 CMP     C
  854/F3B9 : CA C2 F3                           JZ      CF_DONE
  855/F3BC :                            CF_NEXT:
  856/F3BC : 23                                 INX     H
  857/F3BD : 7C                                 MOV     A,H
  858/F3BE : B5                                 ORA     L                   ; Wrapped to 0000?
  859/F3BF : C2 B1 F3                           JNZ     CF_LOOP
  860/F3C2 :                                    ; Wrapped - done
  861/F3C2 :                            CF_DONE:
  862/F3C2 : C3 34 F0                           JMP     MAIN_LOOP
  863/F3C5 :                            
  864/F3C5 :                            CF_POP2_ERROR:
  865/F3C5 : D1                                 POP     D
  866/F3C6 :                            CF_POP1_ERROR:
  867/F3C6 : D1                                 POP     D
  868/F3C7 :                            CF_ERROR:
  869/F3C7 : 21 2A F9                           LXI     H,MSG_BAD_HEX
  870/F3CA : CD CD F0                           CALL    PRINT_STRING
  871/F3CD : C3 34 F0                           JMP     MAIN_LOOP
  872/F3D0 :                            
  873/F3D0 :                            ; CMD_GO - Execute at address
  874/F3D0 :                            ; Syntax: G [addr]
  875/F3D0 :                            ; If no address, defaults to 0100H (TPA)
  876/F3D0 :                            CMD_GO:
  877/F3D0 : CD 59 F1                           CALL    SKIP_SPACES
  878/F3D3 : CD 61 F1                           CALL    READ_HEX_WORD       ; Parse address into DE
  879/F3D6 : DA DB F3                           JC      CG_DEFAULT          ; No address given
  880/F3D9 : EB                                 XCHG                        ; HL = parsed address
  881/F3DA : E9                                 PCHL                        ; Jump and never return
  882/F3DB :                                    
  883/F3DB :                            CG_DEFAULT:
  884/F3DB : 21 00 01                           LXI     H,0100H             ; Default to TPA
  885/F3DE : E9                                 PCHL
  886/F3DF :                            
  887/F3DF :                            ; CMD_HEX_MATH - Hex addition and subtraction
  888/F3DF :                            ; Syntax: H num1 num2
  889/F3DF :                            ; Output: sum difference
  890/F3DF :                            CMD_HEX_MATH:
  891/F3DF : CD 59 F1                           CALL    SKIP_SPACES
  892/F3E2 : CD 61 F1                           CALL    READ_HEX_WORD       ; First number -> DE
  893/F3E5 : DA 0E F4                           JC      CH_ERROR
  894/F3E8 : D5                                 PUSH    D                   ; Save first number
  895/F3E9 :                                    
  896/F3E9 : CD 59 F1                           CALL    SKIP_SPACES
  897/F3EC : CD 61 F1                           CALL    READ_HEX_WORD       ; Second number -> DE
  898/F3EF : DA 0D F4                           JC      CH_POP_ERROR
  899/F3F2 :                                    
  900/F3F2 :                                    ; DE = second, stack = first
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 16 - 12/20/2025 21:20:05


  901/F3F2 : E1                                 POP     H                   ; HL = first
  902/F3F3 : E5                                 PUSH    H                   ; Save first again
  903/F3F4 : D5                                 PUSH    D                   ; Save second
  904/F3F5 :                                    
  905/F3F5 : 19                                 DAD     D                   ; HL = first + second
  906/F3F6 : CD 04 F1                           CALL    PRINT_HEX_WORD
  907/F3F9 : CD E2 F0                           CALL    PRINT_SPACE
  908/F3FC :                                    
  909/F3FC : D1                                 POP     D                   ; DE = second
  910/F3FD : E1                                 POP     H                   ; HL = first
  911/F3FE :                                    
  912/F3FE :                                    ; HL = first - second
  913/F3FE : 7D                                 MOV     A,L
  914/F3FF : 93                                 SUB     E
  915/F400 : 6F                                 MOV     L,A
  916/F401 : 7C                                 MOV     A,H
  917/F402 : 9A                                 SBB     D
  918/F403 : 67                                 MOV     H,A
  919/F404 :                                    
  920/F404 : CD 04 F1                           CALL    PRINT_HEX_WORD
  921/F407 : CD D7 F0                           CALL    PRINT_CRLF
  922/F40A : C3 34 F0                           JMP     MAIN_LOOP
  923/F40D :                            
  924/F40D :                            CH_POP_ERROR:
  925/F40D : D1                                 POP     D                   ; Clean stack
  926/F40E :                            CH_ERROR:
  927/F40E : 21 2A F9                           LXI     H,MSG_BAD_HEX
  928/F411 : CD CD F0                           CALL    PRINT_STRING
  929/F414 : C3 34 F0                           JMP     MAIN_LOOP
  930/F417 :                            
  931/F417 :                            ; CMD_INPUT - Read from I/O port
  932/F417 :                            ; Syntax: I port
  933/F417 :                            CMD_INPUT:
  934/F417 : CD 59 F1                           CALL    SKIP_SPACES
  935/F41A : CD 61 F1                           CALL    READ_HEX_WORD       ; Port -> DE (use E only)
  936/F41D : DA 30 F4                           JC      CI_ERROR
  937/F420 :                                    
  938/F420 : 7B                                 MOV     A,E                 ; Get port number (0-255)
  939/F421 : 32 D7 00                           STA     IO_IN_STUB+1        ; Patch the IN instruction
  940/F424 : CD D6 00                           CALL    IO_IN_STUB          ; Execute: IN port / RET
  941/F427 :                                    
  942/F427 : CD E8 F0                           CALL    PRINT_HEX_BYTE      ; Print result
  943/F42A : CD D7 F0                           CALL    PRINT_CRLF
  944/F42D : C3 34 F0                           JMP     MAIN_LOOP
  945/F430 :                            
  946/F430 :                            CI_ERROR:
  947/F430 : 21 3E F9                           LXI     H,MSG_BAD_PORT
  948/F433 : CD CD F0                           CALL    PRINT_STRING
  949/F436 : C3 34 F0                           JMP     MAIN_LOOP
  950/F439 :                            
  951/F439 :                            ; CMD_MOVE - Move memory block (forward copy)
  952/F439 :                            ; Syntax: M source dest count
  953/F439 :                            ; Note: Overlapping regions where dest > source produce undefined results
  954/F439 :                            CMD_MOVE:
  955/F439 : CD 59 F1                           CALL    SKIP_SPACES
  956/F43C : CD 61 F1                           CALL    READ_HEX_WORD
  957/F43F : DA 75 F4                           JC      CM_ERROR
  958/F442 : D5                                 PUSH    D                   ; Save source
  959/F443 :                                    
  960/F443 : CD 59 F1                           CALL    SKIP_SPACES
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 17 - 12/20/2025 21:20:05


  961/F446 : CD 61 F1                           CALL    READ_HEX_WORD
  962/F449 : DA 74 F4                           JC      CM_POP1_ERROR
  963/F44C : D5                                 PUSH    D                   ; Save dest
  964/F44D :                                    
  965/F44D : CD 59 F1                           CALL    SKIP_SPACES
  966/F450 : CD 61 F1                           CALL    READ_HEX_WORD
  967/F453 : DA 73 F4                           JC      CM_POP2_ERROR
  968/F456 :                                    
  969/F456 :                                    ; DE = count, stack: dest, source
  970/F456 : 7A                                 MOV     A,D
  971/F457 : B3                                 ORA     E
  972/F458 : CA 6E F4                           JZ      CM_DONE_QUICK       ; Zero count
  973/F45B :                                    
  974/F45B : 42                                 MOV     B,D
  975/F45C : 4B                                 MOV     C,E                 ; BC = count
  976/F45D : D1                                 POP     D                   ; DE = dest
  977/F45E : E1                                 POP     H                   ; HL = source
  978/F45F :                                    
  979/F45F :                            CM_LOOP:
  980/F45F : 7E                                 MOV     A,M                 ; Get source byte
  981/F460 : EB                                 XCHG
  982/F461 : 77                                 MOV     M,A                 ; Store to dest
  983/F462 : EB                                 XCHG
  984/F463 : 23                                 INX     H
  985/F464 : 13                                 INX     D
  986/F465 : 0B                                 DCX     B
  987/F466 : 78                                 MOV     A,B
  988/F467 : B1                                 ORA     C
  989/F468 : C2 5F F4                           JNZ     CM_LOOP
  990/F46B : C3 34 F0                           JMP     MAIN_LOOP
  991/F46E :                            
  992/F46E :                            CM_DONE_QUICK:
  993/F46E : D1                                 POP     D
  994/F46F : D1                                 POP     D
  995/F470 : C3 34 F0                           JMP     MAIN_LOOP
  996/F473 :                            
  997/F473 :                            CM_POP2_ERROR:
  998/F473 : D1                                 POP     D
  999/F474 :                            CM_POP1_ERROR:
 1000/F474 : D1                                 POP     D
 1001/F475 :                            CM_ERROR:
 1002/F475 : 21 2A F9                           LXI     H,MSG_BAD_HEX
 1003/F478 : CD CD F0                           CALL    PRINT_STRING
 1004/F47B : C3 34 F0                           JMP     MAIN_LOOP
 1005/F47E :                            
 1006/F47E :                            ; CMD_OUTPUT - Write to I/O port
 1007/F47E :                            ; Syntax: O port value
 1008/F47E :                            CMD_OUTPUT:
 1009/F47E : CD 59 F1                           CALL    SKIP_SPACES
 1010/F481 : CD 61 F1                           CALL    READ_HEX_WORD       ; Port -> DE
 1011/F484 : DA 9B F4                           JC      CO_ERROR
 1012/F487 : 7B                                 MOV     A,E
 1013/F488 : 32 DA 00                           STA     IO_OUT_STUB+1       ; Patch port
 1014/F48B :                                    
 1015/F48B : CD 59 F1                           CALL    SKIP_SPACES
 1016/F48E : CD 61 F1                           CALL    READ_HEX_WORD       ; Value -> DE
 1017/F491 : DA 9B F4                           JC      CO_ERROR
 1018/F494 :                                    
 1019/F494 : 7B                                 MOV     A,E                 ; Value to output
 1020/F495 : CD D9 00                           CALL    IO_OUT_STUB         ; Execute: OUT port / RET
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 18 - 12/20/2025 21:20:05


 1021/F498 : C3 34 F0                           JMP     MAIN_LOOP
 1022/F49B :                            
 1023/F49B :                            CO_ERROR:
 1024/F49B : 21 3E F9                           LXI     H,MSG_BAD_PORT
 1025/F49E : CD CD F0                           CALL    PRINT_STRING
 1026/F4A1 : C3 34 F0                           JMP     MAIN_LOOP
 1027/F4A4 :                            
 1028/F4A4 :                            ; CMD_SEARCH - Search memory for byte pattern
 1029/F4A4 :                            ; Syntax: S start end b1 [b2 ... b8]
 1030/F4A4 :                            CMD_SEARCH:
 1031/F4A4 :                                    ; Parse start address
 1032/F4A4 : CD 59 F1                           CALL    SKIP_SPACES
 1033/F4A7 : CD 61 F1                           CALL    READ_HEX_WORD
 1034/F4AA : DA 25 F5                           JC      CS_ERROR
 1035/F4AD : D5                                 PUSH    D                   ; Save start on stack
 1036/F4AE :                                    
 1037/F4AE :                                    ; Parse end address
 1038/F4AE : CD 59 F1                           CALL    SKIP_SPACES
 1039/F4B1 : CD 61 F1                           CALL    READ_HEX_WORD
 1040/F4B4 : DA 24 F5                           JC      CS_POP1_ERROR
 1041/F4B7 : EB                                 XCHG
 1042/F4B8 : 22 E5 00                           SHLD    SEARCH_END          ; Store end address
 1043/F4BB : EB                                 XCHG
 1044/F4BC :                                    
 1045/F4BC :                                    ; Parse pattern bytes (1-8)
 1046/F4BC : 11 DC 00                           LXI     D,SEARCH_PATTERN    ; DE = pattern buffer
 1047/F4BF : 01 00 00                           LXI     B,0                 ; B = byte count
 1048/F4C2 :                                    
 1049/F4C2 :                            CS_PARSE_LOOP:
 1050/F4C2 : CD 59 F1                           CALL    SKIP_SPACES
 1051/F4C5 : 7E                                 MOV     A,M
 1052/F4C6 : B7                                 ORA     A                   ; End of line?
 1053/F4C7 : CA DE F4                           JZ      CS_PARSE_DONE
 1054/F4CA :                                    
 1055/F4CA : C5                                 PUSH    B                   ; Save count
 1056/F4CB : D5                                 PUSH    D                   ; Save pattern pointer
 1057/F4CC : CD 61 F1                           CALL    READ_HEX_WORD       ; Value in DE (use E only)
 1058/F4CF : 7B                                 MOV     A,E                 ; Get the byte
 1059/F4D0 : D1                                 POP     D                   ; Restore pattern pointer
 1060/F4D1 : C1                                 POP     B                   ; Restore count
 1061/F4D2 : DA DE F4                           JC      CS_PARSE_DONE       ; No more valid hex
 1062/F4D5 :                                    
 1063/F4D5 : 12                                 STAX    D                   ; Store byte in pattern
 1064/F4D6 : 13                                 INX     D
 1065/F4D7 : 04                                 INR     B
 1066/F4D8 :                                    
 1067/F4D8 : 78                                 MOV     A,B
 1068/F4D9 : FE 08                              CPI     8                   ; Max 8 bytes
 1069/F4DB : DA C2 F4                           JC      CS_PARSE_LOOP
 1070/F4DE :                                    
 1071/F4DE :                            CS_PARSE_DONE:
 1072/F4DE : 78                                 MOV     A,B
 1073/F4DF : B7                                 ORA     A                   ; Zero bytes?
 1074/F4E0 : CA 24 F5                           JZ      CS_POP1_ERROR       ; Error - need at least 1
 1075/F4E3 :                                    
 1076/F4E3 : 32 E4 00                           STA     SEARCH_LENGTH       ; Save pattern length
 1077/F4E6 : E1                                 POP     H                   ; HL = start address
 1078/F4E7 :                                    
 1079/F4E7 :                                    ; Search loop
 1080/F4E7 :                                    ; Register usage: HL = current search address
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 19 - 12/20/2025 21:20:05


 1081/F4E7 :                            CS_SEARCH_LOOP:
 1082/F4E7 :                                    ; Compare pattern at current address
 1083/F4E7 : E5                                 PUSH    H                   ; Save current address
 1084/F4E8 : 11 DC 00                           LXI     D,SEARCH_PATTERN    ; DE = pattern
 1085/F4EB : 3A E4 00                           LDA     SEARCH_LENGTH
 1086/F4EE : 47                                 MOV     B,A                 ; B = length counter
 1087/F4EF :                                    
 1088/F4EF :                            CS_COMPARE:
 1089/F4EF : 1A                                 LDAX    D                   ; A = pattern byte
 1090/F4F0 : BE                                 CMP     M                   ; Compare with memory
 1091/F4F1 : C2 02 F5                           JNZ     CS_NO_MATCH
 1092/F4F4 : 23                                 INX     H
 1093/F4F5 : 13                                 INX     D
 1094/F4F6 : 05                                 DCR     B
 1095/F4F7 : C2 EF F4                           JNZ     CS_COMPARE
 1096/F4FA :                                    
 1097/F4FA :                                    ; Match found - print address
 1098/F4FA : E1                                 POP     H                   ; Restore search address
 1099/F4FB : E5                                 PUSH    H                   ; Keep it on stack for advance
 1100/F4FC : CD 04 F1                           CALL    PRINT_HEX_WORD
 1101/F4FF : CD D7 F0                           CALL    PRINT_CRLF
 1102/F502 :                                    
 1103/F502 :                            CS_NO_MATCH:
 1104/F502 : E1                                 POP     H                   ; HL = current search position
 1105/F503 :                                    
 1106/F503 :                                    ; Put current in DE, end in HL for comparison
 1107/F503 : EB                                 XCHG                        ; DE = current
 1108/F504 : 2A E5 00                           LHLD    SEARCH_END          ; HL = end
 1109/F507 :                                    
 1110/F507 :                                    ; Check: current > end?
 1111/F507 : 7C                                 MOV     A,H
 1112/F508 : BA                                 CMP     D
 1113/F509 : DA 21 F5                           JC      CS_DONE             ; end.H < current.H, done
 1114/F50C : C2 14 F5                           JNZ     CS_ADVANCE          ; end.H > current.H, continue
 1115/F50F : 7D                                 MOV     A,L
 1116/F510 : BB                                 CMP     E
 1117/F511 : DA 21 F5                           JC      CS_DONE             ; end.L < current.L, done
 1118/F514 :                                    
 1119/F514 :                            CS_ADVANCE:
 1120/F514 : EB                                 XCHG                        ; HL = current, DE = end (D = end.H)
 1121/F515 : 23                                 INX     H                   ; Next address
 1122/F516 :                                    
 1123/F516 :                                    ; Wrap check: H==0 and end.H >= F0 means we wrapped past FFFF
 1124/F516 : 7C                                 MOV     A,H
 1125/F517 : B7                                 ORA     A
 1126/F518 : C2 E7 F4                           JNZ     CS_SEARCH_LOOP      ; H != 0, no wrap
 1127/F51B : 7A                                 MOV     A,D                 ; D still has end.H from XCHG
 1128/F51C : FE F0                              CPI     0F0H
 1129/F51E : DA E7 F4                           JC      CS_SEARCH_LOOP      ; end < F000, no wrap concern
 1130/F521 :                                    ; Fell through = wrapped past FFFF
 1131/F521 :                                    
 1132/F521 :                            CS_DONE:
 1133/F521 : C3 34 F0                           JMP     MAIN_LOOP
 1134/F524 :                            
 1135/F524 :                            CS_POP1_ERROR:
 1136/F524 : D1                                 POP     D
 1137/F525 :                            CS_ERROR:
 1138/F525 : 21 2A F9                           LXI     H,MSG_BAD_HEX
 1139/F528 : CD CD F0                           CALL    PRINT_STRING
 1140/F52B : C3 34 F0                           JMP     MAIN_LOOP
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 20 - 12/20/2025 21:20:05


 1141/F52E :                            
 1142/F52E :                            ; CMD_HELP - Show help
 1143/F52E :                            ; Syntax: ?
 1144/F52E :                            CMD_HELP:
 1145/F52E : 21 F3 F6                           LXI     H,MSG_HELP
 1146/F531 : CD CD F0                           CALL    PRINT_STRING
 1147/F534 : C3 34 F0                           JMP     MAIN_LOOP
 1148/F537 :                            
 1149/F537 :                            ; ============================================
 1150/F537 :                            ; HELPER ROUTINES
 1151/F537 :                            ; ============================================
 1152/F537 :                            
 1153/F537 :                            ; READ_EXAM_BYTE - Read byte value for examine command
 1154/F537 :                            ; Reads up to 2 hex digits from console
 1155/F537 :                            ; Output: Carry set = exit (period pressed)
 1156/F537 :                            ;         Carry clear: B = digit count, C = value
 1157/F537 :                            ;         (caller checks B: 0 = no modification, >0 = store C)
 1158/F537 :                            ; Trashes: A, B, C, D, flags
 1159/F537 :                            READ_EXAM_BYTE:
 1160/F537 : 06 00                              MVI     B,0                 ; Digit count
 1161/F539 : 0E 00                              MVI     C,0                 ; Accumulated value
 1162/F53B :                                    
 1163/F53B :                            REB_LOOP:
 1164/F53B : CD B4 F0                           CALL    CONIN
 1165/F53E : 57                                 MOV     D,A                 ; Save original for echo
 1166/F53F :                                    
 1167/F53F : FE 2E                              CPI     '.'                 ; Exit?
 1168/F541 : CA 70 F5                           JZ      REB_EXIT
 1169/F544 : FE 0D                              CPI     CR                  ; Enter?
 1170/F546 : CA 6E F5                           JZ      REB_DONE
 1171/F549 : FE 0A                              CPI     LF                  ; Also LF
 1172/F54B : CA 6E F5                           JZ      REB_DONE
 1173/F54E : FE 08                              CPI     BS                  ; Backspace?
 1174/F550 : CA 72 F5                           JZ      REB_BS
 1175/F553 :                                    
 1176/F553 : CD 94 F1                           CALL    TO_HEX_DIGIT        ; Convert to 0-15
 1177/F556 : DA 3B F5                           JC      REB_LOOP            ; Not hex, ignore
 1178/F559 :                                    
 1179/F559 :                                    ; Valid hex digit in A
 1180/F559 : F5                                 PUSH    PSW
 1181/F55A : 79                                 MOV     A,C
 1182/F55B : 87                                 ADD     A                   ; Shift left 4
 1183/F55C : 87                                 ADD     A
 1184/F55D : 87                                 ADD     A
 1185/F55E : 87                                 ADD     A
 1186/F55F : 4F                                 MOV     C,A
 1187/F560 : F1                                 POP     PSW
 1188/F561 : B1                                 ORA     C                   ; Add new digit
 1189/F562 : 4F                                 MOV     C,A
 1190/F563 :                                    
 1191/F563 : 04                                 INR     B                   ; Count digit
 1192/F564 : 7A                                 MOV     A,D                 ; Echo original char
 1193/F565 : CD A8 F0                           CALL    CONOUT
 1194/F568 :                                    
 1195/F568 : 78                                 MOV     A,B
 1196/F569 : FE 02                              CPI     2                   ; Two digits entered?
 1197/F56B : DA 3B F5                           JC      REB_LOOP            ; No, keep reading
 1198/F56E :                                    ; 2 digits entered - just return, let CR/LF be next empty input
 1199/F56E :                                    
 1200/F56E :                            REB_DONE:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 21 - 12/20/2025 21:20:05


 1201/F56E :                                    ; Carry clear, B = digit count, C = value
 1202/F56E : B7                                 ORA     A                   ; Clear carry
 1203/F56F : C9                                 RET
 1204/F570 :                                    
 1205/F570 :                            REB_EXIT:
 1206/F570 : 37                                 STC                         ; Set carry = exit
 1207/F571 : C9                                 RET
 1208/F572 :                                    
 1209/F572 :                            REB_BS:
 1210/F572 : 78                                 MOV     A,B
 1211/F573 : B7                                 ORA     A
 1212/F574 : CA 3B F5                           JZ      REB_LOOP            ; Nothing to delete
 1213/F577 :                                    
 1214/F577 : 05                                 DCR     B
 1215/F578 : 79                                 MOV     A,C                 ; Undo the shift
 1216/F579 : 0F                                 RRC
 1217/F57A : 0F                                 RRC
 1218/F57B : 0F                                 RRC
 1219/F57C : 0F                                 RRC
 1220/F57D : E6 0F                              ANI     0FH
 1221/F57F : 4F                                 MOV     C,A
 1222/F580 :                                    
 1223/F580 : 3E 08                              MVI     A,BS                ; Erase on screen
 1224/F582 : CD A8 F0                           CALL    CONOUT
 1225/F585 : 3E 20                              MVI     A,' '
 1226/F587 : CD A8 F0                           CALL    CONOUT
 1227/F58A : 3E 08                              MVI     A,BS
 1228/F58C : CD A8 F0                           CALL    CONOUT
 1229/F58F : C3 3B F5                           JMP     REB_LOOP
 1230/F592 :                            
 1231/F592 :                            ; ============================================
 1232/F592 :                            ; STORAGE COMMANDS
 1233/F592 :                            ; ============================================
 1234/F592 :                            
 1235/F592 :                            ; CMD_MOUNT - Mount storage file
 1236/F592 :                            ; Syntax: X [filename]
 1237/F592 :                            ;   X TEST.BIN  - Mount file
 1238/F592 :                            ;   X           - Show mount status
 1239/F592 :                            CMD_MOUNT:
 1240/F592 : CD 59 F1                           CALL    SKIP_SPACES
 1241/F595 : 7E                                 MOV     A,M
 1242/F596 : B7                                 ORA     A
 1243/F597 : CA D4 F5                           JZ      CM_QUERY            ; No filename - query status
 1244/F59A :                                    
 1245/F59A :                                    ; Send filename characters to mount service
 1246/F59A :                            CM_SEND:
 1247/F59A : 7E                                 MOV     A,M
 1248/F59B : B7                                 ORA     A                   ; End of string?
 1249/F59C : CA AA F5                           JZ      CM_DO_MOUNT
 1250/F59F : FE 20                              CPI     ' '                 ; Space ends filename
 1251/F5A1 : CA AA F5                           JZ      CM_DO_MOUNT
 1252/F5A4 : D3 0D                              OUT     MOUNT_FILENAME
 1253/F5A6 : 23                                 INX     H
 1254/F5A7 : C3 9A F5                           JMP     CM_SEND
 1255/F5AA :                                    
 1256/F5AA :                            CM_DO_MOUNT:
 1257/F5AA : 3E 01                              MVI     A,01H               ; Mount command
 1258/F5AC : D3 0E                              OUT     MOUNT_CTRL
 1259/F5AE :                                    
 1260/F5AE :                                    ; Check result
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 22 - 12/20/2025 21:20:05


 1261/F5AE : DB 0F                              IN      MOUNT_STATUS
 1262/F5B0 : B7                                 ORA     A
 1263/F5B1 : CA CB F5                           JZ      CM_OK
 1264/F5B4 : FE 01                              CPI     01H
 1265/F5B6 : CA C2 F5                           JZ      CM_NOT_FOUND
 1266/F5B9 :                                    ; else invalid
 1267/F5B9 : 21 6E F9                           LXI     H,MSG_INVALID_FILE
 1268/F5BC : CD CD F0                           CALL    PRINT_STRING
 1269/F5BF : C3 34 F0                           JMP     MAIN_LOOP
 1270/F5C2 :                                    
 1271/F5C2 :                            CM_NOT_FOUND:
 1272/F5C2 : 21 5D F9                           LXI     H,MSG_NOT_FOUND
 1273/F5C5 : CD CD F0                           CALL    PRINT_STRING
 1274/F5C8 : C3 34 F0                           JMP     MAIN_LOOP
 1275/F5CB :                                    
 1276/F5CB :                            CM_OK:
 1277/F5CB : 21 53 F9                           LXI     H,MSG_MOUNTED
 1278/F5CE : CD CD F0                           CALL    PRINT_STRING
 1279/F5D1 : C3 34 F0                           JMP     MAIN_LOOP
 1280/F5D4 :                                    
 1281/F5D4 :                            CM_QUERY:
 1282/F5D4 : 3E 03                              MVI     A,03H               ; Query command
 1283/F5D6 : D3 0E                              OUT     MOUNT_CTRL
 1284/F5D8 : DB 0F                              IN      MOUNT_STATUS
 1285/F5DA : B7                                 ORA     A
 1286/F5DB : C2 E7 F5                           JNZ     CM_NO_MOUNT
 1287/F5DE : 21 53 F9                           LXI     H,MSG_MOUNTED
 1288/F5E1 : CD CD F0                           CALL    PRINT_STRING
 1289/F5E4 : C3 34 F0                           JMP     MAIN_LOOP
 1290/F5E7 :                            CM_NO_MOUNT:
 1291/F5E7 : 21 81 F9                           LXI     H,MSG_NO_STORAGE
 1292/F5EA : CD CD F0                           CALL    PRINT_STRING
 1293/F5ED : C3 34 F0                           JMP     MAIN_LOOP
 1294/F5F0 :                            
 1295/F5F0 :                            
 1296/F5F0 :                            ; CMD_LOAD - Load from storage to memory
 1297/F5F0 :                            ; Syntax: L storage_addr mem_addr [count]
 1298/F5F0 :                            ; Storage addr is 24-bit (up to 6 hex digits), count defaults to 256
 1299/F5F0 :                            CMD_LOAD:
 1300/F5F0 :                                    ; Check mounted
 1301/F5F0 : DB 0C                              IN      STORAGE_CTRL
 1302/F5F2 : E6 01                              ANI     01H
 1303/F5F4 : CA 40 F6                           JZ      CL_NOT_MOUNTED
 1304/F5F7 :                                    
 1305/F5F7 :                                    ; Parse 24-bit storage address
 1306/F5F7 : CD BE F1                           CALL    READ_HEX_ADDR24
 1307/F5FA : DA 49 F6                           JC      CL_ERROR
 1308/F5FD :                                    
 1309/F5FD :                                    ; Set storage address from STOR_ADDR
 1310/F5FD : 3A E7 00                           LDA     STOR_ADDR
 1311/F600 : D3 08                              OUT     STORAGE_ADDR_LO
 1312/F602 : 3A E8 00                           LDA     STOR_ADDR+1
 1313/F605 : D3 09                              OUT     STORAGE_ADDR_MID
 1314/F607 : 3A E9 00                           LDA     STOR_ADDR+2
 1315/F60A : D3 0A                              OUT     STORAGE_ADDR_HI
 1316/F60C :                                    
 1317/F60C :                                    ; Parse memory address
 1318/F60C : CD 59 F1                           CALL    SKIP_SPACES
 1319/F60F : CD 61 F1                           CALL    READ_HEX_WORD
 1320/F612 : DA 49 F6                           JC      CL_ERROR
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 23 - 12/20/2025 21:20:05


 1321/F615 : D5                                 PUSH    D                   ; Save mem addr
 1322/F616 :                                    
 1323/F616 :                                    ; Parse count (optional, default 256)
 1324/F616 : CD 59 F1                           CALL    SKIP_SPACES
 1325/F619 : 7E                                 MOV     A,M
 1326/F61A : B7                                 ORA     A
 1327/F61B : CA 29 F6                           JZ      CL_DEFAULT_COUNT
 1328/F61E : CD 61 F1                           CALL    READ_HEX_WORD
 1329/F621 : DA 29 F6                           JC      CL_DEFAULT_COUNT
 1330/F624 : 42                                 MOV     B,D                 ; BC = count
 1331/F625 : 4B                                 MOV     C,E
 1332/F626 : C3 2C F6                           JMP     CL_DO_LOAD
 1333/F629 :                                    
 1334/F629 :                            CL_DEFAULT_COUNT:
 1335/F629 : 01 00 01                           LXI     B,0100H             ; 256 bytes
 1336/F62C :                                    
 1337/F62C :                            CL_DO_LOAD:
 1338/F62C : D1                                 POP     D                   ; DE = mem addr
 1339/F62D :                                    
 1340/F62D :                                    ; Copy loop: storage -> memory
 1341/F62D :                            CL_LOOP:
 1342/F62D : DB 0B                              IN      STORAGE_DATA        ; Read + auto-increment
 1343/F62F : 12                                 STAX    D                   ; Store to memory
 1344/F630 : 13                                 INX     D
 1345/F631 : 0B                                 DCX     B
 1346/F632 : 78                                 MOV     A,B
 1347/F633 : B1                                 ORA     C
 1348/F634 : C2 2D F6                           JNZ     CL_LOOP
 1349/F637 :                                    
 1350/F637 : 21 96 F9                           LXI     H,MSG_LOADED
 1351/F63A : CD CD F0                           CALL    PRINT_STRING
 1352/F63D : C3 34 F0                           JMP     MAIN_LOOP
 1353/F640 :                                    
 1354/F640 :                            CL_NOT_MOUNTED:
 1355/F640 : 21 81 F9                           LXI     H,MSG_NO_STORAGE
 1356/F643 : CD CD F0                           CALL    PRINT_STRING
 1357/F646 : C3 34 F0                           JMP     MAIN_LOOP
 1358/F649 :                                    
 1359/F649 :                            CL_ERROR:
 1360/F649 : 21 2A F9                           LXI     H,MSG_BAD_HEX
 1361/F64C : CD CD F0                           CALL    PRINT_STRING
 1362/F64F : C3 34 F0                           JMP     MAIN_LOOP
 1363/F652 :                            
 1364/F652 :                            
 1365/F652 :                            ; CMD_WRITE - Write memory to storage
 1366/F652 :                            ; Syntax: W mem_addr storage_addr [count]
 1367/F652 :                            ; Storage addr is 24-bit (up to 6 hex digits), count defaults to 256
 1368/F652 :                            CMD_WRITE:
 1369/F652 :                                    ; Check mounted
 1370/F652 : DB 0C                              IN      STORAGE_CTRL
 1371/F654 : E6 01                              ANI     01H
 1372/F656 : CA A6 F6                           JZ      CW_NOT_MOUNTED
 1373/F659 :                                    
 1374/F659 :                                    ; Parse memory address (source)
 1375/F659 : CD 59 F1                           CALL    SKIP_SPACES
 1376/F65C : CD 61 F1                           CALL    READ_HEX_WORD
 1377/F65F : DA B0 F6                           JC      CW_ERROR
 1378/F662 : D5                                 PUSH    D                   ; Save mem addr
 1379/F663 :                                    
 1380/F663 :                                    ; Parse 24-bit storage address (dest)
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 24 - 12/20/2025 21:20:05


 1381/F663 : CD BE F1                           CALL    READ_HEX_ADDR24
 1382/F666 : DA AF F6                           JC      CW_ERROR_POP
 1383/F669 :                                    
 1384/F669 :                                    ; Set storage address from STOR_ADDR
 1385/F669 : 3A E7 00                           LDA     STOR_ADDR
 1386/F66C : D3 08                              OUT     STORAGE_ADDR_LO
 1387/F66E : 3A E8 00                           LDA     STOR_ADDR+1
 1388/F671 : D3 09                              OUT     STORAGE_ADDR_MID
 1389/F673 : 3A E9 00                           LDA     STOR_ADDR+2
 1390/F676 : D3 0A                              OUT     STORAGE_ADDR_HI
 1391/F678 :                                    
 1392/F678 :                                    ; Parse count (optional, default 256)
 1393/F678 : CD 59 F1                           CALL    SKIP_SPACES
 1394/F67B : 7E                                 MOV     A,M
 1395/F67C : B7                                 ORA     A
 1396/F67D : CA 8B F6                           JZ      CW_DEFAULT_COUNT
 1397/F680 : CD 61 F1                           CALL    READ_HEX_WORD
 1398/F683 : DA 8B F6                           JC      CW_DEFAULT_COUNT
 1399/F686 : 42                                 MOV     B,D
 1400/F687 : 4B                                 MOV     C,E
 1401/F688 : C3 8E F6                           JMP     CW_DO_WRITE
 1402/F68B :                                    
 1403/F68B :                            CW_DEFAULT_COUNT:
 1404/F68B : 01 00 01                           LXI     B,0100H
 1405/F68E :                                    
 1406/F68E :                            CW_DO_WRITE:
 1407/F68E : E1                                 POP     H                   ; HL = mem addr (source)
 1408/F68F :                                    
 1409/F68F :                                    ; Copy loop: memory -> storage
 1410/F68F :                            CW_LOOP:
 1411/F68F : 7E                                 MOV     A,M                 ; Read from memory
 1412/F690 : D3 0B                              OUT     STORAGE_DATA        ; Write + auto-increment
 1413/F692 : 23                                 INX     H
 1414/F693 : 0B                                 DCX     B
 1415/F694 : 78                                 MOV     A,B
 1416/F695 : B1                                 ORA     C
 1417/F696 : C2 8F F6                           JNZ     CW_LOOP
 1418/F699 :                                    
 1419/F699 :                                    ; Flush
 1420/F699 : 3E 02                              MVI     A,02H
 1421/F69B : D3 0C                              OUT     STORAGE_CTRL
 1422/F69D :                                    
 1423/F69D : 21 9F F9                           LXI     H,MSG_WRITTEN
 1424/F6A0 : CD CD F0                           CALL    PRINT_STRING
 1425/F6A3 : C3 34 F0                           JMP     MAIN_LOOP
 1426/F6A6 :                                    
 1427/F6A6 :                            CW_NOT_MOUNTED:
 1428/F6A6 : 21 81 F9                           LXI     H,MSG_NO_STORAGE
 1429/F6A9 : CD CD F0                           CALL    PRINT_STRING
 1430/F6AC : C3 34 F0                           JMP     MAIN_LOOP
 1431/F6AF :                                    
 1432/F6AF :                            CW_ERROR_POP:
 1433/F6AF : D1                                 POP     D
 1434/F6B0 :                            CW_ERROR:
 1435/F6B0 : 21 2A F9                           LXI     H,MSG_BAD_HEX
 1436/F6B3 : CD CD F0                           CALL    PRINT_STRING
 1437/F6B6 : C3 34 F0                           JMP     MAIN_LOOP
 1438/F6B9 :                            
 1439/F6B9 :                            ; ============================================
 1440/F6B9 :                            ; STRINGS
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 25 - 12/20/2025 21:20:05


 1441/F6B9 :                            ; ============================================
 1442/F6B9 :                            
 1443/F6B9 :                            MSG_BANNER:
 1444/F6B9 : 0D 0A                              DB      CR,LF
 1445/F6BB : 38 30 38 30 20 4D 6F 6E 69         DB      "8080 Monitor v0.3",CR,LF
      F6C4 : 74 6F 72 20 76 30 2E 33 0D
      F6CD : 0A                        
 1446/F6CE : 42 75 69 6C 74 3A 20 31 32         DB      'Built: ', DATE, ' ', TIME, CR, LF
      F6D7 : 2F 32 30 2F 32 30 32 35 20
      F6E0 : 32 31 3A 32 30 3A 30 35 0D
      F6E9 : 0A                        
 1447/F6EA : 52 65 61 64 79 2E 0D 0A            DB      "Ready.",CR,LF
 1448/F6F2 : 00                                 DB      0
 1449/F6F3 :                            
 1450/F6F3 :                            MSG_HELP:
 1451/F6F3 : 43 6F 6D 6D 61 6E 64 73 3A         DB      "Commands:",CR,LF
      F6FC : 0D 0A                     
 1452/F6FE : 20 20 43 20 73 74 61 72 74         DB      "  C start end dest - Compare memory",CR,LF
      F707 : 20 65 6E 64 20 64 65 73 74
      F710 : 20 2D 20 43 6F 6D 70 61 72
      F719 : 65 20 6D 65 6D 6F 72 79 0D
      F722 : 0A                        
 1453/F723 : 20 20 44 20 5B 73 74 61 72         DB      "  D [start] [end]  - Dump memory",CR,LF
      F72C : 74 5D 20 5B 65 6E 64 5D 20
      F735 : 20 2D 20 44 75 6D 70 20 6D
      F73E : 65 6D 6F 72 79 0D 0A      
 1454/F745 : 20 20 45 20 5B 61 64 64 72         DB      "  E [addr]         - Examine/modify",CR,LF
      F74E : 5D 20 20 20 20 20 20 20 20
      F757 : 20 2D 20 45 78 61 6D 69 6E
      F760 : 65 2F 6D 6F 64 69 66 79 0D
      F769 : 0A                        
 1455/F76A : 20 20 46 20 73 74 61 72 74         DB      "  F start end val  - Fill memory",CR,LF
      F773 : 20 65 6E 64 20 76 61 6C 20
      F77C : 20 2D 20 46 69 6C 6C 20 6D
      F785 : 65 6D 6F 72 79 0D 0A      
 1456/F78C : 20 20 47 20 5B 61 64 64 72         DB      "  G [addr]         - Go (execute)",CR,LF
      F795 : 5D 20 20 20 20 20 20 20 20
      F79E : 20 2D 20 47 6F 20 28 65 78
      F7A7 : 65 63 75 74 65 29 0D 0A   
 1457/F7AF : 20 20 48 20 6E 75 6D 31 20         DB      "  H num1 num2      - Hex math (+/-)",CR,LF
      F7B8 : 6E 75 6D 32 20 20 20 20 20
      F7C1 : 20 2D 20 48 65 78 20 6D 61
      F7CA : 74 68 20 28 2B 2F 2D 29 0D
      F7D3 : 0A                        
 1458/F7D4 : 20 20 49 20 70 6F 72 74 20         DB      "  I port           - Input from port",CR,LF
      F7DD : 20 20 20 20 20 20 20 20 20
      F7E6 : 20 2D 20 49 6E 70 75 74 20
      F7EF : 66 72 6F 6D 20 70 6F 72 74
      F7F8 : 0D 0A                     
 1459/F7FA : 20 20 4C 20 73 74 6F 72 20         DB      "  L stor mem [cnt] - Load from storage",CR,LF
      F803 : 6D 65 6D 20 5B 63 6E 74 5D
      F80C : 20 2D 20 4C 6F 61 64 20 66
      F815 : 72 6F 6D 20 73 74 6F 72 61
      F81E : 67 65 0D 0A               
 1460/F822 : 20 20 4D 20 73 72 63 20 64         DB      "  M src dst cnt    - Move memory",CR,LF
      F82B : 73 74 20 63 6E 74 20 20 20
      F834 : 20 2D 20 4D 6F 76 65 20 6D
      F83D : 65 6D 6F 72 79 0D 0A      
 1461/F844 : 20 20 4F 20 70 6F 72 74 20         DB      "  O port value     - Output to port",CR,LF
      F84D : 76 61 6C 75 65 20 20 20 20
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 26 - 12/20/2025 21:20:05


      F856 : 20 2D 20 4F 75 74 70 75 74
      F85F : 20 74 6F 20 70 6F 72 74 0D
      F868 : 0A                        
 1462/F869 : 20 20 53 20 73 74 61 72 74         DB      "  S start end pat  - Search memory",CR,LF
      F872 : 20 65 6E 64 20 70 61 74 20
      F87B : 20 2D 20 53 65 61 72 63 68
      F884 : 20 6D 65 6D 6F 72 79 0D 0A
 1463/F88D : 20 20 57 20 6D 65 6D 20 73         DB      "  W mem stor [cnt] - Write to storage",CR,LF
      F896 : 74 6F 72 20 5B 63 6E 74 5D
      F89F : 20 2D 20 57 72 69 74 65 20
      F8A8 : 74 6F 20 73 74 6F 72 61 67
      F8B1 : 65 0D 0A                  
 1464/F8B4 : 20 20 58 20 5B 66 69 6C 65         DB      "  X [file]         - Mount storage",CR,LF
      F8BD : 5D 20 20 20 20 20 20 20 20
      F8C6 : 20 2D 20 4D 6F 75 6E 74 20
      F8CF : 73 74 6F 72 61 67 65 0D 0A
 1465/F8D8 : 20 20 3F 20 20 20 20 20 20         DB      "  ?                - Help",CR,LF
      F8E1 : 20 20 20 20 20 20 20 20 20
      F8EA : 20 2D 20 48 65 6C 70 0D 0A
 1466/F8F3 : 00                                 DB      0
 1467/F8F4 :                            
 1468/F8F4 :                            MSG_UNKNOWN:
 1469/F8F4 : 55 6E 6B 6E 6F 77 6E 20 63         DB      "Unknown command. Type ? for help.",CR,LF,0
      F8FD : 6F 6D 6D 61 6E 64 2E 20 54
      F906 : 79 70 65 20 3F 20 66 6F 72
      F90F : 20 68 65 6C 70 2E 0D 0A 00
 1470/F918 :                            
 1471/F918 :                            MSG_BAD_ADDR:
 1472/F918 : 49 6E 76 61 6C 69 64 20 61         DB      "Invalid address",CR,LF,0
      F921 : 64 64 72 65 73 73 0D 0A 00
 1473/F92A :                            
 1474/F92A :                            MSG_BAD_HEX:
 1475/F92A : 49 6E 76 61 6C 69 64 20 68         DB      "Invalid hex value",CR,LF,0
      F933 : 65 78 20 76 61 6C 75 65 0D
      F93C : 0A 00                     
 1476/F93E :                            
 1477/F93E :                            MSG_BAD_PORT:
 1478/F93E : 49 6E 76 61 6C 69 64 20 70         DB      "Invalid port/value",CR,LF,0
      F947 : 6F 72 74 2F 76 61 6C 75 65
      F950 : 0D 0A 00                  
 1479/F953 :                            
 1480/F953 :                            MSG_MOUNTED:
 1481/F953 : 4D 6F 75 6E 74 65 64 0D 0A         DB      "Mounted",CR,LF,0
      F95C : 00                        
 1482/F95D :                            
 1483/F95D :                            MSG_NOT_FOUND:
 1484/F95D : 46 69 6C 65 20 6E 6F 74 20         DB      "File not found",CR,LF,0
      F966 : 66 6F 75 6E 64 0D 0A 00   
 1485/F96E :                            
 1486/F96E :                            MSG_INVALID_FILE:
 1487/F96E : 49 6E 76 61 6C 69 64 20 66         DB      "Invalid filename",CR,LF,0
      F977 : 69 6C 65 6E 61 6D 65 0D 0A
      F980 : 00                        
 1488/F981 :                            
 1489/F981 :                            MSG_NO_STORAGE:
 1490/F981 : 4E 6F 20 73 74 6F 72 61 67         DB      "No storage mounted",CR,LF,0
      F98A : 65 20 6D 6F 75 6E 74 65 64
      F993 : 0D 0A 00                  
 1491/F996 :                            
 1492/F996 :                            MSG_LOADED:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 27 - 12/20/2025 21:20:05


 1493/F996 : 4C 6F 61 64 65 64 0D 0A 00         DB      "Loaded",CR,LF,0
 1494/F99F :                            
 1495/F99F :                            MSG_WRITTEN:
 1496/F99F : 57 72 69 74 74 65 6E 0D 0A         DB      "Written",CR,LF,0
      F9A8 : 00                        
 1497/F9A9 :                            
 1498/F9A9 :                            ; ============================================
 1499/F9A9 :                            ; PADDING
 1500/F9A9 :                            ; ============================================
 1501/F9A9 :                            
 1502/F9A9 : =>FALSE                            IF      $ > 0FFFFH
 1503/F9A9 :                                    ERROR   "ROM exceeds 4KB!"
 1504/F9A9 : [1502]                             ENDIF
 1505/F9A9 :                            
 1506/F9A9 :                                    END     COLD_START
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 28 - 12/20/2025 21:20:05


  Symbol Table (* = unused):
  --------------------------

*ARCHITECTURE :                                      "aarch64-apple-darwin" - |
 BOOT_CONTINUE :              0F007 C |  BS :                             8 - |
*BUFFER_PTR :                   0D0 - | *CASESENSITIVE :                  0 - |
 CC_ADVANCE :                 0F275 C |  CC_ERROR :                   0F282 C |
 CC_LOOP :                    0F241 C |  CC_NEXT :                    0F273 C |
 CC_POP1_ERROR :              0F281 C |  CC_POP2_ERROR :              0F280 C |
 CD_ASCII :                   0F305 C |  CD_DONE :                    0F33A C |
 CD_DOT :                     0F310 C |  CD_DUMP_RANGE :              0F2DB C |
 CD_ERROR :                   0F2D2 C |  CD_HEX_BYTE :                0F2EA C |
 CD_LINE :                    0F2DC C |  CD_NO_ARGS :                 0F2AC C |
 CD_NO_GAP :                  0F2FA C |  CD_NO_WRAP1 :                0F2B9 C |
 CD_NO_WRAP2 :                0F2CC C |  CD_NO_WRAP3 :                0F32A C |
 CD_ONE_ARG :                 0F2C0 C |  CD_POP_ERROR :               0F2D1 C |
 CD_PRINT_CHAR :              0F312 C |  CE_ERROR :                   0F389 C |
 CE_EXIT :                    0F380 C |  CE_LOOP :                    0F356 C |
 CE_NEXT :                    0F379 C |  CE_USE_LAST :                0F353 C |
 CF_DONE :                    0F3C2 C |  CF_ERROR :                   0F3C7 C |
 CF_LOOP :                    0F3B1 C |  CF_NEXT :                    0F3BC C |
 CF_POP1_ERROR :              0F3C6 C |  CF_POP2_ERROR :              0F3C5 C |
 CG_DEFAULT :                 0F3DB C |  CH_ERROR :                   0F40E C |
 CH_POP_ERROR :               0F40D C |  CI_ERROR :                   0F430 C |
 CL_DEFAULT_COUNT :           0F629 C |  CL_DO_LOAD :                 0F62C C |
 CL_ERROR :                   0F649 C |  CL_LOOP :                    0F62D C |
 CL_NOT_MOUNTED :             0F640 C |  CMD_COMPARE :                0F217 C |
 CMD_DUMP :                   0F28B C |  CMD_EXAMINE :                0F341 C |
 CMD_FILL :                   0F392 C |  CMD_GO :                     0F3D0 C |
 CMD_HELP :                   0F52E C |  CMD_HEX_MATH :               0F3DF C |
 CMD_INPUT :                  0F417 C |  CMD_LOAD :                   0F5F0 C |
 CMD_MOUNT :                  0F592 C |  CMD_MOVE :                   0F439 C |
 CMD_OUTPUT :                 0F47E C |  CMD_SEARCH :                 0F4A4 C |
 CMD_WRITE :                  0F652 C |  CM_DONE_QUICK :              0F46E C |
 CM_DO_MOUNT :                0F5AA C |  CM_ERROR :                   0F475 C |
 CM_LOOP :                    0F45F C |  CM_NOT_FOUND :               0F5C2 C |
 CM_NO_MOUNT :                0F5E7 C |  CM_OK :                      0F5CB C |
 CM_POP1_ERROR :              0F474 C |  CM_POP2_ERROR :              0F473 C |
 CM_QUERY :                   0F5D4 C |  CM_SEND :                    0F59A C |
 COLD_START :                 0F000 C |  CONIN :                      0F0B4 C |
 CONOUT :                     0F0A8 C |  CONOUT_WAIT :                0F0A9 C |
 CONSOLE_DATA_IN :                1 - |  CONSOLE_DATA_OUT :               0 - |
 CONSOLE_STATUS :                 2 - | *CONST :                      0F0BE C |
*CONSTPI :        3.141592653589793 - |  CO_ERROR :                   0F49B C |
 CR :                            0D - |  CS_ADVANCE :                 0F514 C |
 CS_COMPARE :                 0F4EF C |  CS_DONE :                    0F521 C |
 CS_ERROR :                   0F525 C |  CS_NO_MATCH :                0F502 C |
 CS_PARSE_DONE :              0F4DE C |  CS_PARSE_LOOP :              0F4C2 C |
 CS_POP1_ERROR :              0F524 C |  CS_SEARCH_LOOP :             0F4E7 C |
 CW_DEFAULT_COUNT :           0F68B C |  CW_DO_WRITE :                0F68E C |
 CW_ERROR :                   0F6B0 C |  CW_ERROR_POP :               0F6AF C |
 CW_LOOP :                    0F68F C |  CW_NOT_MOUNTED :             0F6A6 C |
 DATE :                "12/20/2025" - | *FALSE :                          0 - |
*FLOATMAX :      1.797693134866E308 - | *HAS64 :                          1 - |
 IO_IN_STUB :                   0D6 - |  IO_OUT_STUB :                  0D9 - |
 LAST_DUMP_ADDR :               0D2 - |  LAST_EXAM_ADDR :               0D4 - |
 LF :                            0A - |  LINE_BUFFER :                   80 - |
 LINE_LENGTH :                   50 - | *LISTON :                         1 - |
*MACEXP :                         7 - |  MAIN_LOOP :                  0F034 C |
*MOMCPU :                      8080 - | *MOMCPUNAME :                "8080" - |
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 29 - 12/20/2025 21:20:05


 MOUNT_CTRL :                    0E - |  MOUNT_FILENAME :                0D - |
 MOUNT_STATUS :                  0F - |  MSG_BAD_ADDR :               0F918 C |
 MSG_BAD_HEX :                0F92A C |  MSG_BAD_PORT :               0F93E C |
 MSG_BANNER :                 0F6B9 C |  MSG_HELP :                   0F6F3 C |
 MSG_INVALID_FILE :           0F96E C |  MSG_LOADED :                 0F996 C |
 MSG_MOUNTED :                0F953 C |  MSG_NOT_FOUND :              0F95D C |
 MSG_NO_STORAGE :             0F981 C |  MSG_UNKNOWN :                0F8F4 C |
 MSG_WRITTEN :                0F99F C | *NESTMAX :                      100 - |
 NOT_LOWER :                  0F058 C |  PHN_DIGIT :                  0F0FE C |
 PRINT_BANNER :               0F0C6 C |  PRINT_CRLF :                 0F0D7 C |
 PRINT_HEX_BYTE :             0F0E8 C |  PRINT_HEX_NIBBLE :           0F0F5 C |
 PRINT_HEX_WORD :             0F104 C |  PRINT_SPACE :                0F0E2 C |
 PRINT_STRING :               0F0CD C |  READ_EXAM_BYTE :             0F537 C |
 READ_HEX_ADDR24 :            0F1BE C |  READ_HEX_WORD :              0F161 C |
 READ_LINE :                  0F10D C |  REB_BS :                     0F572 C |
 REB_DONE :                   0F56E C |  REB_EXIT :                   0F570 C |
 REB_LOOP :                   0F53B C | *RELAXED :                        0 - |
 RHA_DONE :                   0F211 C |  RHA_LOOP :                   0F1CD C |
 RHW_DONE :                   0F18E C |  RHW_LOOP :                   0F169 C |
 RL_BACKSPACE :               0F13A C |  RL_DONE :                    0F153 C |
 RL_LOOP :                    0F112 C |  SEARCH_END :                   0E5 - |
 SEARCH_LENGTH :                0E4 - |  SEARCH_PATTERN :               0DC - |
 SKIP_SPACES :                0F159 C |  SPACE :                         20 - |
 STACK_TOP :                  0F000 - |  STORAGE_ADDR_HI :               0A - |
 STORAGE_ADDR_LO :                8 - |  STORAGE_ADDR_MID :               9 - |
 STORAGE_CTRL :                  0C - |  STORAGE_DATA :                  0B - |
 STOR_ADDR :                    0E7 - |  SYSTEM_CONTROL :               0FE - |
 THD_ALPHA :                  0F1B4 C |  THD_DIGIT :                  0F1B8 C |
 THD_FAIL :                   0F1BC C |  TIME :                  "21:20:05" - |
 TO_HEX_DIGIT :               0F194 C | *TRUE :                           1 - |
*VERSION :                     142F - | *Z80SYNTAX :                      0 - |

    175 symbols
     17 unused symbols

 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 30 - 12/20/2025 21:20:05


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.01 seconds assembly time

   1506 lines source file
      2 passes
      0 errors
      0 warnings
