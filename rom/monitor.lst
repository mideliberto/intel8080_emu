 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 1 - 12/16/2025 12:51:05


    1/   0 :                            ; monitor.asm - Intel 8080 Monitor ROM
    2/   0 :                            ; Assemble with: make
    3/   0 :                            ; 
    4/   0 :                            ; Memory Map:
    5/   0 :                            ;   0x0000-0x00FF: System workspace (RAM)
    6/   0 :                            ;   0x0100-0xEFFF: User program area (RAM)
    7/   0 :                            ;   0xF000-0xFFFF: Monitor ROM (this file)
    8/   0 :                            ;
    9/   0 :                            ; I/O Ports:
   10/   0 :                            ;   0x00: Console data out (write only)
   11/   0 :                            ;   0x01: Console data in (read only)
   12/   0 :                            ;   0x02: Console status (bit 0 = RX ready, bit 1 = TX ready)
   13/   0 :                            
   14/   0 :                                    CPU     8080
   15/F000 :                                    ORG     0F000H
   16/F000 :                            
   17/F000 :                            ; ============================================
   18/F000 :                            ; CONSTANTS
   19/F000 :                            ; ============================================
   20/F000 :                            
   21/F000 : =0H                        CONSOLE_DATA_OUT    EQU     00H
   22/F000 : =1H                        CONSOLE_DATA_IN     EQU     01H
   23/F000 : =2H                        CONSOLE_STATUS      EQU     02H
   24/F000 :                            
   25/F000 : =0FEH                      SYSTEM_CONTROL      EQU     0FEH        ; ROM overlay control
   26/F000 :                            
   27/F000 : =0F000H                    STACK_TOP       EQU     0F000H      ; Stack grows down from ROM
   28/F000 :                            
   29/F000 : =0DH                       CR              EQU     0DH
   30/F000 : =0AH                       LF              EQU     0AH
   31/F000 : =8H                        BS              EQU     08H
   32/F000 : =20H                       SPACE           EQU     20H
   33/F000 :                            
   34/F000 :                            ; ============================================
   35/F000 :                            ; WORKSPACE (RAM at 0x0080-0x00FF)
   36/F000 :                            ; ============================================
   37/F000 :                            
   38/F000 : =80H                       LINE_BUFFER     EQU     0080H       ; 80 bytes for command line
   39/F000 : =50H                       LINE_LENGTH     EQU     80          ; Max 80 chars
   40/F000 : =0D0H                      BUFFER_PTR      EQU     00D0H       ; Current position in buffer (2 bytes)
   41/F000 : =0D2H                      LAST_DUMP_ADDR  EQU     00D2H       ; Last dump address (2 bytes)
   42/F000 : =0D4H                      LAST_EXAM_ADDR  EQU     00D4H       ; Last examine address (2 bytes)
   43/F000 :                            
   44/F000 :                            ; I/O stubs (self-modifying code)
   45/F000 : =0D6H                      IO_IN_STUB      EQU     00D6H       ; 3 bytes: IN xx / RET
   46/F000 : =0D9H                      IO_OUT_STUB     EQU     00D9H       ; 3 bytes: OUT xx / RET
   47/F000 :                            
   48/F000 :                            ; Search command workspace
   49/F000 : =0DCH                      SEARCH_PATTERN  EQU     00DCH       ; 8 bytes for pattern
   50/F000 : =0E4H                      SEARCH_LENGTH   EQU     00E4H       ; 1 byte for pattern length
   51/F000 : =0E5H                      SEARCH_END      EQU     00E5H       ; 2 bytes for end address
   52/F000 :                            
   53/F000 :                            ; ============================================
   54/F000 :                            ; COLD START
   55/F000 :                            ; ============================================
   56/F000 :                            
   57/F000 :                            COLD_START:
   58/F000 :                                    ; Running from overlay - PC near 0x0000, reading ROM at 0xF000
   59/F000 : 31 00 F0                           LXI     SP,STACK_TOP        ; Initialize stack pointer
   60/F003 : F3                                 DI                          ; Disable interrupts
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 2 - 12/16/2025 12:51:05


   61/F004 : C3 07 F0                           JMP     BOOT_CONTINUE       ; Jump to F000+ address space
   62/F007 :                            
   63/F007 :                            ; Now executing from 0xF000+ range - safe to disable overlay
   64/F007 :                            BOOT_CONTINUE:
   65/F007 : AF                                 XRA     A                   ; A = 0x00
   66/F008 : D3 FE                              OUT     SYSTEM_CONTROL      ; Disable overlay, expose RAM at 0x0000
   67/F00A :                                    
   68/F00A :                                    ; Initialize workspace (now writing to actual RAM)
   69/F00A : 21 00 00                           LXI     H,0000H
   70/F00D : 22 D2 00                           SHLD    LAST_DUMP_ADDR      ; Default dump address = 0
   71/F010 : 22 D4 00                           SHLD    LAST_EXAM_ADDR      ; Default exam address = 0
   72/F013 :                                    
   73/F013 :                                    ; Initialize I/O stubs
   74/F013 : 3E DB                              MVI     A,0DBH              ; IN opcode
   75/F015 : 32 D6 00                           STA     IO_IN_STUB
   76/F018 : 3E 00                              MVI     A,00H               ; Default port 0
   77/F01A : 32 D7 00                           STA     IO_IN_STUB+1
   78/F01D : 3E C9                              MVI     A,0C9H              ; RET opcode
   79/F01F : 32 D8 00                           STA     IO_IN_STUB+2
   80/F022 :                                    
   81/F022 : 3E D3                              MVI     A,0D3H              ; OUT opcode
   82/F024 : 32 D9 00                           STA     IO_OUT_STUB
   83/F027 : 3E 00                              MVI     A,00H               ; Default port 0
   84/F029 : 32 DA 00                           STA     IO_OUT_STUB+1
   85/F02C : 3E C9                              MVI     A,0C9H              ; RET opcode
   86/F02E : 32 DB 00                           STA     IO_OUT_STUB+2
   87/F031 :                                    
   88/F031 : CD B7 F0                           CALL    PRINT_BANNER        ; Show startup message
   89/F034 :                            
   90/F034 :                            ; ============================================
   91/F034 :                            ; MAIN LOOP
   92/F034 :                            ; ============================================
   93/F034 :                            
   94/F034 :                            MAIN_LOOP:
   95/F034 : 3E 3E                              MVI     A,'>'               ; Print prompt
   96/F036 : CD 99 F0                           CALL    CONOUT
   97/F039 : 3E 20                              MVI     A,' '
   98/F03B : CD 99 F0                           CALL    CONOUT
   99/F03E :                                    
  100/F03E : CD FE F0                           CALL    READ_LINE           ; Read command into LINE_BUFFER
  101/F041 :                                    
  102/F041 : 21 80 00                           LXI     H,LINE_BUFFER       ; Point to start of buffer
  103/F044 : CD 4A F1                           CALL    SKIP_SPACES         ; Skip leading spaces
  104/F047 :                                    
  105/F047 : 7E                                 MOV     A,M                 ; Get command character
  106/F048 : B7                                 ORA     A                   ; Empty line?
  107/F049 : CA 34 F0                           JZ      MAIN_LOOP           ; Yes, just prompt again
  108/F04C :                                    
  109/F04C :                                    ; Convert to uppercase if lowercase
  110/F04C : FE 61                              CPI     'a'
  111/F04E : DA 58 F0                           JC      NOT_LOWER
  112/F051 : FE 7B                              CPI     'z'+1
  113/F053 : D2 58 F0                           JNC     NOT_LOWER
  114/F056 : D6 20                              SUI     20H                 ; Convert to uppercase
  115/F058 :                            NOT_LOWER:
  116/F058 :                                    
  117/F058 : 23                                 INX     H                   ; Point past command char
  118/F059 :                                    
  119/F059 :                                    ; Command dispatch
  120/F059 : FE 43                              CPI     'C'
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 3 - 12/16/2025 12:51:05


  121/F05B : CA AF F1                           JZ      CMD_COMPARE
  122/F05E : FE 44                              CPI     'D'
  123/F060 : CA 23 F2                           JZ      CMD_DUMP
  124/F063 : FE 45                              CPI     'E'
  125/F065 : CA D9 F2                           JZ      CMD_EXAMINE
  126/F068 : FE 46                              CPI     'F'
  127/F06A : CA 2A F3                           JZ      CMD_FILL
  128/F06D : FE 47                              CPI     'G'
  129/F06F : CA 68 F3                           JZ      CMD_GO
  130/F072 : FE 48                              CPI     'H'
  131/F074 : CA 77 F3                           JZ      CMD_HEX_MATH
  132/F077 : FE 49                              CPI     'I'
  133/F079 : CA AF F3                           JZ      CMD_INPUT
  134/F07C : FE 4D                              CPI     'M'
  135/F07E : CA D1 F3                           JZ      CMD_MOVE
  136/F081 : FE 4F                              CPI     'O'
  137/F083 : CA 16 F4                           JZ      CMD_OUTPUT
  138/F086 : FE 53                              CPI     'S'
  139/F088 : CA 3C F4                           JZ      CMD_SEARCH
  140/F08B : FE 3F                              CPI     '?'
  141/F08D : CA C6 F4                           JZ      CMD_HELP
  142/F090 :                                    
  143/F090 :                                    ; Unknown command
  144/F090 : 21 F2 F6                           LXI     H,MSG_UNKNOWN
  145/F093 : CD BE F0                           CALL    PRINT_STRING
  146/F096 : C3 34 F0                           JMP     MAIN_LOOP
  147/F099 :                            
  148/F099 :                            ; ============================================
  149/F099 :                            ; CONSOLE I/O ROUTINES
  150/F099 :                            ; ============================================
  151/F099 :                            
  152/F099 :                            ; CONOUT - Output character in A
  153/F099 :                            ; Preserves: all registers
  154/F099 :                            CONOUT:
  155/F099 : F5                                 PUSH    PSW
  156/F09A :                            CONOUT_WAIT:
  157/F09A : DB 02                              IN      CONSOLE_STATUS
  158/F09C : E6 02                              ANI     02H
  159/F09E : CA 9A F0                           JZ      CONOUT_WAIT
  160/F0A1 : F1                                 POP     PSW
  161/F0A2 : D3 00                              OUT     CONSOLE_DATA_OUT
  162/F0A4 : C9                                 RET
  163/F0A5 :                            
  164/F0A5 :                            ; CONIN - Input character to A
  165/F0A5 :                            ; Trashes: flags
  166/F0A5 :                            CONIN:
  167/F0A5 : DB 02                              IN      CONSOLE_STATUS
  168/F0A7 : E6 01                              ANI     01H
  169/F0A9 : CA A5 F0                           JZ      CONIN
  170/F0AC : DB 01                              IN      CONSOLE_DATA_IN
  171/F0AE : C9                                 RET
  172/F0AF :                            
  173/F0AF :                            ; CONST - Console status
  174/F0AF :                            ; Returns: A = 0xFF if char available, 0x00 if not
  175/F0AF :                            ; Trashes: flags
  176/F0AF :                            CONST:
  177/F0AF : DB 02                              IN      CONSOLE_STATUS
  178/F0B1 : E6 01                              ANI     01H
  179/F0B3 : C8                                 RZ                          ; Return 0 if no char
  180/F0B4 : 3E FF                              MVI     A,0FFH              ; Return FF if char available
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 4 - 12/16/2025 12:51:05


  181/F0B6 : C9                                 RET
  182/F0B7 :                            
  183/F0B7 :                            ; ============================================
  184/F0B7 :                            ; PRINT ROUTINES
  185/F0B7 :                            ; ============================================
  186/F0B7 :                            
  187/F0B7 :                            ; PRINT_BANNER - Display startup message
  188/F0B7 :                            ; Trashes: A, HL, flags
  189/F0B7 :                            PRINT_BANNER:
  190/F0B7 : 21 2A F5                           LXI     H,MSG_BANNER
  191/F0BA : CD BE F0                           CALL    PRINT_STRING
  192/F0BD : C9                                 RET
  193/F0BE :                            
  194/F0BE :                            ; PRINT_STRING - Print null-terminated string at HL
  195/F0BE :                            ; Trashes: A, HL, flags
  196/F0BE :                            PRINT_STRING:
  197/F0BE : 7E                                 MOV     A,M                 ; Get character
  198/F0BF : B7                                 ORA     A                   ; Check for null
  199/F0C0 : C8                                 RZ                          ; Return if end of string
  200/F0C1 : CD 99 F0                           CALL    CONOUT
  201/F0C4 : 23                                 INX     H
  202/F0C5 : C3 BE F0                           JMP     PRINT_STRING
  203/F0C8 :                            
  204/F0C8 :                            ; PRINT_CRLF - Print carriage return and line feed
  205/F0C8 :                            ; Trashes: A, flags
  206/F0C8 :                            PRINT_CRLF:
  207/F0C8 : 3E 0D                              MVI     A,CR
  208/F0CA : CD 99 F0                           CALL    CONOUT
  209/F0CD : 3E 0A                              MVI     A,LF
  210/F0CF : CD 99 F0                           CALL    CONOUT
  211/F0D2 : C9                                 RET
  212/F0D3 :                            
  213/F0D3 :                            ; PRINT_SPACE - Print a space
  214/F0D3 :                            ; Trashes: A, flags
  215/F0D3 :                            PRINT_SPACE:
  216/F0D3 : 3E 20                              MVI     A,SPACE
  217/F0D5 : CD 99 F0                           CALL    CONOUT
  218/F0D8 : C9                                 RET
  219/F0D9 :                            
  220/F0D9 :                            ; PRINT_HEX_BYTE - Print A as two hex digits
  221/F0D9 :                            ; Input: A = byte to print
  222/F0D9 :                            ; Trashes: A, flags
  223/F0D9 :                            PRINT_HEX_BYTE:
  224/F0D9 : F5                                 PUSH    PSW                 ; Save original byte
  225/F0DA : 0F                                 RRC                         ; Shift high nibble to low
  226/F0DB : 0F                                 RRC
  227/F0DC : 0F                                 RRC
  228/F0DD : 0F                                 RRC
  229/F0DE : CD E6 F0                           CALL    PRINT_HEX_NIBBLE    ; Print high nibble
  230/F0E1 : F1                                 POP     PSW                 ; Restore original
  231/F0E2 : CD E6 F0                           CALL    PRINT_HEX_NIBBLE    ; Print low nibble
  232/F0E5 : C9                                 RET
  233/F0E6 :                            
  234/F0E6 :                            ; PRINT_HEX_NIBBLE - Print low nibble of A as hex digit
  235/F0E6 :                            ; Input: A = value (low 4 bits used)
  236/F0E6 :                            ; Trashes: A, flags
  237/F0E6 :                            PRINT_HEX_NIBBLE:
  238/F0E6 : E6 0F                              ANI     0FH                 ; Mask to low nibble
  239/F0E8 : FE 0A                              CPI     0AH                 ; Is it A-F?
  240/F0EA : DA EF F0                           JC      PHN_DIGIT           ; No, it's 0-9
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 5 - 12/16/2025 12:51:05


  241/F0ED : C6 07                              ADI     07H                 ; Adjust for A-F
  242/F0EF :                            PHN_DIGIT:
  243/F0EF : C6 30                              ADI     '0'                 ; Convert to ASCII
  244/F0F1 : CD 99 F0                           CALL    CONOUT
  245/F0F4 : C9                                 RET
  246/F0F5 :                            
  247/F0F5 :                            ; PRINT_HEX_WORD - Print HL as four hex digits
  248/F0F5 :                            ; Input: HL = word to print
  249/F0F5 :                            ; Trashes: A, flags
  250/F0F5 :                            PRINT_HEX_WORD:
  251/F0F5 : 7C                                 MOV     A,H
  252/F0F6 : CD D9 F0                           CALL    PRINT_HEX_BYTE
  253/F0F9 : 7D                                 MOV     A,L
  254/F0FA : CD D9 F0                           CALL    PRINT_HEX_BYTE
  255/F0FD : C9                                 RET
  256/F0FE :                            
  257/F0FE :                            ; ============================================
  258/F0FE :                            ; INPUT ROUTINES
  259/F0FE :                            ; ============================================
  260/F0FE :                            
  261/F0FE :                            ; READ_LINE - Read line into LINE_BUFFER
  262/F0FE :                            ; Handles: BS (backspace), CR (end of line)
  263/F0FE :                            ; Returns: LINE_BUFFER contains null-terminated string
  264/F0FE :                            ; Trashes: A, B, C, HL, flags
  265/F0FE :                            READ_LINE:
  266/F0FE : 21 80 00                           LXI     H,LINE_BUFFER       ; Point to buffer start
  267/F101 : 06 00                              MVI     B,0                 ; Character count
  268/F103 :                                    
  269/F103 :                            RL_LOOP:
  270/F103 : CD A5 F0                           CALL    CONIN               ; Get character
  271/F106 : 4F                                 MOV     C,A                 ; Save it in C
  272/F107 :                                    
  273/F107 : FE 0D                              CPI     CR                  ; Enter pressed?
  274/F109 : CA 44 F1                           JZ      RL_DONE
  275/F10C : FE 0A                              CPI     LF
  276/F10E : CA 44 F1                           JZ      RL_DONE
  277/F111 :                                    
  278/F111 : FE 08                              CPI     BS                  ; Backspace?
  279/F113 : CA 2B F1                           JZ      RL_BACKSPACE
  280/F116 :                                    
  281/F116 : FE 20                              CPI     SPACE               ; Ignore control chars
  282/F118 : DA 03 F1                           JC      RL_LOOP
  283/F11B :                                    
  284/F11B :                                    ; Check buffer full
  285/F11B : 78                                 MOV     A,B
  286/F11C : FE 4F                              CPI     LINE_LENGTH-1       ; Room for char + null?
  287/F11E : D2 03 F1                           JNC     RL_LOOP             ; Buffer full, ignore
  288/F121 :                                    
  289/F121 :                                    ; Store and echo character
  290/F121 : 71                                 MOV     M,C                 ; Store in buffer
  291/F122 : 23                                 INX     H                   ; Advance pointer
  292/F123 : 04                                 INR     B                   ; Increment count
  293/F124 : 79                                 MOV     A,C                 ; Echo character
  294/F125 : CD 99 F0                           CALL    CONOUT
  295/F128 : C3 03 F1                           JMP     RL_LOOP
  296/F12B :                                    
  297/F12B :                            RL_BACKSPACE:
  298/F12B : 78                                 MOV     A,B                 ; Check if buffer empty
  299/F12C : B7                                 ORA     A
  300/F12D : CA 03 F1                           JZ      RL_LOOP             ; Nothing to delete
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 6 - 12/16/2025 12:51:05


  301/F130 :                                    
  302/F130 : 2B                                 DCX     H                   ; Back up pointer
  303/F131 : 05                                 DCR     B                   ; Decrement count
  304/F132 :                                    
  305/F132 :                                    ; Erase character on screen: BS, space, BS
  306/F132 : 3E 08                              MVI     A,BS
  307/F134 : CD 99 F0                           CALL    CONOUT
  308/F137 : 3E 20                              MVI     A,SPACE
  309/F139 : CD 99 F0                           CALL    CONOUT
  310/F13C : 3E 08                              MVI     A,BS
  311/F13E : CD 99 F0                           CALL    CONOUT
  312/F141 : C3 03 F1                           JMP     RL_LOOP
  313/F144 :                                    
  314/F144 :                            RL_DONE:
  315/F144 : 36 00                              MVI     M,0                 ; Null terminate
  316/F146 : CD C8 F0                           CALL    PRINT_CRLF          ; Echo newline
  317/F149 : C9                                 RET
  318/F14A :                            
  319/F14A :                            ; ============================================
  320/F14A :                            ; PARSING ROUTINES
  321/F14A :                            ; ============================================
  322/F14A :                            
  323/F14A :                            ; SKIP_SPACES - Skip spaces in buffer
  324/F14A :                            ; Input: HL = pointer into buffer
  325/F14A :                            ; Output: HL = pointer to first non-space (or null)
  326/F14A :                            ; Trashes: A, flags
  327/F14A :                            SKIP_SPACES:
  328/F14A : 7E                                 MOV     A,M
  329/F14B : FE 20                              CPI     SPACE
  330/F14D : C0                                 RNZ                         ; Return if not a space
  331/F14E : 23                                 INX     H
  332/F14F : C3 4A F1                           JMP     SKIP_SPACES
  333/F152 :                            
  334/F152 :                            ; READ_HEX_WORD - Parse hex number from buffer
  335/F152 :                            ; Input: HL = pointer into buffer
  336/F152 :                            ; Output: DE = parsed value, HL = advanced past number
  337/F152 :                            ;         Carry set if no valid hex digits found
  338/F152 :                            ; Trashes: A, BC, flags
  339/F152 :                            READ_HEX_WORD:
  340/F152 : CD 4A F1                           CALL    SKIP_SPACES         ; Skip leading spaces
  341/F155 : 11 00 00                           LXI     D,0                 ; Initialize result
  342/F158 : 06 00                              MVI     B,0                 ; Digit count
  343/F15A :                                    
  344/F15A :                            RHW_LOOP:
  345/F15A : 7E                                 MOV     A,M                 ; Get character
  346/F15B : CD 85 F1                           CALL    TO_HEX_DIGIT        ; Convert to 0-15
  347/F15E : DA 7F F1                           JC      RHW_DONE            ; Not a hex digit, done
  348/F161 :                                    
  349/F161 :                                    ; Shift DE left 4 bits and add new digit
  350/F161 :                                    ; DE = DE * 16 + A
  351/F161 : F5                                 PUSH    PSW                 ; Save digit
  352/F162 :                                    
  353/F162 :                                    ; Get E's high nibble (will go to D's low nibble)
  354/F162 : 7B                                 MOV     A,E
  355/F163 : E6 F0                              ANI     0F0H                ; Isolate high nibble
  356/F165 : 0F                                 RRC
  357/F166 : 0F                                 RRC
  358/F167 : 0F                                 RRC
  359/F168 : 0F                                 RRC                         ; Move to low nibble position
  360/F169 : 4F                                 MOV     C,A                 ; Save it
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 7 - 12/16/2025 12:51:05


  361/F16A :                                    
  362/F16A :                                    ; Shift D left 4 bits
  363/F16A : 7A                                 MOV     A,D
  364/F16B : 87                                 ADD     A
  365/F16C : 87                                 ADD     A
  366/F16D : 87                                 ADD     A
  367/F16E : 87                                 ADD     A                   ; D << 4
  368/F16F : B1                                 ORA     C                   ; OR in E's high nibble
  369/F170 : 57                                 MOV     D,A
  370/F171 :                                    
  371/F171 :                                    ; Shift E left 4 bits
  372/F171 : 7B                                 MOV     A,E
  373/F172 : 87                                 ADD     A
  374/F173 : 87                                 ADD     A
  375/F174 : 87                                 ADD     A
  376/F175 : 87                                 ADD     A                   ; E << 4
  377/F176 : 5F                                 MOV     E,A
  378/F177 :                                    
  379/F177 :                                    ; Add new digit
  380/F177 : F1                                 POP     PSW
  381/F178 : B3                                 ORA     E
  382/F179 : 5F                                 MOV     E,A
  383/F17A :                                    
  384/F17A : 23                                 INX     H                   ; Advance buffer pointer
  385/F17B : 04                                 INR     B                   ; Count digit
  386/F17C : C3 5A F1                           JMP     RHW_LOOP
  387/F17F :                                    
  388/F17F :                            RHW_DONE:
  389/F17F : 78                                 MOV     A,B                 ; Check digit count
  390/F180 : B7                                 ORA     A
  391/F181 : 37                                 STC                         ; Set carry (no digits)
  392/F182 : C8                                 RZ                          ; Return with carry if no digits
  393/F183 : B7                                 ORA     A                   ; Clear carry (success)
  394/F184 : C9                                 RET
  395/F185 :                            
  396/F185 :                            ; TO_HEX_DIGIT - Convert ASCII to hex value
  397/F185 :                            ; Input: A = ASCII character
  398/F185 :                            ; Output: A = hex value (0-15), Carry clear
  399/F185 :                            ;         Carry set if not a hex digit
  400/F185 :                            ; Trashes: flags
  401/F185 :                            TO_HEX_DIGIT:
  402/F185 : FE 30                              CPI     '0'
  403/F187 : DA AD F1                           JC      THD_FAIL            ; Below '0'
  404/F18A : FE 3A                              CPI     '9'+1
  405/F18C : DA A9 F1                           JC      THD_DIGIT           ; '0'-'9'
  406/F18F :                                    
  407/F18F : FE 41                              CPI     'A'
  408/F191 : DA AD F1                           JC      THD_FAIL            ; Between '9' and 'A'
  409/F194 : FE 47                              CPI     'F'+1
  410/F196 : DA A5 F1                           JC      THD_ALPHA           ; 'A'-'F'
  411/F199 :                                    
  412/F199 : FE 61                              CPI     'a'
  413/F19B : DA AD F1                           JC      THD_FAIL            ; Between 'F' and 'a'
  414/F19E : FE 67                              CPI     'f'+1
  415/F1A0 : D2 AD F1                           JNC     THD_FAIL            ; Above 'f'
  416/F1A3 :                                    
  417/F1A3 :                                    ; 'a'-'f': convert to uppercase first
  418/F1A3 : D6 20                              SUI     20H
  419/F1A5 :                                    
  420/F1A5 :                            THD_ALPHA:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 8 - 12/16/2025 12:51:05


  421/F1A5 : D6 37                              SUI     'A'-10              ; Convert 'A'-'F' to 10-15
  422/F1A7 : B7                                 ORA     A                   ; Clear carry
  423/F1A8 : C9                                 RET
  424/F1A9 :                                    
  425/F1A9 :                            THD_DIGIT:
  426/F1A9 : D6 30                              SUI     '0'                 ; Convert '0'-'9' to 0-9
  427/F1AB : B7                                 ORA     A                   ; Clear carry
  428/F1AC : C9                                 RET
  429/F1AD :                                    
  430/F1AD :                            THD_FAIL:
  431/F1AD : 37                                 STC                         ; Set carry = not hex
  432/F1AE : C9                                 RET
  433/F1AF :                            
  434/F1AF :                            ; ============================================
  435/F1AF :                            ; COMMANDS
  436/F1AF :                            ; ============================================
  437/F1AF :                            
  438/F1AF :                            ; CMD_COMPARE - Compare memory regions
  439/F1AF :                            ; Syntax: C start end dest
  440/F1AF :                            ; Compares [start,end] with [dest, dest+(end-start)]
  441/F1AF :                            ; Shows differences as: addr1:val1 addr2:val2
  442/F1AF :                            CMD_COMPARE:
  443/F1AF : CD 4A F1                           CALL    SKIP_SPACES
  444/F1B2 : CD 52 F1                           CALL    READ_HEX_WORD
  445/F1B5 : DA 1A F2                           JC      CC_ERROR
  446/F1B8 : D5                                 PUSH    D                   ; Stack: start
  447/F1B9 :                                    
  448/F1B9 : CD 4A F1                           CALL    SKIP_SPACES
  449/F1BC : CD 52 F1                           CALL    READ_HEX_WORD
  450/F1BF : DA 19 F2                           JC      CC_POP1_ERROR
  451/F1C2 : D5                                 PUSH    D                   ; Stack: end, start
  452/F1C3 :                                    
  453/F1C3 : CD 4A F1                           CALL    SKIP_SPACES
  454/F1C6 : CD 52 F1                           CALL    READ_HEX_WORD
  455/F1C9 : DA 18 F2                           JC      CC_POP2_ERROR
  456/F1CC :                                    ; DE = dest, stack: end, start
  457/F1CC :                                    
  458/F1CC :                                    ; Now all args parsed. Compute count and set up registers.
  459/F1CC : C1                                 POP     B                   ; BC = end
  460/F1CD : E1                                 POP     H                   ; HL = start
  461/F1CE : D5                                 PUSH    D                   ; Save dest
  462/F1CF :                                    
  463/F1CF :                                    ; count = end - start + 1 = BC - HL + 1
  464/F1CF : 79                                 MOV     A,C
  465/F1D0 : 95                                 SUB     L
  466/F1D1 : 5F                                 MOV     E,A
  467/F1D2 : 78                                 MOV     A,B
  468/F1D3 : 9C                                 SBB     H
  469/F1D4 : 57                                 MOV     D,A
  470/F1D5 : 13                                 INX     D                   ; DE = count
  471/F1D6 :                                    
  472/F1D6 : 42                                 MOV     B,D
  473/F1D7 : 4B                                 MOV     C,E                 ; BC = count
  474/F1D8 : D1                                 POP     D                   ; DE = dest
  475/F1D9 :                                    
  476/F1D9 :                                    ; Now: HL = start, DE = dest, BC = count
  477/F1D9 :                                    
  478/F1D9 :                            CC_LOOP:
  479/F1D9 : 7E                                 MOV     A,M                 ; A = first byte
  480/F1DA : E5                                 PUSH    H                   ; Save first pointer
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 9 - 12/16/2025 12:51:05


  481/F1DB : C5                                 PUSH    B                   ; Save count
  482/F1DC : EB                                 XCHG                        ; HL = dest
  483/F1DD : BE                                 CMP     M                   ; Compare with second byte
  484/F1DE : EB                                 XCHG                        ; HL = first, DE = dest
  485/F1DF : CA 0B F2                           JZ      CC_NEXT
  486/F1E2 :                                    
  487/F1E2 :                                    ; Mismatch
  488/F1E2 :                                    ; HL=first ptr, DE=second ptr, stack: count, first ptr
  489/F1E2 : D5                                 PUSH    D                   ; Save second
  490/F1E3 : 46                                 MOV     B,M                 ; B = first byte (re-read)
  491/F1E4 : CD F5 F0                           CALL    PRINT_HEX_WORD      ; Print first addr
  492/F1E7 : 3E 3A                              MVI     A,':'
  493/F1E9 : CD 99 F0                           CALL    CONOUT
  494/F1EC : 78                                 MOV     A,B
  495/F1ED : CD D9 F0                           CALL    PRINT_HEX_BYTE
  496/F1F0 : CD D3 F0                           CALL    PRINT_SPACE
  497/F1F3 :                                    
  498/F1F3 : E1                                 POP     H                   ; HL = second pointer
  499/F1F4 : 46                                 MOV     B,M                 ; B = second byte
  500/F1F5 : E5                                 PUSH    H                   ; Save second again
  501/F1F6 : CD F5 F0                           CALL    PRINT_HEX_WORD
  502/F1F9 : 3E 3A                              MVI     A,':'
  503/F1FB : CD 99 F0                           CALL    CONOUT
  504/F1FE : 78                                 MOV     A,B
  505/F1FF : CD D9 F0                           CALL    PRINT_HEX_BYTE
  506/F202 : CD C8 F0                           CALL    PRINT_CRLF
  507/F205 :                                    
  508/F205 : D1                                 POP     D                   ; DE = second ptr
  509/F206 : C1                                 POP     B                   ; BC = count
  510/F207 : E1                                 POP     H                   ; HL = first ptr
  511/F208 : C3 0D F2                           JMP     CC_ADVANCE
  512/F20B :                                    
  513/F20B :                            CC_NEXT:
  514/F20B : C1                                 POP     B                   ; BC = count
  515/F20C : E1                                 POP     H                   ; HL = first ptr
  516/F20D :                                    
  517/F20D :                            CC_ADVANCE:
  518/F20D : 23                                 INX     H                   ; first++
  519/F20E : 13                                 INX     D                   ; second++
  520/F20F : 0B                                 DCX     B                   ; count--
  521/F210 : 78                                 MOV     A,B
  522/F211 : B1                                 ORA     C
  523/F212 : C2 D9 F1                           JNZ     CC_LOOP
  524/F215 : C3 34 F0                           JMP     MAIN_LOOP
  525/F218 :                            
  526/F218 :                            CC_POP2_ERROR:
  527/F218 : D1                                 POP     D
  528/F219 :                            CC_POP1_ERROR:
  529/F219 : D1                                 POP     D
  530/F21A :                            CC_ERROR:
  531/F21A : 21 28 F7                           LXI     H,MSG_BAD_HEX
  532/F21D : CD BE F0                           CALL    PRINT_STRING
  533/F220 : C3 34 F0                           JMP     MAIN_LOOP
  534/F223 :                            
  535/F223 :                            ; CMD_DUMP - Dump memory
  536/F223 :                            ; Syntax: D [start] [end]
  537/F223 :                            ; If no args, continues from last address
  538/F223 :                            ; If one arg, dumps 128 bytes from start
  539/F223 :                            ; If two args, dumps from start to end
  540/F223 :                            CMD_DUMP:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 10 - 12/16/2025 12:51:05


  541/F223 : CD 4A F1                           CALL    SKIP_SPACES
  542/F226 : 7E                                 MOV     A,M
  543/F227 : B7                                 ORA     A                   ; End of line?
  544/F228 : CA 44 F2                           JZ      CD_NO_ARGS
  545/F22B :                                    
  546/F22B :                                    ; Parse start address
  547/F22B : CD 52 F1                           CALL    READ_HEX_WORD
  548/F22E : DA 6A F2                           JC      CD_ERROR            ; No valid address
  549/F231 : D5                                 PUSH    D                   ; Save start address
  550/F232 :                                    
  551/F232 : CD 4A F1                           CALL    SKIP_SPACES
  552/F235 : 7E                                 MOV     A,M
  553/F236 : B7                                 ORA     A                   ; End of line?
  554/F237 : CA 58 F2                           JZ      CD_ONE_ARG
  555/F23A :                                    
  556/F23A :                                    ; Parse end address
  557/F23A : CD 52 F1                           CALL    READ_HEX_WORD
  558/F23D : DA 69 F2                           JC      CD_POP_ERROR        ; Invalid end address
  559/F240 :                                    
  560/F240 :                                    ; Two args: start in stack, end in DE
  561/F240 : E1                                 POP     H                   ; HL = start
  562/F241 : C3 73 F2                           JMP     CD_DUMP_RANGE
  563/F244 :                                    
  564/F244 :                            CD_NO_ARGS:
  565/F244 :                                    ; Continue from last address
  566/F244 : 2A D2 00                           LHLD    LAST_DUMP_ADDR
  567/F247 : 11 7F 00                           LXI     D,007FH             ; 128 bytes
  568/F24A : 19                                 DAD     D                   ; HL = start + 127 = end
  569/F24B : D2 51 F2                           JNC     CD_NO_WRAP1         ; No overflow, HL is valid end
  570/F24E : 21 FF FF                           LXI     H,0FFFFH            ; Cap at FFFF
  571/F251 :                            CD_NO_WRAP1:
  572/F251 : EB                                 XCHG                        ; DE = end
  573/F252 : 2A D2 00                           LHLD    LAST_DUMP_ADDR      ; HL = start
  574/F255 : C3 73 F2                           JMP     CD_DUMP_RANGE
  575/F258 :                                    
  576/F258 :                            CD_ONE_ARG:
  577/F258 : E1                                 POP     H                   ; HL = start
  578/F259 : E5                                 PUSH    H                   ; Save start again
  579/F25A : 11 7F 00                           LXI     D,007FH
  580/F25D : 19                                 DAD     D                   ; HL = start + 127 = end
  581/F25E : D2 64 F2                           JNC     CD_NO_WRAP2         ; No overflow
  582/F261 : 21 FF FF                           LXI     H,0FFFFH            ; Cap at FFFF
  583/F264 :                            CD_NO_WRAP2:
  584/F264 : EB                                 XCHG                        ; DE = end
  585/F265 : E1                                 POP     H                   ; HL = start
  586/F266 : C3 73 F2                           JMP     CD_DUMP_RANGE
  587/F269 :                                    
  588/F269 :                            CD_POP_ERROR:
  589/F269 : D1                                 POP     D                   ; Clean up stack
  590/F26A :                            CD_ERROR:
  591/F26A : 21 16 F7                           LXI     H,MSG_BAD_ADDR
  592/F26D : CD BE F0                           CALL    PRINT_STRING
  593/F270 : C3 34 F0                           JMP     MAIN_LOOP
  594/F273 :                            
  595/F273 :                            ; CD_DUMP_RANGE - Dump memory from HL to DE
  596/F273 :                            ; Input: HL = start address, DE = end address
  597/F273 :                            CD_DUMP_RANGE:
  598/F273 : D5                                 PUSH    D                   ; Save end address
  599/F274 :                            
  600/F274 :                            CD_LINE:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 11 - 12/16/2025 12:51:05


  601/F274 :                                    ; Print address
  602/F274 : CD F5 F0                           CALL    PRINT_HEX_WORD
  603/F277 : 3E 3A                              MVI     A,':'
  604/F279 : CD 99 F0                           CALL    CONOUT
  605/F27C : CD D3 F0                           CALL    PRINT_SPACE
  606/F27F :                                    
  607/F27F :                                    ; Print 16 hex bytes
  608/F27F : E5                                 PUSH    H                   ; Save line start for ASCII
  609/F280 : 0E 10                              MVI     C,16                ; Byte counter
  610/F282 :                                    
  611/F282 :                            CD_HEX_BYTE:
  612/F282 : 7E                                 MOV     A,M                 ; Get byte
  613/F283 : CD D9 F0                           CALL    PRINT_HEX_BYTE
  614/F286 : CD D3 F0                           CALL    PRINT_SPACE
  615/F289 :                                    
  616/F289 :                                    ; Extra space after 8th byte
  617/F289 : 79                                 MOV     A,C
  618/F28A : FE 09                              CPI     9
  619/F28C : C2 92 F2                           JNZ     CD_NO_GAP
  620/F28F : CD D3 F0                           CALL    PRINT_SPACE
  621/F292 :                            CD_NO_GAP:
  622/F292 :                                    
  623/F292 : 23                                 INX     H
  624/F293 : 0D                                 DCR     C
  625/F294 : C2 82 F2                           JNZ     CD_HEX_BYTE
  626/F297 :                                    
  627/F297 :                                    ; Print ASCII representation
  628/F297 : CD D3 F0                           CALL    PRINT_SPACE
  629/F29A : E1                                 POP     H                   ; Restore line start
  630/F29B : 0E 10                              MVI     C,16
  631/F29D :                                    
  632/F29D :                            CD_ASCII:
  633/F29D : 7E                                 MOV     A,M
  634/F29E : FE 20                              CPI     SPACE               ; Printable? (>= 0x20)
  635/F2A0 : DA A8 F2                           JC      CD_DOT
  636/F2A3 : FE 7F                              CPI     07FH                ; Printable? (< 0x7F)
  637/F2A5 : DA AA F2                           JC      CD_PRINT_CHAR
  638/F2A8 :                            CD_DOT:
  639/F2A8 : 3E 2E                              MVI     A,'.'
  640/F2AA :                            CD_PRINT_CHAR:
  641/F2AA : CD 99 F0                           CALL    CONOUT
  642/F2AD : 23                                 INX     H
  643/F2AE : 0D                                 DCR     C
  644/F2AF : C2 9D F2                           JNZ     CD_ASCII
  645/F2B2 :                                    
  646/F2B2 : CD C8 F0                           CALL    PRINT_CRLF
  647/F2B5 :                                    
  648/F2B5 :                                    ; Check if done (HL > end address OR wrapped)
  649/F2B5 : D1                                 POP     D                   ; DE = end address
  650/F2B6 : D5                                 PUSH    D                   ; Keep it on stack
  651/F2B7 :                                    
  652/F2B7 :                                    ; Detect wrap-around: if H is 00 and D is FF, we wrapped past FFFF
  653/F2B7 : 7C                                 MOV     A,H
  654/F2B8 : B7                                 ORA     A
  655/F2B9 : C2 C2 F2                           JNZ     CD_NO_WRAP3         ; H != 0, no wrap
  656/F2BC : 7A                                 MOV     A,D
  657/F2BD : FE F0                              CPI     0F0H                ; Were we dumping high memory?
  658/F2BF : D2 D2 F2                           JNC     CD_DONE             ; Yes and H=0, we wrapped, done
  659/F2C2 :                                    
  660/F2C2 :                            CD_NO_WRAP3:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 12 - 12/16/2025 12:51:05


  661/F2C2 :                                    ; Compare HL to DE: if HL > DE, we're done
  662/F2C2 : 7A                                 MOV     A,D
  663/F2C3 : BC                                 CMP     H
  664/F2C4 : DA D2 F2                           JC      CD_DONE             ; D < H, done
  665/F2C7 : C2 74 F2                           JNZ     CD_LINE             ; D > H, continue
  666/F2CA : 7B                                 MOV     A,E
  667/F2CB : BD                                 CMP     L
  668/F2CC : DA D2 F2                           JC      CD_DONE             ; E < L, done (D == H)
  669/F2CF : C3 74 F2                           JMP     CD_LINE             ; E >= L, continue
  670/F2D2 :                                    
  671/F2D2 :                            CD_DONE:
  672/F2D2 : D1                                 POP     D                   ; Clean up stack
  673/F2D3 : 22 D2 00                           SHLD    LAST_DUMP_ADDR      ; Save for next time
  674/F2D6 : C3 34 F0                           JMP     MAIN_LOOP
  675/F2D9 :                            
  676/F2D9 :                            ; CMD_EXAMINE - Examine/modify memory
  677/F2D9 :                            ; Syntax: E [addr]
  678/F2D9 :                            ; Shows "ADDR: XX-" and waits for input
  679/F2D9 :                            ; Enter hex to modify, CR to advance, period to exit
  680/F2D9 :                            CMD_EXAMINE:
  681/F2D9 : CD 4A F1                           CALL    SKIP_SPACES
  682/F2DC : 7E                                 MOV     A,M
  683/F2DD : B7                                 ORA     A                   ; Any address given?
  684/F2DE : CA EB F2                           JZ      CE_USE_LAST
  685/F2E1 :                                    
  686/F2E1 : CD 52 F1                           CALL    READ_HEX_WORD       ; Parse address into DE
  687/F2E4 : DA 21 F3                           JC      CE_ERROR            ; Invalid hex
  688/F2E7 : EB                                 XCHG                        ; HL = address to examine
  689/F2E8 : C3 EE F2                           JMP     CE_LOOP
  690/F2EB :                                    
  691/F2EB :                            CE_USE_LAST:
  692/F2EB : 2A D4 00                           LHLD    LAST_EXAM_ADDR
  693/F2EE :                                    
  694/F2EE :                            CE_LOOP:
  695/F2EE : CD F5 F0                           CALL    PRINT_HEX_WORD      ; Print address
  696/F2F1 : 3E 3A                              MVI     A,':'
  697/F2F3 : CD 99 F0                           CALL    CONOUT
  698/F2F6 : 3E 20                              MVI     A,' '
  699/F2F8 : CD 99 F0                           CALL    CONOUT
  700/F2FB : 7E                                 MOV     A,M                 ; Get current byte
  701/F2FC : CD D9 F0                           CALL    PRINT_HEX_BYTE
  702/F2FF : 3E 2D                              MVI     A,'-'
  703/F301 : CD 99 F0                           CALL    CONOUT
  704/F304 :                                    
  705/F304 : CD CF F4                           CALL    READ_EXAM_BYTE      ; Get user input
  706/F307 : DA 18 F3                           JC      CE_EXIT             ; Carry = exit requested
  707/F30A : 78                                 MOV     A,B                 ; Check digit count
  708/F30B : B7                                 ORA     A
  709/F30C : CA 11 F3                           JZ      CE_NEXT             ; No digits = don't modify
  710/F30F : 79                                 MOV     A,C                 ; Get the value from C
  711/F310 : 77                                 MOV     M,A                 ; Store it
  712/F311 :                                    
  713/F311 :                            CE_NEXT:
  714/F311 : 23                                 INX     H
  715/F312 : CD C8 F0                           CALL    PRINT_CRLF
  716/F315 : C3 EE F2                           JMP     CE_LOOP
  717/F318 :                                    
  718/F318 :                            CE_EXIT:
  719/F318 : 22 D4 00                           SHLD    LAST_EXAM_ADDR
  720/F31B : CD C8 F0                           CALL    PRINT_CRLF
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 13 - 12/16/2025 12:51:05


  721/F31E : C3 34 F0                           JMP     MAIN_LOOP
  722/F321 :                                    
  723/F321 :                            CE_ERROR:
  724/F321 : 21 16 F7                           LXI     H,MSG_BAD_ADDR
  725/F324 : CD BE F0                           CALL    PRINT_STRING
  726/F327 : C3 34 F0                           JMP     MAIN_LOOP
  727/F32A :                            
  728/F32A :                            ; CMD_FILL - Fill memory with value
  729/F32A :                            ; Syntax: F start end value
  730/F32A :                            CMD_FILL:
  731/F32A : CD 4A F1                           CALL    SKIP_SPACES
  732/F32D : CD 52 F1                           CALL    READ_HEX_WORD
  733/F330 : DA 5F F3                           JC      CF_ERROR
  734/F333 : D5                                 PUSH    D                   ; Save start
  735/F334 :                                    
  736/F334 : CD 4A F1                           CALL    SKIP_SPACES
  737/F337 : CD 52 F1                           CALL    READ_HEX_WORD
  738/F33A : DA 5E F3                           JC      CF_POP1_ERROR
  739/F33D : D5                                 PUSH    D                   ; Save end
  740/F33E :                                    
  741/F33E : CD 4A F1                           CALL    SKIP_SPACES
  742/F341 : CD 52 F1                           CALL    READ_HEX_WORD
  743/F344 : DA 5D F3                           JC      CF_POP2_ERROR
  744/F347 :                                    
  745/F347 :                                    ; E = value, stack: end, start
  746/F347 : C1                                 POP     B                   ; BC = end
  747/F348 : E1                                 POP     H                   ; HL = start
  748/F349 :                                    
  749/F349 :                            CF_LOOP:
  750/F349 : 73                                 MOV     M,E
  751/F34A : 7C                                 MOV     A,H
  752/F34B : B8                                 CMP     B
  753/F34C : C2 54 F3                           JNZ     CF_NEXT
  754/F34F : 7D                                 MOV     A,L
  755/F350 : B9                                 CMP     C
  756/F351 : CA 5A F3                           JZ      CF_DONE
  757/F354 :                            CF_NEXT:
  758/F354 : 23                                 INX     H
  759/F355 : 7C                                 MOV     A,H
  760/F356 : B5                                 ORA     L                   ; Wrapped to 0000?
  761/F357 : C2 49 F3                           JNZ     CF_LOOP
  762/F35A :                                    ; Wrapped - done
  763/F35A :                            CF_DONE:
  764/F35A : C3 34 F0                           JMP     MAIN_LOOP
  765/F35D :                            
  766/F35D :                            CF_POP2_ERROR:
  767/F35D : D1                                 POP     D
  768/F35E :                            CF_POP1_ERROR:
  769/F35E : D1                                 POP     D
  770/F35F :                            CF_ERROR:
  771/F35F : 21 28 F7                           LXI     H,MSG_BAD_HEX
  772/F362 : CD BE F0                           CALL    PRINT_STRING
  773/F365 : C3 34 F0                           JMP     MAIN_LOOP
  774/F368 :                            
  775/F368 :                            ; CMD_GO - Execute at address
  776/F368 :                            ; Syntax: G [addr]
  777/F368 :                            ; If no address, defaults to 0100H (TPA)
  778/F368 :                            CMD_GO:
  779/F368 : CD 4A F1                           CALL    SKIP_SPACES
  780/F36B : CD 52 F1                           CALL    READ_HEX_WORD       ; Parse address into DE
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 14 - 12/16/2025 12:51:05


  781/F36E : DA 73 F3                           JC      CG_DEFAULT          ; No address given
  782/F371 : EB                                 XCHG                        ; HL = parsed address
  783/F372 : E9                                 PCHL                        ; Jump and never return
  784/F373 :                                    
  785/F373 :                            CG_DEFAULT:
  786/F373 : 21 00 01                           LXI     H,0100H             ; Default to TPA
  787/F376 : E9                                 PCHL
  788/F377 :                            
  789/F377 :                            ; CMD_HEX_MATH - Hex addition and subtraction
  790/F377 :                            ; Syntax: H num1 num2
  791/F377 :                            ; Output: sum difference
  792/F377 :                            CMD_HEX_MATH:
  793/F377 : CD 4A F1                           CALL    SKIP_SPACES
  794/F37A : CD 52 F1                           CALL    READ_HEX_WORD       ; First number -> DE
  795/F37D : DA A6 F3                           JC      CH_ERROR
  796/F380 : D5                                 PUSH    D                   ; Save first number
  797/F381 :                                    
  798/F381 : CD 4A F1                           CALL    SKIP_SPACES
  799/F384 : CD 52 F1                           CALL    READ_HEX_WORD       ; Second number -> DE
  800/F387 : DA A5 F3                           JC      CH_POP_ERROR
  801/F38A :                                    
  802/F38A :                                    ; DE = second, stack = first
  803/F38A : E1                                 POP     H                   ; HL = first
  804/F38B : E5                                 PUSH    H                   ; Save first again
  805/F38C : D5                                 PUSH    D                   ; Save second
  806/F38D :                                    
  807/F38D : 19                                 DAD     D                   ; HL = first + second
  808/F38E : CD F5 F0                           CALL    PRINT_HEX_WORD
  809/F391 : CD D3 F0                           CALL    PRINT_SPACE
  810/F394 :                                    
  811/F394 : D1                                 POP     D                   ; DE = second
  812/F395 : E1                                 POP     H                   ; HL = first
  813/F396 :                                    
  814/F396 :                                    ; HL = first - second
  815/F396 : 7D                                 MOV     A,L
  816/F397 : 93                                 SUB     E
  817/F398 : 6F                                 MOV     L,A
  818/F399 : 7C                                 MOV     A,H
  819/F39A : 9A                                 SBB     D
  820/F39B : 67                                 MOV     H,A
  821/F39C :                                    
  822/F39C : CD F5 F0                           CALL    PRINT_HEX_WORD
  823/F39F : CD C8 F0                           CALL    PRINT_CRLF
  824/F3A2 : C3 34 F0                           JMP     MAIN_LOOP
  825/F3A5 :                            
  826/F3A5 :                            CH_POP_ERROR:
  827/F3A5 : D1                                 POP     D                   ; Clean stack
  828/F3A6 :                            CH_ERROR:
  829/F3A6 : 21 28 F7                           LXI     H,MSG_BAD_HEX
  830/F3A9 : CD BE F0                           CALL    PRINT_STRING
  831/F3AC : C3 34 F0                           JMP     MAIN_LOOP
  832/F3AF :                            
  833/F3AF :                            ; CMD_INPUT - Read from I/O port
  834/F3AF :                            ; Syntax: I port
  835/F3AF :                            CMD_INPUT:
  836/F3AF : CD 4A F1                           CALL    SKIP_SPACES
  837/F3B2 : CD 52 F1                           CALL    READ_HEX_WORD       ; Port -> DE (use E only)
  838/F3B5 : DA C8 F3                           JC      CI_ERROR
  839/F3B8 :                                    
  840/F3B8 : 7B                                 MOV     A,E                 ; Get port number (0-255)
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 15 - 12/16/2025 12:51:05


  841/F3B9 : 32 D7 00                           STA     IO_IN_STUB+1        ; Patch the IN instruction
  842/F3BC : CD D6 00                           CALL    IO_IN_STUB          ; Execute: IN port / RET
  843/F3BF :                                    
  844/F3BF : CD D9 F0                           CALL    PRINT_HEX_BYTE      ; Print result
  845/F3C2 : CD C8 F0                           CALL    PRINT_CRLF
  846/F3C5 : C3 34 F0                           JMP     MAIN_LOOP
  847/F3C8 :                            
  848/F3C8 :                            CI_ERROR:
  849/F3C8 : 21 3C F7                           LXI     H,MSG_BAD_PORT
  850/F3CB : CD BE F0                           CALL    PRINT_STRING
  851/F3CE : C3 34 F0                           JMP     MAIN_LOOP
  852/F3D1 :                            
  853/F3D1 :                            ; CMD_MOVE - Move memory block (forward copy)
  854/F3D1 :                            ; Syntax: M source dest count
  855/F3D1 :                            ; Note: Overlapping regions where dest > source produce undefined results
  856/F3D1 :                            CMD_MOVE:
  857/F3D1 : CD 4A F1                           CALL    SKIP_SPACES
  858/F3D4 : CD 52 F1                           CALL    READ_HEX_WORD
  859/F3D7 : DA 0D F4                           JC      CM_ERROR
  860/F3DA : D5                                 PUSH    D                   ; Save source
  861/F3DB :                                    
  862/F3DB : CD 4A F1                           CALL    SKIP_SPACES
  863/F3DE : CD 52 F1                           CALL    READ_HEX_WORD
  864/F3E1 : DA 0C F4                           JC      CM_POP1_ERROR
  865/F3E4 : D5                                 PUSH    D                   ; Save dest
  866/F3E5 :                                    
  867/F3E5 : CD 4A F1                           CALL    SKIP_SPACES
  868/F3E8 : CD 52 F1                           CALL    READ_HEX_WORD
  869/F3EB : DA 0B F4                           JC      CM_POP2_ERROR
  870/F3EE :                                    
  871/F3EE :                                    ; DE = count, stack: dest, source
  872/F3EE : 7A                                 MOV     A,D
  873/F3EF : B3                                 ORA     E
  874/F3F0 : CA 06 F4                           JZ      CM_DONE_QUICK       ; Zero count
  875/F3F3 :                                    
  876/F3F3 : 42                                 MOV     B,D
  877/F3F4 : 4B                                 MOV     C,E                 ; BC = count
  878/F3F5 : D1                                 POP     D                   ; DE = dest
  879/F3F6 : E1                                 POP     H                   ; HL = source
  880/F3F7 :                                    
  881/F3F7 :                            CM_LOOP:
  882/F3F7 : 7E                                 MOV     A,M                 ; Get source byte
  883/F3F8 : EB                                 XCHG
  884/F3F9 : 77                                 MOV     M,A                 ; Store to dest
  885/F3FA : EB                                 XCHG
  886/F3FB : 23                                 INX     H
  887/F3FC : 13                                 INX     D
  888/F3FD : 0B                                 DCX     B
  889/F3FE : 78                                 MOV     A,B
  890/F3FF : B1                                 ORA     C
  891/F400 : C2 F7 F3                           JNZ     CM_LOOP
  892/F403 : C3 34 F0                           JMP     MAIN_LOOP
  893/F406 :                            
  894/F406 :                            CM_DONE_QUICK:
  895/F406 : D1                                 POP     D
  896/F407 : D1                                 POP     D
  897/F408 : C3 34 F0                           JMP     MAIN_LOOP
  898/F40B :                            
  899/F40B :                            CM_POP2_ERROR:
  900/F40B : D1                                 POP     D
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 16 - 12/16/2025 12:51:05


  901/F40C :                            CM_POP1_ERROR:
  902/F40C : D1                                 POP     D
  903/F40D :                            CM_ERROR:
  904/F40D : 21 28 F7                           LXI     H,MSG_BAD_HEX
  905/F410 : CD BE F0                           CALL    PRINT_STRING
  906/F413 : C3 34 F0                           JMP     MAIN_LOOP
  907/F416 :                            
  908/F416 :                            ; CMD_OUTPUT - Write to I/O port
  909/F416 :                            ; Syntax: O port value
  910/F416 :                            CMD_OUTPUT:
  911/F416 : CD 4A F1                           CALL    SKIP_SPACES
  912/F419 : CD 52 F1                           CALL    READ_HEX_WORD       ; Port -> DE
  913/F41C : DA 33 F4                           JC      CO_ERROR
  914/F41F : 7B                                 MOV     A,E
  915/F420 : 32 DA 00                           STA     IO_OUT_STUB+1       ; Patch port
  916/F423 :                                    
  917/F423 : CD 4A F1                           CALL    SKIP_SPACES
  918/F426 : CD 52 F1                           CALL    READ_HEX_WORD       ; Value -> DE
  919/F429 : DA 33 F4                           JC      CO_ERROR
  920/F42C :                                    
  921/F42C : 7B                                 MOV     A,E                 ; Value to output
  922/F42D : CD D9 00                           CALL    IO_OUT_STUB         ; Execute: OUT port / RET
  923/F430 : C3 34 F0                           JMP     MAIN_LOOP
  924/F433 :                            
  925/F433 :                            CO_ERROR:
  926/F433 : 21 3C F7                           LXI     H,MSG_BAD_PORT
  927/F436 : CD BE F0                           CALL    PRINT_STRING
  928/F439 : C3 34 F0                           JMP     MAIN_LOOP
  929/F43C :                            
  930/F43C :                            ; CMD_SEARCH - Search memory for byte pattern
  931/F43C :                            ; Syntax: S start end b1 [b2 ... b8]
  932/F43C :                            CMD_SEARCH:
  933/F43C :                                    ; Parse start address
  934/F43C : CD 4A F1                           CALL    SKIP_SPACES
  935/F43F : CD 52 F1                           CALL    READ_HEX_WORD
  936/F442 : DA BD F4                           JC      CS_ERROR
  937/F445 : D5                                 PUSH    D                   ; Save start on stack
  938/F446 :                                    
  939/F446 :                                    ; Parse end address
  940/F446 : CD 4A F1                           CALL    SKIP_SPACES
  941/F449 : CD 52 F1                           CALL    READ_HEX_WORD
  942/F44C : DA BC F4                           JC      CS_POP1_ERROR
  943/F44F : EB                                 XCHG
  944/F450 : 22 E5 00                           SHLD    SEARCH_END          ; Store end address
  945/F453 : EB                                 XCHG
  946/F454 :                                    
  947/F454 :                                    ; Parse pattern bytes (1-8)
  948/F454 : 11 DC 00                           LXI     D,SEARCH_PATTERN    ; DE = pattern buffer
  949/F457 : 01 00 00                           LXI     B,0                 ; B = byte count
  950/F45A :                                    
  951/F45A :                            CS_PARSE_LOOP:
  952/F45A : CD 4A F1                           CALL    SKIP_SPACES
  953/F45D : 7E                                 MOV     A,M
  954/F45E : B7                                 ORA     A                   ; End of line?
  955/F45F : CA 76 F4                           JZ      CS_PARSE_DONE
  956/F462 :                                    
  957/F462 : C5                                 PUSH    B                   ; Save count
  958/F463 : D5                                 PUSH    D                   ; Save pattern pointer
  959/F464 : CD 52 F1                           CALL    READ_HEX_WORD       ; Value in DE (use E only)
  960/F467 : 7B                                 MOV     A,E                 ; Get the byte
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 17 - 12/16/2025 12:51:05


  961/F468 : D1                                 POP     D                   ; Restore pattern pointer
  962/F469 : C1                                 POP     B                   ; Restore count
  963/F46A : DA 76 F4                           JC      CS_PARSE_DONE       ; No more valid hex
  964/F46D :                                    
  965/F46D : 12                                 STAX    D                   ; Store byte in pattern
  966/F46E : 13                                 INX     D
  967/F46F : 04                                 INR     B
  968/F470 :                                    
  969/F470 : 78                                 MOV     A,B
  970/F471 : FE 08                              CPI     8                   ; Max 8 bytes
  971/F473 : DA 5A F4                           JC      CS_PARSE_LOOP
  972/F476 :                                    
  973/F476 :                            CS_PARSE_DONE:
  974/F476 : 78                                 MOV     A,B
  975/F477 : B7                                 ORA     A                   ; Zero bytes?
  976/F478 : CA BC F4                           JZ      CS_POP1_ERROR       ; Error - need at least 1
  977/F47B :                                    
  978/F47B : 32 E4 00                           STA     SEARCH_LENGTH       ; Save pattern length
  979/F47E : E1                                 POP     H                   ; HL = start address
  980/F47F :                                    
  981/F47F :                                    ; Search loop
  982/F47F :                                    ; Register usage: HL = current search address
  983/F47F :                            CS_SEARCH_LOOP:
  984/F47F :                                    ; Compare pattern at current address
  985/F47F : E5                                 PUSH    H                   ; Save current address
  986/F480 : 11 DC 00                           LXI     D,SEARCH_PATTERN    ; DE = pattern
  987/F483 : 3A E4 00                           LDA     SEARCH_LENGTH
  988/F486 : 47                                 MOV     B,A                 ; B = length counter
  989/F487 :                                    
  990/F487 :                            CS_COMPARE:
  991/F487 : 1A                                 LDAX    D                   ; A = pattern byte
  992/F488 : BE                                 CMP     M                   ; Compare with memory
  993/F489 : C2 9A F4                           JNZ     CS_NO_MATCH
  994/F48C : 23                                 INX     H
  995/F48D : 13                                 INX     D
  996/F48E : 05                                 DCR     B
  997/F48F : C2 87 F4                           JNZ     CS_COMPARE
  998/F492 :                                    
  999/F492 :                                    ; Match found - print address
 1000/F492 : E1                                 POP     H                   ; Restore search address
 1001/F493 : E5                                 PUSH    H                   ; Keep it on stack for advance
 1002/F494 : CD F5 F0                           CALL    PRINT_HEX_WORD
 1003/F497 : CD C8 F0                           CALL    PRINT_CRLF
 1004/F49A :                                    
 1005/F49A :                            CS_NO_MATCH:
 1006/F49A : E1                                 POP     H                   ; HL = current search position
 1007/F49B :                                    
 1008/F49B :                                    ; Put current in DE, end in HL for comparison
 1009/F49B : EB                                 XCHG                        ; DE = current
 1010/F49C : 2A E5 00                           LHLD    SEARCH_END          ; HL = end
 1011/F49F :                                    
 1012/F49F :                                    ; Check: current > end?
 1013/F49F : 7C                                 MOV     A,H
 1014/F4A0 : BA                                 CMP     D
 1015/F4A1 : DA B9 F4                           JC      CS_DONE             ; end.H < current.H, done
 1016/F4A4 : C2 AC F4                           JNZ     CS_ADVANCE          ; end.H > current.H, continue
 1017/F4A7 : 7D                                 MOV     A,L
 1018/F4A8 : BB                                 CMP     E
 1019/F4A9 : DA B9 F4                           JC      CS_DONE             ; end.L < current.L, done
 1020/F4AC :                                    
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 18 - 12/16/2025 12:51:05


 1021/F4AC :                            CS_ADVANCE:
 1022/F4AC : EB                                 XCHG                        ; HL = current, DE = end (D = end.H)
 1023/F4AD : 23                                 INX     H                   ; Next address
 1024/F4AE :                                    
 1025/F4AE :                                    ; Wrap check: H==0 and end.H >= F0 means we wrapped past FFFF
 1026/F4AE : 7C                                 MOV     A,H
 1027/F4AF : B7                                 ORA     A
 1028/F4B0 : C2 7F F4                           JNZ     CS_SEARCH_LOOP      ; H != 0, no wrap
 1029/F4B3 : 7A                                 MOV     A,D                 ; D still has end.H from XCHG
 1030/F4B4 : FE F0                              CPI     0F0H
 1031/F4B6 : DA 7F F4                           JC      CS_SEARCH_LOOP      ; end < F000, no wrap concern
 1032/F4B9 :                                    ; Fell through = wrapped past FFFF
 1033/F4B9 :                                    
 1034/F4B9 :                            CS_DONE:
 1035/F4B9 : C3 34 F0                           JMP     MAIN_LOOP
 1036/F4BC :                            
 1037/F4BC :                            CS_POP1_ERROR:
 1038/F4BC : D1                                 POP     D
 1039/F4BD :                            CS_ERROR:
 1040/F4BD : 21 28 F7                           LXI     H,MSG_BAD_HEX
 1041/F4C0 : CD BE F0                           CALL    PRINT_STRING
 1042/F4C3 : C3 34 F0                           JMP     MAIN_LOOP
 1043/F4C6 :                            
 1044/F4C6 :                            ; CMD_HELP - Show help
 1045/F4C6 :                            ; Syntax: ?
 1046/F4C6 :                            CMD_HELP:
 1047/F4C6 : 21 64 F5                           LXI     H,MSG_HELP
 1048/F4C9 : CD BE F0                           CALL    PRINT_STRING
 1049/F4CC : C3 34 F0                           JMP     MAIN_LOOP
 1050/F4CF :                            
 1051/F4CF :                            ; ============================================
 1052/F4CF :                            ; HELPER ROUTINES
 1053/F4CF :                            ; ============================================
 1054/F4CF :                            
 1055/F4CF :                            ; READ_EXAM_BYTE - Read byte value for examine command
 1056/F4CF :                            ; Reads up to 2 hex digits from console
 1057/F4CF :                            ; Output: Carry set = exit (period pressed)
 1058/F4CF :                            ;         Carry clear: B = digit count, C = value
 1059/F4CF :                            ;         (caller checks B: 0 = no modification, >0 = store C)
 1060/F4CF :                            ; Trashes: A, B, C, D, flags
 1061/F4CF :                            READ_EXAM_BYTE:
 1062/F4CF : 06 00                              MVI     B,0                 ; Digit count
 1063/F4D1 : 0E 00                              MVI     C,0                 ; Accumulated value
 1064/F4D3 :                                    
 1065/F4D3 :                            REB_LOOP:
 1066/F4D3 : CD A5 F0                           CALL    CONIN
 1067/F4D6 : 57                                 MOV     D,A                 ; Save original for echo
 1068/F4D7 :                                    
 1069/F4D7 : FE 2E                              CPI     '.'                 ; Exit?
 1070/F4D9 : CA 08 F5                           JZ      REB_EXIT
 1071/F4DC : FE 0D                              CPI     CR                  ; Enter?
 1072/F4DE : CA 06 F5                           JZ      REB_DONE
 1073/F4E1 : FE 0A                              CPI     LF                  ; Also LF
 1074/F4E3 : CA 06 F5                           JZ      REB_DONE
 1075/F4E6 : FE 08                              CPI     BS                  ; Backspace?
 1076/F4E8 : CA 0A F5                           JZ      REB_BS
 1077/F4EB :                                    
 1078/F4EB : CD 85 F1                           CALL    TO_HEX_DIGIT        ; Convert to 0-15
 1079/F4EE : DA D3 F4                           JC      REB_LOOP            ; Not hex, ignore
 1080/F4F1 :                                    
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 19 - 12/16/2025 12:51:05


 1081/F4F1 :                                    ; Valid hex digit in A
 1082/F4F1 : F5                                 PUSH    PSW
 1083/F4F2 : 79                                 MOV     A,C
 1084/F4F3 : 87                                 ADD     A                   ; Shift left 4
 1085/F4F4 : 87                                 ADD     A
 1086/F4F5 : 87                                 ADD     A
 1087/F4F6 : 87                                 ADD     A
 1088/F4F7 : 4F                                 MOV     C,A
 1089/F4F8 : F1                                 POP     PSW
 1090/F4F9 : B1                                 ORA     C                   ; Add new digit
 1091/F4FA : 4F                                 MOV     C,A
 1092/F4FB :                                    
 1093/F4FB : 04                                 INR     B                   ; Count digit
 1094/F4FC : 7A                                 MOV     A,D                 ; Echo original char
 1095/F4FD : CD 99 F0                           CALL    CONOUT
 1096/F500 :                                    
 1097/F500 : 78                                 MOV     A,B
 1098/F501 : FE 02                              CPI     2                   ; Two digits entered?
 1099/F503 : DA D3 F4                           JC      REB_LOOP            ; No, keep reading
 1100/F506 :                                    ; 2 digits entered - just return, let CR/LF be next empty input
 1101/F506 :                                    
 1102/F506 :                            REB_DONE:
 1103/F506 :                                    ; Carry clear, B = digit count, C = value
 1104/F506 : B7                                 ORA     A                   ; Clear carry
 1105/F507 : C9                                 RET
 1106/F508 :                                    
 1107/F508 :                            REB_EXIT:
 1108/F508 : 37                                 STC                         ; Set carry = exit
 1109/F509 : C9                                 RET
 1110/F50A :                                    
 1111/F50A :                            REB_BS:
 1112/F50A : 78                                 MOV     A,B
 1113/F50B : B7                                 ORA     A
 1114/F50C : CA D3 F4                           JZ      REB_LOOP            ; Nothing to delete
 1115/F50F :                                    
 1116/F50F : 05                                 DCR     B
 1117/F510 : 79                                 MOV     A,C                 ; Undo the shift
 1118/F511 : 0F                                 RRC
 1119/F512 : 0F                                 RRC
 1120/F513 : 0F                                 RRC
 1121/F514 : 0F                                 RRC
 1122/F515 : E6 0F                              ANI     0FH
 1123/F517 : 4F                                 MOV     C,A
 1124/F518 :                                    
 1125/F518 : 3E 08                              MVI     A,BS                ; Erase on screen
 1126/F51A : CD 99 F0                           CALL    CONOUT
 1127/F51D : 3E 20                              MVI     A,' '
 1128/F51F : CD 99 F0                           CALL    CONOUT
 1129/F522 : 3E 08                              MVI     A,BS
 1130/F524 : CD 99 F0                           CALL    CONOUT
 1131/F527 : C3 D3 F4                           JMP     REB_LOOP
 1132/F52A :                            
 1133/F52A :                            ; ============================================
 1134/F52A :                            ; STRINGS
 1135/F52A :                            ; ============================================
 1136/F52A :                            
 1137/F52A :                            MSG_BANNER:
 1138/F52A : 0D 0A                              DB      CR,LF
 1139/F52C : 38 30 38 30 20 4D 6F 6E 69         DB      "8080 Monitor v0.2",CR,LF
      F535 : 74 6F 72 20 76 30 2E 32 0D
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 20 - 12/16/2025 12:51:05


      F53E : 0A                        
 1140/F53F : 42 75 69 6C 74 3A 20 31 32         DB      'Built: ', DATE, ' ', TIME, CR, LF
      F548 : 2F 31 36 2F 32 30 32 35 20
      F551 : 31 32 3A 35 31 3A 30 35 0D
      F55A : 0A                        
 1141/F55B : 52 65 61 64 79 2E 0D 0A            DB      "Ready.",CR,LF
 1142/F563 : 00                                 DB      0
 1143/F564 :                            
 1144/F564 :                            MSG_HELP:
 1145/F564 : 43 6F 6D 6D 61 6E 64 73 3A         DB      "Commands:",CR,LF
      F56D : 0D 0A                     
 1146/F56F : 20 20 43 20 73 74 61 72 74         DB      "  C start end dest - Compare memory",CR,LF
      F578 : 20 65 6E 64 20 64 65 73 74
      F581 : 20 2D 20 43 6F 6D 70 61 72
      F58A : 65 20 6D 65 6D 6F 72 79 0D
      F593 : 0A                        
 1147/F594 : 20 20 44 20 5B 73 74 61 72         DB      "  D [start] [end]  - Dump memory",CR,LF
      F59D : 74 5D 20 5B 65 6E 64 5D 20
      F5A6 : 20 2D 20 44 75 6D 70 20 6D
      F5AF : 65 6D 6F 72 79 0D 0A      
 1148/F5B6 : 20 20 45 20 5B 61 64 64 72         DB      "  E [addr]         - Examine/modify",CR,LF
      F5BF : 5D 20 20 20 20 20 20 20 20
      F5C8 : 20 2D 20 45 78 61 6D 69 6E
      F5D1 : 65 2F 6D 6F 64 69 66 79 0D
      F5DA : 0A                        
 1149/F5DB : 20 20 46 20 73 74 61 72 74         DB      "  F start end val  - Fill memory",CR,LF
      F5E4 : 20 65 6E 64 20 76 61 6C 20
      F5ED : 20 2D 20 46 69 6C 6C 20 6D
      F5F6 : 65 6D 6F 72 79 0D 0A      
 1150/F5FD : 20 20 47 20 5B 61 64 64 72         DB      "  G [addr]         - Go (execute)",CR,LF
      F606 : 5D 20 20 20 20 20 20 20 20
      F60F : 20 2D 20 47 6F 20 28 65 78
      F618 : 65 63 75 74 65 29 0D 0A   
 1151/F620 : 20 20 48 20 6E 75 6D 31 20         DB      "  H num1 num2      - Hex math (+/-)",CR,LF
      F629 : 6E 75 6D 32 20 20 20 20 20
      F632 : 20 2D 20 48 65 78 20 6D 61
      F63B : 74 68 20 28 2B 2F 2D 29 0D
      F644 : 0A                        
 1152/F645 : 20 20 49 20 70 6F 72 74 20         DB      "  I port           - Input from port",CR,LF
      F64E : 20 20 20 20 20 20 20 20 20
      F657 : 20 2D 20 49 6E 70 75 74 20
      F660 : 66 72 6F 6D 20 70 6F 72 74
      F669 : 0D 0A                     
 1153/F66B : 20 20 4D 20 73 72 63 20 64         DB      "  M src dst cnt    - Move memory",CR,LF
      F674 : 73 74 20 63 6E 74 20 20 20
      F67D : 20 2D 20 4D 6F 76 65 20 6D
      F686 : 65 6D 6F 72 79 0D 0A      
 1154/F68D : 20 20 4F 20 70 6F 72 74 20         DB      "  O port value     - Output to port",CR,LF
      F696 : 76 61 6C 75 65 20 20 20 20
      F69F : 20 2D 20 4F 75 74 70 75 74
      F6A8 : 20 74 6F 20 70 6F 72 74 0D
      F6B1 : 0A                        
 1155/F6B2 : 20 20 53 20 73 74 61 72 74         DB      "  S start end pat  - Search memory",CR,LF
      F6BB : 20 65 6E 64 20 70 61 74 20
      F6C4 : 20 2D 20 53 65 61 72 63 68
      F6CD : 20 6D 65 6D 6F 72 79 0D 0A
 1156/F6D6 : 20 20 3F 20 20 20 20 20 20         DB      "  ?                - Help",CR,LF
      F6DF : 20 20 20 20 20 20 20 20 20
      F6E8 : 20 2D 20 48 65 6C 70 0D 0A
 1157/F6F1 : 00                                 DB      0
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 21 - 12/16/2025 12:51:05


 1158/F6F2 :                            
 1159/F6F2 :                            MSG_UNKNOWN:
 1160/F6F2 : 55 6E 6B 6E 6F 77 6E 20 63         DB      "Unknown command. Type ? for help.",CR,LF,0
      F6FB : 6F 6D 6D 61 6E 64 2E 20 54
      F704 : 79 70 65 20 3F 20 66 6F 72
      F70D : 20 68 65 6C 70 2E 0D 0A 00
 1161/F716 :                            
 1162/F716 :                            MSG_BAD_ADDR:
 1163/F716 : 49 6E 76 61 6C 69 64 20 61         DB      "Invalid address",CR,LF,0
      F71F : 64 64 72 65 73 73 0D 0A 00
 1164/F728 :                            
 1165/F728 :                            MSG_BAD_HEX:
 1166/F728 : 49 6E 76 61 6C 69 64 20 68         DB      "Invalid hex value",CR,LF,0
      F731 : 65 78 20 76 61 6C 75 65 0D
      F73A : 0A 00                     
 1167/F73C :                            
 1168/F73C :                            MSG_BAD_PORT:
 1169/F73C : 49 6E 76 61 6C 69 64 20 70         DB      "Invalid port/value",CR,LF,0
      F745 : 6F 72 74 2F 76 61 6C 75 65
      F74E : 0D 0A 00                  
 1170/F751 :                            
 1171/F751 :                            ; ============================================
 1172/F751 :                            ; PADDING
 1173/F751 :                            ; ============================================
 1174/F751 :                            
 1175/F751 : =>FALSE                            IF      $ > 0FFFFH
 1176/F751 :                                    ERROR   "ROM exceeds 4KB!"
 1177/F751 : [1175]                             ENDIF
 1178/F751 :                            
 1179/F751 :                                    END     COLD_START
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 22 - 12/16/2025 12:51:05


  Symbol Table (* = unused):
  --------------------------

*ARCHITECTURE :                                      "aarch64-apple-darwin" - |
 BOOT_CONTINUE :              0F007 C |  BS :                             8 - |
*BUFFER_PTR :                   0D0 - | *CASESENSITIVE :                  0 - |
 CC_ADVANCE :                 0F20D C |  CC_ERROR :                   0F21A C |
 CC_LOOP :                    0F1D9 C |  CC_NEXT :                    0F20B C |
 CC_POP1_ERROR :              0F219 C |  CC_POP2_ERROR :              0F218 C |
 CD_ASCII :                   0F29D C |  CD_DONE :                    0F2D2 C |
 CD_DOT :                     0F2A8 C |  CD_DUMP_RANGE :              0F273 C |
 CD_ERROR :                   0F26A C |  CD_HEX_BYTE :                0F282 C |
 CD_LINE :                    0F274 C |  CD_NO_ARGS :                 0F244 C |
 CD_NO_GAP :                  0F292 C |  CD_NO_WRAP1 :                0F251 C |
 CD_NO_WRAP2 :                0F264 C |  CD_NO_WRAP3 :                0F2C2 C |
 CD_ONE_ARG :                 0F258 C |  CD_POP_ERROR :               0F269 C |
 CD_PRINT_CHAR :              0F2AA C |  CE_ERROR :                   0F321 C |
 CE_EXIT :                    0F318 C |  CE_LOOP :                    0F2EE C |
 CE_NEXT :                    0F311 C |  CE_USE_LAST :                0F2EB C |
 CF_DONE :                    0F35A C |  CF_ERROR :                   0F35F C |
 CF_LOOP :                    0F349 C |  CF_NEXT :                    0F354 C |
 CF_POP1_ERROR :              0F35E C |  CF_POP2_ERROR :              0F35D C |
 CG_DEFAULT :                 0F373 C |  CH_ERROR :                   0F3A6 C |
 CH_POP_ERROR :               0F3A5 C |  CI_ERROR :                   0F3C8 C |
 CMD_COMPARE :                0F1AF C |  CMD_DUMP :                   0F223 C |
 CMD_EXAMINE :                0F2D9 C |  CMD_FILL :                   0F32A C |
 CMD_GO :                     0F368 C |  CMD_HELP :                   0F4C6 C |
 CMD_HEX_MATH :               0F377 C |  CMD_INPUT :                  0F3AF C |
 CMD_MOVE :                   0F3D1 C |  CMD_OUTPUT :                 0F416 C |
 CMD_SEARCH :                 0F43C C |  CM_DONE_QUICK :              0F406 C |
 CM_ERROR :                   0F40D C |  CM_LOOP :                    0F3F7 C |
 CM_POP1_ERROR :              0F40C C |  CM_POP2_ERROR :              0F40B C |
 COLD_START :                 0F000 C |  CONIN :                      0F0A5 C |
 CONOUT :                     0F099 C |  CONOUT_WAIT :                0F09A C |
 CONSOLE_DATA_IN :                1 - |  CONSOLE_DATA_OUT :               0 - |
 CONSOLE_STATUS :                 2 - | *CONST :                      0F0AF C |
*CONSTPI :        3.141592653589793 - |  CO_ERROR :                   0F433 C |
 CR :                            0D - |  CS_ADVANCE :                 0F4AC C |
 CS_COMPARE :                 0F487 C |  CS_DONE :                    0F4B9 C |
 CS_ERROR :                   0F4BD C |  CS_NO_MATCH :                0F49A C |
 CS_PARSE_DONE :              0F476 C |  CS_PARSE_LOOP :              0F45A C |
 CS_POP1_ERROR :              0F4BC C |  CS_SEARCH_LOOP :             0F47F C |
 DATE :                "12/16/2025" - | *FALSE :                          0 - |
*FLOATMAX :      1.797693134866E308 - | *HAS64 :                          1 - |
 IO_IN_STUB :                   0D6 - |  IO_OUT_STUB :                  0D9 - |
 LAST_DUMP_ADDR :               0D2 - |  LAST_EXAM_ADDR :               0D4 - |
 LF :                            0A - |  LINE_BUFFER :                   80 - |
 LINE_LENGTH :                   50 - | *LISTON :                         1 - |
*MACEXP :                         7 - |  MAIN_LOOP :                  0F034 C |
*MOMCPU :                      8080 - | *MOMCPUNAME :                "8080" - |
 MSG_BAD_ADDR :               0F716 C |  MSG_BAD_HEX :                0F728 C |
 MSG_BAD_PORT :               0F73C C |  MSG_BANNER :                 0F52A C |
 MSG_HELP :                   0F564 C |  MSG_UNKNOWN :                0F6F2 C |
*NESTMAX :                      100 - |  NOT_LOWER :                  0F058 C |
 PHN_DIGIT :                  0F0EF C |  PRINT_BANNER :               0F0B7 C |
 PRINT_CRLF :                 0F0C8 C |  PRINT_HEX_BYTE :             0F0D9 C |
 PRINT_HEX_NIBBLE :           0F0E6 C |  PRINT_HEX_WORD :             0F0F5 C |
 PRINT_SPACE :                0F0D3 C |  PRINT_STRING :               0F0BE C |
 READ_EXAM_BYTE :             0F4CF C |  READ_HEX_WORD :              0F152 C |
 READ_LINE :                  0F0FE C |  REB_BS :                     0F50A C |
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 23 - 12/16/2025 12:51:05


 REB_DONE :                   0F506 C |  REB_EXIT :                   0F508 C |
 REB_LOOP :                   0F4D3 C | *RELAXED :                        0 - |
 RHW_DONE :                   0F17F C |  RHW_LOOP :                   0F15A C |
 RL_BACKSPACE :               0F12B C |  RL_DONE :                    0F144 C |
 RL_LOOP :                    0F103 C |  SEARCH_END :                   0E5 - |
 SEARCH_LENGTH :                0E4 - |  SEARCH_PATTERN :               0DC - |
 SKIP_SPACES :                0F14A C |  SPACE :                         20 - |
 STACK_TOP :                  0F000 - |  SYSTEM_CONTROL :               0FE - |
 THD_ALPHA :                  0F1A5 C |  THD_DIGIT :                  0F1A9 C |
 THD_FAIL :                   0F1AD C |  TIME :                  "12:51:05" - |
 TO_HEX_DIGIT :               0F185 C | *TRUE :                           1 - |
*VERSION :                     142F - | *Z80SYNTAX :                      0 - |

    137 symbols
     17 unused symbols

 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 24 - 12/16/2025 12:51:05


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.01 seconds assembly time

   1179 lines source file
      2 passes
      0 errors
      0 warnings
