 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 1 - 12/11/2025 19:06:00


    1/   0 :                            ; monitor.asm - Intel 8080 Monitor ROM
    2/   0 :                            ; Assemble with: make
    3/   0 :                            ; 
    4/   0 :                            ; Memory Map:
    5/   0 :                            ;   0x0000-0x00FF: System workspace (RAM)
    6/   0 :                            ;   0x0100-0xEFFF: User program area (RAM)
    7/   0 :                            ;   0xF000-0xFFFF: Monitor ROM (this file)
    8/   0 :                            ;
    9/   0 :                            ; I/O Ports:
   10/   0 :                            ;   0x00: Console data out (write only)
   11/   0 :                            ;   0x01: Console data in (read only)
   12/   0 :                            ;   0x02: Console status (bit 0 = RX ready, bit 1 = TX ready)
   13/   0 :                            
   14/   0 :                                    CPU     8080
   15/F000 :                                    ORG     0F000H
   16/F000 :                            
   17/F000 :                            ; ============================================
   18/F000 :                            ; CONSTANTS
   19/F000 :                            ; ============================================
   20/F000 :                            
   21/F000 : =0H                        CONSOLE_DATA_OUT    EQU     00H
   22/F000 : =1H                        CONSOLE_DATA_IN     EQU     01H
   23/F000 : =2H                        CONSOLE_STATUS      EQU     02H
   24/F000 :                            
   25/F000 : =0F000H                    STACK_TOP       EQU     0F000H      ; Stack grows down from ROM
   26/F000 :                            
   27/F000 : =0DH                       CR              EQU     0DH
   28/F000 : =0AH                       LF              EQU     0AH
   29/F000 : =8H                        BS              EQU     08H
   30/F000 : =20H                       SPACE           EQU     20H
   31/F000 :                            
   32/F000 :                            ; ============================================
   33/F000 :                            ; WORKSPACE (RAM at 0x0080-0x00FF)
   34/F000 :                            ; ============================================
   35/F000 :                            
   36/F000 : =80H                       LINE_BUFFER     EQU     0080H       ; 80 bytes for command line
   37/F000 : =50H                       LINE_LENGTH     EQU     80          ; Max 80 chars
   38/F000 : =0D0H                      BUFFER_PTR      EQU     00D0H       ; Current position in buffer (2 bytes)
   39/F000 : =0D2H                      LAST_DUMP_ADDR  EQU     00D2H       ; Last dump address (2 bytes)
   40/F000 : =0D4H                      LAST_EXAM_ADDR  EQU     00D4H       ; Last examine address (2 bytes)
   41/F000 :                            
   42/F000 :                            ; I/O stubs (self-modifying code)
   43/F000 : =0D6H                      IO_IN_STUB      EQU     00D6H       ; 3 bytes: IN xx / RET
   44/F000 : =0D9H                      IO_OUT_STUB     EQU     00D9H       ; 3 bytes: OUT xx / RET
   45/F000 :                            
   46/F000 :                            ; ============================================
   47/F000 :                            ; COLD START
   48/F000 :                            ; ============================================
   49/F000 :                            
   50/F000 :                            COLD_START:
   51/F000 : 31 00 F0                           LXI     SP,STACK_TOP        ; Initialize stack pointer
   52/F003 :                                    
   53/F003 :                                    ; Initialize workspace
   54/F003 : 21 00 00                           LXI     H,0000H
   55/F006 : 22 D2 00                           SHLD    LAST_DUMP_ADDR      ; Default dump address = 0
   56/F009 : 22 D4 00                           SHLD    LAST_EXAM_ADDR      ; Default exam address = 0
   57/F00C :                                    
   58/F00C :                                    ; Initialize I/O stubs
   59/F00C : 3E DB                              MVI     A,0DBH              ; IN opcode
   60/F00E : 32 D6 00                           STA     IO_IN_STUB
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 2 - 12/11/2025 19:06:00


   61/F011 : 3E 00                              MVI     A,00H               ; Default port 0
   62/F013 : 32 D7 00                           STA     IO_IN_STUB+1
   63/F016 : 3E C9                              MVI     A,0C9H              ; RET opcode
   64/F018 : 32 D8 00                           STA     IO_IN_STUB+2
   65/F01B :                                    
   66/F01B : 3E D3                              MVI     A,0D3H              ; OUT opcode
   67/F01D : 32 D9 00                           STA     IO_OUT_STUB
   68/F020 : 3E 00                              MVI     A,00H               ; Default port 0
   69/F022 : 32 DA 00                           STA     IO_OUT_STUB+1
   70/F025 : 3E C9                              MVI     A,0C9H              ; RET opcode
   71/F027 : 32 DB 00                           STA     IO_OUT_STUB+2
   72/F02A :                                    
   73/F02A : CD 9C F0                           CALL    PRINT_BANNER        ; Show startup message
   74/F02D :                            
   75/F02D :                            ; ============================================
   76/F02D :                            ; MAIN LOOP
   77/F02D :                            ; ============================================
   78/F02D :                            
   79/F02D :                            MAIN_LOOP:
   80/F02D : 3E 3E                              MVI     A,'>'               ; Print prompt
   81/F02F : CD 7E F0                           CALL    CONOUT
   82/F032 : 3E 20                              MVI     A,' '
   83/F034 : CD 7E F0                           CALL    CONOUT
   84/F037 :                                    
   85/F037 : CD E3 F0                           CALL    READ_LINE           ; Read command into LINE_BUFFER
   86/F03A :                                    
   87/F03A : 21 80 00                           LXI     H,LINE_BUFFER       ; Point to start of buffer
   88/F03D : CD 2F F1                           CALL    SKIP_SPACES         ; Skip leading spaces
   89/F040 :                                    
   90/F040 : 7E                                 MOV     A,M                 ; Get command character
   91/F041 : B7                                 ORA     A                   ; Empty line?
   92/F042 : CA 2D F0                           JZ      MAIN_LOOP           ; Yes, just prompt again
   93/F045 :                                    
   94/F045 :                                    ; Convert to uppercase if lowercase
   95/F045 : FE 61                              CPI     'a'
   96/F047 : DA 51 F0                           JC      NOT_LOWER
   97/F04A : FE 7B                              CPI     'z'+1
   98/F04C : D2 51 F0                           JNC     NOT_LOWER
   99/F04F : D6 20                              SUI     20H                 ; Convert to uppercase
  100/F051 :                            NOT_LOWER:
  101/F051 :                                    
  102/F051 : 23                                 INX     H                   ; Point past command char
  103/F052 :                                    
  104/F052 :                                    ; Command dispatch
  105/F052 : FE 44                              CPI     'D'
  106/F054 : CA 94 F1                           JZ      CMD_DUMP
  107/F057 : FE 45                              CPI     'E'
  108/F059 : CA 33 F2                           JZ      CMD_EXAMINE
  109/F05C : FE 47                              CPI     'G'
  110/F05E : CA 84 F2                           JZ      CMD_GO
  111/F061 : FE 48                              CPI     'H'
  112/F063 : CA 93 F2                           JZ      CMD_HEX_MATH
  113/F066 : FE 49                              CPI     'I'
  114/F068 : CA CB F2                           JZ      CMD_INPUT
  115/F06B : FE 4F                              CPI     'O'
  116/F06D : CA ED F2                           JZ      CMD_OUTPUT
  117/F070 : FE 3F                              CPI     '?'
  118/F072 : CA 13 F3                           JZ      CMD_HELP
  119/F075 :                                    
  120/F075 :                                    ; Unknown command
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 3 - 12/11/2025 19:06:00


  121/F075 : 21 AD F4                           LXI     H,MSG_UNKNOWN
  122/F078 : CD A3 F0                           CALL    PRINT_STRING
  123/F07B : C3 2D F0                           JMP     MAIN_LOOP
  124/F07E :                            
  125/F07E :                            ; ============================================
  126/F07E :                            ; CONSOLE I/O ROUTINES
  127/F07E :                            ; ============================================
  128/F07E :                            
  129/F07E :                            ; CONOUT - Output character in A
  130/F07E :                            ; Preserves: all registers
  131/F07E :                            CONOUT:
  132/F07E : F5                                 PUSH    PSW
  133/F07F :                            CONOUT_WAIT:
  134/F07F : DB 02                              IN      CONSOLE_STATUS
  135/F081 : E6 02                              ANI     02H
  136/F083 : CA 7F F0                           JZ      CONOUT_WAIT
  137/F086 : F1                                 POP     PSW
  138/F087 : D3 00                              OUT     CONSOLE_DATA_OUT
  139/F089 : C9                                 RET
  140/F08A :                            
  141/F08A :                            ; CONIN - Input character to A
  142/F08A :                            ; Trashes: flags
  143/F08A :                            CONIN:
  144/F08A : DB 02                              IN      CONSOLE_STATUS
  145/F08C : E6 01                              ANI     01H
  146/F08E : CA 8A F0                           JZ      CONIN
  147/F091 : DB 01                              IN      CONSOLE_DATA_IN
  148/F093 : C9                                 RET
  149/F094 :                            
  150/F094 :                            ; CONST - Console status
  151/F094 :                            ; Returns: A = 0xFF if char available, 0x00 if not
  152/F094 :                            ; Trashes: flags
  153/F094 :                            CONST:
  154/F094 : DB 02                              IN      CONSOLE_STATUS
  155/F096 : E6 01                              ANI     01H
  156/F098 : C8                                 RZ                          ; Return 0 if no char
  157/F099 : 3E FF                              MVI     A,0FFH              ; Return FF if char available
  158/F09B : C9                                 RET
  159/F09C :                            
  160/F09C :                            ; ============================================
  161/F09C :                            ; PRINT ROUTINES
  162/F09C :                            ; ============================================
  163/F09C :                            
  164/F09C :                            ; PRINT_BANNER - Display startup message
  165/F09C :                            ; Trashes: A, HL, flags
  166/F09C :                            PRINT_BANNER:
  167/F09C : 21 72 F3                           LXI     H,MSG_BANNER
  168/F09F : CD A3 F0                           CALL    PRINT_STRING
  169/F0A2 : C9                                 RET
  170/F0A3 :                            
  171/F0A3 :                            ; PRINT_STRING - Print null-terminated string at HL
  172/F0A3 :                            ; Trashes: A, HL, flags
  173/F0A3 :                            PRINT_STRING:
  174/F0A3 : 7E                                 MOV     A,M                 ; Get character
  175/F0A4 : B7                                 ORA     A                   ; Check for null
  176/F0A5 : C8                                 RZ                          ; Return if end of string
  177/F0A6 : CD 7E F0                           CALL    CONOUT
  178/F0A9 : 23                                 INX     H
  179/F0AA : C3 A3 F0                           JMP     PRINT_STRING
  180/F0AD :                            
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 4 - 12/11/2025 19:06:00


  181/F0AD :                            ; PRINT_CRLF - Print carriage return and line feed
  182/F0AD :                            ; Trashes: A, flags
  183/F0AD :                            PRINT_CRLF:
  184/F0AD : 3E 0D                              MVI     A,CR
  185/F0AF : CD 7E F0                           CALL    CONOUT
  186/F0B2 : 3E 0A                              MVI     A,LF
  187/F0B4 : CD 7E F0                           CALL    CONOUT
  188/F0B7 : C9                                 RET
  189/F0B8 :                            
  190/F0B8 :                            ; PRINT_SPACE - Print a space
  191/F0B8 :                            ; Trashes: A, flags
  192/F0B8 :                            PRINT_SPACE:
  193/F0B8 : 3E 20                              MVI     A,SPACE
  194/F0BA : CD 7E F0                           CALL    CONOUT
  195/F0BD : C9                                 RET
  196/F0BE :                            
  197/F0BE :                            ; PRINT_HEX_BYTE - Print A as two hex digits
  198/F0BE :                            ; Input: A = byte to print
  199/F0BE :                            ; Trashes: A, flags
  200/F0BE :                            PRINT_HEX_BYTE:
  201/F0BE : F5                                 PUSH    PSW                 ; Save original byte
  202/F0BF : 0F                                 RRC                         ; Shift high nibble to low
  203/F0C0 : 0F                                 RRC
  204/F0C1 : 0F                                 RRC
  205/F0C2 : 0F                                 RRC
  206/F0C3 : CD CB F0                           CALL    PRINT_HEX_NIBBLE    ; Print high nibble
  207/F0C6 : F1                                 POP     PSW                 ; Restore original
  208/F0C7 : CD CB F0                           CALL    PRINT_HEX_NIBBLE    ; Print low nibble
  209/F0CA : C9                                 RET
  210/F0CB :                            
  211/F0CB :                            ; PRINT_HEX_NIBBLE - Print low nibble of A as hex digit
  212/F0CB :                            ; Input: A = value (low 4 bits used)
  213/F0CB :                            ; Trashes: A, flags
  214/F0CB :                            PRINT_HEX_NIBBLE:
  215/F0CB : E6 0F                              ANI     0FH                 ; Mask to low nibble
  216/F0CD : FE 0A                              CPI     0AH                 ; Is it A-F?
  217/F0CF : DA D4 F0                           JC      PHN_DIGIT           ; No, it's 0-9
  218/F0D2 : C6 07                              ADI     07H                 ; Adjust for A-F
  219/F0D4 :                            PHN_DIGIT:
  220/F0D4 : C6 30                              ADI     '0'                 ; Convert to ASCII
  221/F0D6 : CD 7E F0                           CALL    CONOUT
  222/F0D9 : C9                                 RET
  223/F0DA :                            
  224/F0DA :                            ; PRINT_HEX_WORD - Print HL as four hex digits
  225/F0DA :                            ; Input: HL = word to print
  226/F0DA :                            ; Trashes: A, flags
  227/F0DA :                            PRINT_HEX_WORD:
  228/F0DA : 7C                                 MOV     A,H
  229/F0DB : CD BE F0                           CALL    PRINT_HEX_BYTE
  230/F0DE : 7D                                 MOV     A,L
  231/F0DF : CD BE F0                           CALL    PRINT_HEX_BYTE
  232/F0E2 : C9                                 RET
  233/F0E3 :                            
  234/F0E3 :                            ; ============================================
  235/F0E3 :                            ; INPUT ROUTINES
  236/F0E3 :                            ; ============================================
  237/F0E3 :                            
  238/F0E3 :                            ; READ_LINE - Read line into LINE_BUFFER
  239/F0E3 :                            ; Handles: BS (backspace), CR (end of line)
  240/F0E3 :                            ; Returns: LINE_BUFFER contains null-terminated string
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 5 - 12/11/2025 19:06:00


  241/F0E3 :                            ; Trashes: A, B, C, HL, flags
  242/F0E3 :                            READ_LINE:
  243/F0E3 : 21 80 00                           LXI     H,LINE_BUFFER       ; Point to buffer start
  244/F0E6 : 06 00                              MVI     B,0                 ; Character count
  245/F0E8 :                                    
  246/F0E8 :                            RL_LOOP:
  247/F0E8 : CD 8A F0                           CALL    CONIN               ; Get character
  248/F0EB : 4F                                 MOV     C,A                 ; Save it in C
  249/F0EC :                                    
  250/F0EC : FE 0D                              CPI     CR                  ; Enter pressed?
  251/F0EE : CA 29 F1                           JZ      RL_DONE
  252/F0F1 : FE 0A                              CPI     LF
  253/F0F3 : CA 29 F1                           JZ      RL_DONE
  254/F0F6 :                                    
  255/F0F6 : FE 08                              CPI     BS                  ; Backspace?
  256/F0F8 : CA 10 F1                           JZ      RL_BACKSPACE
  257/F0FB :                                    
  258/F0FB : FE 20                              CPI     SPACE               ; Ignore control chars
  259/F0FD : DA E8 F0                           JC      RL_LOOP
  260/F100 :                                    
  261/F100 :                                    ; Check buffer full
  262/F100 : 78                                 MOV     A,B
  263/F101 : FE 4F                              CPI     LINE_LENGTH-1       ; Room for char + null?
  264/F103 : D2 E8 F0                           JNC     RL_LOOP             ; Buffer full, ignore
  265/F106 :                                    
  266/F106 :                                    ; Store and echo character
  267/F106 : 71                                 MOV     M,C                 ; Store in buffer
  268/F107 : 23                                 INX     H                   ; Advance pointer
  269/F108 : 04                                 INR     B                   ; Increment count
  270/F109 : 79                                 MOV     A,C                 ; Echo character
  271/F10A : CD 7E F0                           CALL    CONOUT
  272/F10D : C3 E8 F0                           JMP     RL_LOOP
  273/F110 :                                    
  274/F110 :                            RL_BACKSPACE:
  275/F110 : 78                                 MOV     A,B                 ; Check if buffer empty
  276/F111 : B7                                 ORA     A
  277/F112 : CA E8 F0                           JZ      RL_LOOP             ; Nothing to delete
  278/F115 :                                    
  279/F115 : 2B                                 DCX     H                   ; Back up pointer
  280/F116 : 05                                 DCR     B                   ; Decrement count
  281/F117 :                                    
  282/F117 :                                    ; Erase character on screen: BS, space, BS
  283/F117 : 3E 08                              MVI     A,BS
  284/F119 : CD 7E F0                           CALL    CONOUT
  285/F11C : 3E 20                              MVI     A,SPACE
  286/F11E : CD 7E F0                           CALL    CONOUT
  287/F121 : 3E 08                              MVI     A,BS
  288/F123 : CD 7E F0                           CALL    CONOUT
  289/F126 : C3 E8 F0                           JMP     RL_LOOP
  290/F129 :                                    
  291/F129 :                            RL_DONE:
  292/F129 : 36 00                              MVI     M,0                 ; Null terminate
  293/F12B : CD AD F0                           CALL    PRINT_CRLF          ; Echo newline
  294/F12E : C9                                 RET
  295/F12F :                            
  296/F12F :                            ; ============================================
  297/F12F :                            ; PARSING ROUTINES
  298/F12F :                            ; ============================================
  299/F12F :                            
  300/F12F :                            ; SKIP_SPACES - Skip spaces in buffer
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 6 - 12/11/2025 19:06:00


  301/F12F :                            ; Input: HL = pointer into buffer
  302/F12F :                            ; Output: HL = pointer to first non-space (or null)
  303/F12F :                            ; Trashes: A, flags
  304/F12F :                            SKIP_SPACES:
  305/F12F : 7E                                 MOV     A,M
  306/F130 : FE 20                              CPI     SPACE
  307/F132 : C0                                 RNZ                         ; Return if not a space
  308/F133 : 23                                 INX     H
  309/F134 : C3 2F F1                           JMP     SKIP_SPACES
  310/F137 :                            
  311/F137 :                            ; READ_HEX_WORD - Parse hex number from buffer
  312/F137 :                            ; Input: HL = pointer into buffer
  313/F137 :                            ; Output: DE = parsed value, HL = advanced past number
  314/F137 :                            ;         Carry set if no valid hex digits found
  315/F137 :                            ; Trashes: A, BC, flags
  316/F137 :                            READ_HEX_WORD:
  317/F137 : CD 2F F1                           CALL    SKIP_SPACES         ; Skip leading spaces
  318/F13A : 11 00 00                           LXI     D,0                 ; Initialize result
  319/F13D : 06 00                              MVI     B,0                 ; Digit count
  320/F13F :                                    
  321/F13F :                            RHW_LOOP:
  322/F13F : 7E                                 MOV     A,M                 ; Get character
  323/F140 : CD 6A F1                           CALL    TO_HEX_DIGIT        ; Convert to 0-15
  324/F143 : DA 64 F1                           JC      RHW_DONE            ; Not a hex digit, done
  325/F146 :                                    
  326/F146 :                                    ; Shift DE left 4 bits and add new digit
  327/F146 :                                    ; DE = DE * 16 + A
  328/F146 : F5                                 PUSH    PSW                 ; Save digit
  329/F147 :                                    
  330/F147 :                                    ; Get E's high nibble (will go to D's low nibble)
  331/F147 : 7B                                 MOV     A,E
  332/F148 : E6 F0                              ANI     0F0H                ; Isolate high nibble
  333/F14A : 0F                                 RRC
  334/F14B : 0F                                 RRC
  335/F14C : 0F                                 RRC
  336/F14D : 0F                                 RRC                         ; Move to low nibble position
  337/F14E : 4F                                 MOV     C,A                 ; Save it
  338/F14F :                                    
  339/F14F :                                    ; Shift D left 4 bits
  340/F14F : 7A                                 MOV     A,D
  341/F150 : 87                                 ADD     A
  342/F151 : 87                                 ADD     A
  343/F152 : 87                                 ADD     A
  344/F153 : 87                                 ADD     A                   ; D << 4
  345/F154 : B1                                 ORA     C                   ; OR in E's high nibble
  346/F155 : 57                                 MOV     D,A
  347/F156 :                                    
  348/F156 :                                    ; Shift E left 4 bits
  349/F156 : 7B                                 MOV     A,E
  350/F157 : 87                                 ADD     A
  351/F158 : 87                                 ADD     A
  352/F159 : 87                                 ADD     A
  353/F15A : 87                                 ADD     A                   ; E << 4
  354/F15B : 5F                                 MOV     E,A
  355/F15C :                                    
  356/F15C :                                    ; Add new digit
  357/F15C : F1                                 POP     PSW
  358/F15D : B3                                 ORA     E
  359/F15E : 5F                                 MOV     E,A
  360/F15F :                                    
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 7 - 12/11/2025 19:06:00


  361/F15F : 23                                 INX     H                   ; Advance buffer pointer
  362/F160 : 04                                 INR     B                   ; Count digit
  363/F161 : C3 3F F1                           JMP     RHW_LOOP
  364/F164 :                                    
  365/F164 :                            RHW_DONE:
  366/F164 : 78                                 MOV     A,B                 ; Check digit count
  367/F165 : B7                                 ORA     A
  368/F166 : 37                                 STC                         ; Set carry (no digits)
  369/F167 : C8                                 RZ                          ; Return with carry if no digits
  370/F168 : B7                                 ORA     A                   ; Clear carry (success)
  371/F169 : C9                                 RET
  372/F16A :                            
  373/F16A :                            ; TO_HEX_DIGIT - Convert ASCII to hex value
  374/F16A :                            ; Input: A = ASCII character
  375/F16A :                            ; Output: A = hex value (0-15), Carry clear
  376/F16A :                            ;         Carry set if not a hex digit
  377/F16A :                            ; Trashes: flags
  378/F16A :                            TO_HEX_DIGIT:
  379/F16A : FE 30                              CPI     '0'
  380/F16C : DA 92 F1                           JC      THD_FAIL            ; Below '0'
  381/F16F : FE 3A                              CPI     '9'+1
  382/F171 : DA 8E F1                           JC      THD_DIGIT           ; '0'-'9'
  383/F174 :                                    
  384/F174 : FE 41                              CPI     'A'
  385/F176 : DA 92 F1                           JC      THD_FAIL            ; Between '9' and 'A'
  386/F179 : FE 47                              CPI     'F'+1
  387/F17B : DA 8A F1                           JC      THD_ALPHA           ; 'A'-'F'
  388/F17E :                                    
  389/F17E : FE 61                              CPI     'a'
  390/F180 : DA 92 F1                           JC      THD_FAIL            ; Between 'F' and 'a'
  391/F183 : FE 67                              CPI     'f'+1
  392/F185 : D2 92 F1                           JNC     THD_FAIL            ; Above 'f'
  393/F188 :                                    
  394/F188 :                                    ; 'a'-'f': convert to uppercase first
  395/F188 : D6 20                              SUI     20H
  396/F18A :                                    
  397/F18A :                            THD_ALPHA:
  398/F18A : D6 37                              SUI     'A'-10              ; Convert 'A'-'F' to 10-15
  399/F18C : B7                                 ORA     A                   ; Clear carry
  400/F18D : C9                                 RET
  401/F18E :                                    
  402/F18E :                            THD_DIGIT:
  403/F18E : D6 30                              SUI     '0'                 ; Convert '0'-'9' to 0-9
  404/F190 : B7                                 ORA     A                   ; Clear carry
  405/F191 : C9                                 RET
  406/F192 :                                    
  407/F192 :                            THD_FAIL:
  408/F192 : 37                                 STC                         ; Set carry = not hex
  409/F193 : C9                                 RET
  410/F194 :                            
  411/F194 :                            ; ============================================
  412/F194 :                            ; COMMANDS
  413/F194 :                            ; ============================================
  414/F194 :                            
  415/F194 :                            ; CMD_DUMP - Dump memory
  416/F194 :                            ; Syntax: D [start] [end]
  417/F194 :                            ; If no args, continues from last address
  418/F194 :                            ; If one arg, dumps 128 bytes from start
  419/F194 :                            ; If two args, dumps from start to end
  420/F194 :                            CMD_DUMP:
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 8 - 12/11/2025 19:06:00


  421/F194 : CD 2F F1                           CALL    SKIP_SPACES
  422/F197 : 7E                                 MOV     A,M
  423/F198 : B7                                 ORA     A                   ; End of line?
  424/F199 : CA B5 F1                           JZ      CD_NO_ARGS
  425/F19C :                                    
  426/F19C :                                    ; Parse start address
  427/F19C : CD 37 F1                           CALL    READ_HEX_WORD
  428/F19F : DA CF F1                           JC      CD_ERROR            ; No valid address
  429/F1A2 : D5                                 PUSH    D                   ; Save start address
  430/F1A3 :                                    
  431/F1A3 : CD 2F F1                           CALL    SKIP_SPACES
  432/F1A6 : 7E                                 MOV     A,M
  433/F1A7 : B7                                 ORA     A                   ; End of line?
  434/F1A8 : CA C3 F1                           JZ      CD_ONE_ARG
  435/F1AB :                                    
  436/F1AB :                                    ; Parse end address
  437/F1AB : CD 37 F1                           CALL    READ_HEX_WORD
  438/F1AE : DA CE F1                           JC      CD_POP_ERROR        ; Invalid end address
  439/F1B1 :                                    
  440/F1B1 :                                    ; Two args: start in stack, end in DE
  441/F1B1 : E1                                 POP     H                   ; HL = start
  442/F1B2 : C3 D8 F1                           JMP     CD_DUMP_RANGE
  443/F1B5 :                                    
  444/F1B5 :                            CD_NO_ARGS:
  445/F1B5 :                                    ; Continue from last address
  446/F1B5 : 2A D2 00                           LHLD    LAST_DUMP_ADDR
  447/F1B8 : 11 7F 00                           LXI     D,007FH             ; 128 bytes
  448/F1BB : 19                                 DAD     D                   ; HL = start + 127 = end
  449/F1BC : EB                                 XCHG                        ; DE = end
  450/F1BD : 2A D2 00                           LHLD    LAST_DUMP_ADDR      ; HL = start
  451/F1C0 : C3 D8 F1                           JMP     CD_DUMP_RANGE
  452/F1C3 :                                    
  453/F1C3 :                            CD_ONE_ARG:
  454/F1C3 : E1                                 POP     H                   ; HL = start
  455/F1C4 : E5                                 PUSH    H                   ; Save start again
  456/F1C5 : 11 7F 00                           LXI     D,007FH
  457/F1C8 : 19                                 DAD     D                   ; HL = start + 127 = end
  458/F1C9 : EB                                 XCHG                        ; DE = end
  459/F1CA : E1                                 POP     H                   ; HL = start
  460/F1CB : C3 D8 F1                           JMP     CD_DUMP_RANGE
  461/F1CE :                                    
  462/F1CE :                            CD_POP_ERROR:
  463/F1CE : D1                                 POP     D                   ; Clean up stack
  464/F1CF :                            CD_ERROR:
  465/F1CF : 21 D1 F4                           LXI     H,MSG_BAD_ADDR
  466/F1D2 : CD A3 F0                           CALL    PRINT_STRING
  467/F1D5 : C3 2D F0                           JMP     MAIN_LOOP
  468/F1D8 :                            
  469/F1D8 :                            ; CD_DUMP_RANGE - Dump memory from HL to DE
  470/F1D8 :                            ; Input: HL = start address, DE = end address
  471/F1D8 :                            CD_DUMP_RANGE:
  472/F1D8 : D5                                 PUSH    D                   ; Save end address
  473/F1D9 :                            
  474/F1D9 :                            CD_LINE:
  475/F1D9 :                                    ; Print address
  476/F1D9 : CD DA F0                           CALL    PRINT_HEX_WORD
  477/F1DC : 3E 3A                              MVI     A,':'
  478/F1DE : CD 7E F0                           CALL    CONOUT
  479/F1E1 : CD B8 F0                           CALL    PRINT_SPACE
  480/F1E4 :                                    
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 9 - 12/11/2025 19:06:00


  481/F1E4 :                                    ; Print 16 hex bytes
  482/F1E4 : E5                                 PUSH    H                   ; Save line start for ASCII
  483/F1E5 : 0E 10                              MVI     C,16                ; Byte counter
  484/F1E7 :                                    
  485/F1E7 :                            CD_HEX_BYTE:
  486/F1E7 : 7E                                 MOV     A,M                 ; Get byte
  487/F1E8 : CD BE F0                           CALL    PRINT_HEX_BYTE
  488/F1EB : CD B8 F0                           CALL    PRINT_SPACE
  489/F1EE :                                    
  490/F1EE :                                    ; Extra space after 8th byte
  491/F1EE : 79                                 MOV     A,C
  492/F1EF : FE 09                              CPI     9
  493/F1F1 : C2 F7 F1                           JNZ     CD_NO_GAP
  494/F1F4 : CD B8 F0                           CALL    PRINT_SPACE
  495/F1F7 :                            CD_NO_GAP:
  496/F1F7 :                                    
  497/F1F7 : 23                                 INX     H
  498/F1F8 : 0D                                 DCR     C
  499/F1F9 : C2 E7 F1                           JNZ     CD_HEX_BYTE
  500/F1FC :                                    
  501/F1FC :                                    ; Print ASCII representation
  502/F1FC : CD B8 F0                           CALL    PRINT_SPACE
  503/F1FF : E1                                 POP     H                   ; Restore line start
  504/F200 : 0E 10                              MVI     C,16
  505/F202 :                                    
  506/F202 :                            CD_ASCII:
  507/F202 : 7E                                 MOV     A,M
  508/F203 : FE 20                              CPI     SPACE               ; Printable? (>= 0x20)
  509/F205 : DA 0D F2                           JC      CD_DOT
  510/F208 : FE 7F                              CPI     07FH                ; Printable? (< 0x7F)
  511/F20A : DA 0F F2                           JC      CD_PRINT_CHAR
  512/F20D :                            CD_DOT:
  513/F20D : 3E 2E                              MVI     A,'.'
  514/F20F :                            CD_PRINT_CHAR:
  515/F20F : CD 7E F0                           CALL    CONOUT
  516/F212 : 23                                 INX     H
  517/F213 : 0D                                 DCR     C
  518/F214 : C2 02 F2                           JNZ     CD_ASCII
  519/F217 :                                    
  520/F217 : CD AD F0                           CALL    PRINT_CRLF
  521/F21A :                                    
  522/F21A :                                    ; Check if done (HL > end address)
  523/F21A : D1                                 POP     D                   ; DE = end address
  524/F21B : D5                                 PUSH    D                   ; Keep it on stack
  525/F21C :                                    
  526/F21C :                                    ; Compare HL to DE: if HL > DE, we're done
  527/F21C : 7A                                 MOV     A,D
  528/F21D : BC                                 CMP     H
  529/F21E : DA 2C F2                           JC      CD_DONE             ; D < H, done
  530/F221 : C2 D9 F1                           JNZ     CD_LINE             ; D > H, continue
  531/F224 : 7B                                 MOV     A,E
  532/F225 : BD                                 CMP     L
  533/F226 : DA 2C F2                           JC      CD_DONE             ; E < L, done (D == H)
  534/F229 : C3 D9 F1                           JMP     CD_LINE             ; E >= L, continue
  535/F22C :                                    
  536/F22C :                            CD_DONE:
  537/F22C : D1                                 POP     D                   ; Clean up stack
  538/F22D : 22 D2 00                           SHLD    LAST_DUMP_ADDR      ; Save for next time
  539/F230 : C3 2D F0                           JMP     MAIN_LOOP
  540/F233 :                            
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 10 - 12/11/2025 19:06:00


  541/F233 :                            ; CMD_EXAMINE - Examine/modify memory
  542/F233 :                            ; Syntax: E [addr]
  543/F233 :                            ; Shows "ADDR: XX-" and waits for input
  544/F233 :                            ; Enter hex to modify, CR to advance, period to exit
  545/F233 :                            CMD_EXAMINE:
  546/F233 : CD 2F F1                           CALL    SKIP_SPACES
  547/F236 : 7E                                 MOV     A,M
  548/F237 : B7                                 ORA     A                   ; Any address given?
  549/F238 : CA 45 F2                           JZ      CE_USE_LAST
  550/F23B :                                    
  551/F23B : CD 37 F1                           CALL    READ_HEX_WORD       ; Parse address into DE
  552/F23E : DA 7B F2                           JC      CE_ERROR            ; Invalid hex
  553/F241 : EB                                 XCHG                        ; HL = address to examine
  554/F242 : C3 48 F2                           JMP     CE_LOOP
  555/F245 :                                    
  556/F245 :                            CE_USE_LAST:
  557/F245 : 2A D4 00                           LHLD    LAST_EXAM_ADDR
  558/F248 :                                    
  559/F248 :                            CE_LOOP:
  560/F248 : CD DA F0                           CALL    PRINT_HEX_WORD      ; Print address
  561/F24B : 3E 3A                              MVI     A,':'
  562/F24D : CD 7E F0                           CALL    CONOUT
  563/F250 : 3E 20                              MVI     A,' '
  564/F252 : CD 7E F0                           CALL    CONOUT
  565/F255 : 7E                                 MOV     A,M                 ; Get current byte
  566/F256 : CD BE F0                           CALL    PRINT_HEX_BYTE
  567/F259 : 3E 2D                              MVI     A,'-'
  568/F25B : CD 7E F0                           CALL    CONOUT
  569/F25E :                                    
  570/F25E : CD 1C F3                           CALL    READ_EXAM_BYTE      ; Get user input
  571/F261 : DA 72 F2                           JC      CE_EXIT             ; Carry = exit requested
  572/F264 : 78                                 MOV     A,B                 ; Check digit count
  573/F265 : B7                                 ORA     A
  574/F266 : CA 6B F2                           JZ      CE_NEXT             ; No digits = don't modify
  575/F269 : 79                                 MOV     A,C                 ; Get the value from C
  576/F26A : 77                                 MOV     M,A                 ; Store it
  577/F26B :                                    
  578/F26B :                            CE_NEXT:
  579/F26B : 23                                 INX     H
  580/F26C : CD AD F0                           CALL    PRINT_CRLF
  581/F26F : C3 48 F2                           JMP     CE_LOOP
  582/F272 :                                    
  583/F272 :                            CE_EXIT:
  584/F272 : 22 D4 00                           SHLD    LAST_EXAM_ADDR
  585/F275 : CD AD F0                           CALL    PRINT_CRLF
  586/F278 : C3 2D F0                           JMP     MAIN_LOOP
  587/F27B :                                    
  588/F27B :                            CE_ERROR:
  589/F27B : 21 D1 F4                           LXI     H,MSG_BAD_ADDR
  590/F27E : CD A3 F0                           CALL    PRINT_STRING
  591/F281 : C3 2D F0                           JMP     MAIN_LOOP
  592/F284 :                            
  593/F284 :                            ; CMD_GO - Execute at address
  594/F284 :                            ; Syntax: G [addr]
  595/F284 :                            ; If no address, defaults to 0100H (TPA)
  596/F284 :                            CMD_GO:
  597/F284 : CD 2F F1                           CALL    SKIP_SPACES
  598/F287 : CD 37 F1                           CALL    READ_HEX_WORD       ; Parse address into DE
  599/F28A : DA 8F F2                           JC      CG_DEFAULT          ; No address given
  600/F28D : EB                                 XCHG                        ; HL = parsed address
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 11 - 12/11/2025 19:06:00


  601/F28E : E9                                 PCHL                        ; Jump and never return
  602/F28F :                                    
  603/F28F :                            CG_DEFAULT:
  604/F28F : 21 00 01                           LXI     H,0100H             ; Default to TPA
  605/F292 : E9                                 PCHL
  606/F293 :                            
  607/F293 :                            ; CMD_HEX_MATH - Hex addition and subtraction
  608/F293 :                            ; Syntax: H num1 num2
  609/F293 :                            ; Output: sum difference
  610/F293 :                            CMD_HEX_MATH:
  611/F293 : CD 2F F1                           CALL    SKIP_SPACES
  612/F296 : CD 37 F1                           CALL    READ_HEX_WORD       ; First number -> DE
  613/F299 : DA C2 F2                           JC      CH_ERROR
  614/F29C : D5                                 PUSH    D                   ; Save first number
  615/F29D :                                    
  616/F29D : CD 2F F1                           CALL    SKIP_SPACES
  617/F2A0 : CD 37 F1                           CALL    READ_HEX_WORD       ; Second number -> DE
  618/F2A3 : DA C1 F2                           JC      CH_POP_ERROR
  619/F2A6 :                                    
  620/F2A6 :                                    ; DE = second, stack = first
  621/F2A6 : E1                                 POP     H                   ; HL = first
  622/F2A7 : E5                                 PUSH    H                   ; Save first again
  623/F2A8 : D5                                 PUSH    D                   ; Save second
  624/F2A9 :                                    
  625/F2A9 : 19                                 DAD     D                   ; HL = first + second
  626/F2AA : CD DA F0                           CALL    PRINT_HEX_WORD
  627/F2AD : CD B8 F0                           CALL    PRINT_SPACE
  628/F2B0 :                                    
  629/F2B0 : D1                                 POP     D                   ; DE = second
  630/F2B1 : E1                                 POP     H                   ; HL = first
  631/F2B2 :                                    
  632/F2B2 :                                    ; HL = first - second
  633/F2B2 : 7D                                 MOV     A,L
  634/F2B3 : 93                                 SUB     E
  635/F2B4 : 6F                                 MOV     L,A
  636/F2B5 : 7C                                 MOV     A,H
  637/F2B6 : 9A                                 SBB     D
  638/F2B7 : 67                                 MOV     H,A
  639/F2B8 :                                    
  640/F2B8 : CD DA F0                           CALL    PRINT_HEX_WORD
  641/F2BB : CD AD F0                           CALL    PRINT_CRLF
  642/F2BE : C3 2D F0                           JMP     MAIN_LOOP
  643/F2C1 :                            
  644/F2C1 :                            CH_POP_ERROR:
  645/F2C1 : D1                                 POP     D                   ; Clean stack
  646/F2C2 :                            CH_ERROR:
  647/F2C2 : 21 E3 F4                           LXI     H,MSG_BAD_HEX
  648/F2C5 : CD A3 F0                           CALL    PRINT_STRING
  649/F2C8 : C3 2D F0                           JMP     MAIN_LOOP
  650/F2CB :                            
  651/F2CB :                            ; CMD_INPUT - Read from I/O port
  652/F2CB :                            ; Syntax: I port
  653/F2CB :                            CMD_INPUT:
  654/F2CB : CD 2F F1                           CALL    SKIP_SPACES
  655/F2CE : CD 37 F1                           CALL    READ_HEX_WORD       ; Port -> DE (use E only)
  656/F2D1 : DA E4 F2                           JC      CI_ERROR
  657/F2D4 :                                    
  658/F2D4 : 7B                                 MOV     A,E                 ; Get port number (0-255)
  659/F2D5 : 32 D7 00                           STA     IO_IN_STUB+1        ; Patch the IN instruction
  660/F2D8 : CD D6 00                           CALL    IO_IN_STUB          ; Execute: IN port / RET
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 12 - 12/11/2025 19:06:00


  661/F2DB :                                    
  662/F2DB : CD BE F0                           CALL    PRINT_HEX_BYTE      ; Print result
  663/F2DE : CD AD F0                           CALL    PRINT_CRLF
  664/F2E1 : C3 2D F0                           JMP     MAIN_LOOP
  665/F2E4 :                            
  666/F2E4 :                            CI_ERROR:
  667/F2E4 : 21 F7 F4                           LXI     H,MSG_BAD_PORT
  668/F2E7 : CD A3 F0                           CALL    PRINT_STRING
  669/F2EA : C3 2D F0                           JMP     MAIN_LOOP
  670/F2ED :                            
  671/F2ED :                            ; CMD_OUTPUT - Write to I/O port
  672/F2ED :                            ; Syntax: O port value
  673/F2ED :                            CMD_OUTPUT:
  674/F2ED : CD 2F F1                           CALL    SKIP_SPACES
  675/F2F0 : CD 37 F1                           CALL    READ_HEX_WORD       ; Port -> DE
  676/F2F3 : DA 0A F3                           JC      CO_ERROR
  677/F2F6 : 7B                                 MOV     A,E
  678/F2F7 : 32 DA 00                           STA     IO_OUT_STUB+1       ; Patch port
  679/F2FA :                                    
  680/F2FA : CD 2F F1                           CALL    SKIP_SPACES
  681/F2FD : CD 37 F1                           CALL    READ_HEX_WORD       ; Value -> DE
  682/F300 : DA 0A F3                           JC      CO_ERROR
  683/F303 :                                    
  684/F303 : 7B                                 MOV     A,E                 ; Value to output
  685/F304 : CD D9 00                           CALL    IO_OUT_STUB         ; Execute: OUT port / RET
  686/F307 : C3 2D F0                           JMP     MAIN_LOOP
  687/F30A :                            
  688/F30A :                            CO_ERROR:
  689/F30A : 21 F7 F4                           LXI     H,MSG_BAD_PORT
  690/F30D : CD A3 F0                           CALL    PRINT_STRING
  691/F310 : C3 2D F0                           JMP     MAIN_LOOP
  692/F313 :                            
  693/F313 :                            ; CMD_HELP - Show help
  694/F313 :                            ; Syntax: ?
  695/F313 :                            CMD_HELP:
  696/F313 : 21 AC F3                           LXI     H,MSG_HELP
  697/F316 : CD A3 F0                           CALL    PRINT_STRING
  698/F319 : C3 2D F0                           JMP     MAIN_LOOP
  699/F31C :                            
  700/F31C :                            ; ============================================
  701/F31C :                            ; HELPER ROUTINES
  702/F31C :                            ; ============================================
  703/F31C :                            
  704/F31C :                            ; READ_EXAM_BYTE - Read byte value for examine command
  705/F31C :                            ; Reads up to 2 hex digits from console
  706/F31C :                            ; Output: Carry set = exit (period pressed)
  707/F31C :                            ;         Carry clear: B = digit count, C = value
  708/F31C :                            ;         (caller checks B: 0 = no modification, >0 = store C)
  709/F31C :                            ; Trashes: A, B, C, D, flags
  710/F31C :                            READ_EXAM_BYTE:
  711/F31C : 06 00                              MVI     B,0                 ; Digit count
  712/F31E : 0E 00                              MVI     C,0                 ; Accumulated value
  713/F320 :                                    
  714/F320 :                            REB_LOOP:
  715/F320 : CD 8A F0                           CALL    CONIN
  716/F323 : 57                                 MOV     D,A                 ; Save original for echo
  717/F324 :                                    
  718/F324 : FE 2E                              CPI     '.'                 ; Exit?
  719/F326 : CA 50 F3                           JZ      REB_EXIT
  720/F329 : FE 0D                              CPI     CR                  ; Enter?
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 13 - 12/11/2025 19:06:00


  721/F32B : CA 4E F3                           JZ      REB_DONE
  722/F32E : FE 08                              CPI     BS                  ; Backspace?
  723/F330 : CA 52 F3                           JZ      REB_BS
  724/F333 :                                    
  725/F333 : CD 6A F1                           CALL    TO_HEX_DIGIT        ; Convert to 0-15
  726/F336 : DA 20 F3                           JC      REB_LOOP            ; Not hex, ignore
  727/F339 :                                    
  728/F339 :                                    ; Valid hex digit in A
  729/F339 : F5                                 PUSH    PSW
  730/F33A : 79                                 MOV     A,C
  731/F33B : 87                                 ADD     A                   ; Shift left 4
  732/F33C : 87                                 ADD     A
  733/F33D : 87                                 ADD     A
  734/F33E : 87                                 ADD     A
  735/F33F : 4F                                 MOV     C,A
  736/F340 : F1                                 POP     PSW
  737/F341 : B1                                 ORA     C                   ; Add new digit
  738/F342 : 4F                                 MOV     C,A
  739/F343 :                                    
  740/F343 : 04                                 INR     B                   ; Count digit
  741/F344 : 7A                                 MOV     A,D                 ; Echo original char
  742/F345 : CD 7E F0                           CALL    CONOUT
  743/F348 :                                    
  744/F348 : 78                                 MOV     A,B
  745/F349 : FE 02                              CPI     2                   ; Two digits entered?
  746/F34B : DA 20 F3                           JC      REB_LOOP            ; No, keep reading
  747/F34E :                                    ; Fall through with 2 digits
  748/F34E :                                    
  749/F34E :                            REB_DONE:
  750/F34E :                                    ; Carry clear, B = digit count, C = value
  751/F34E : B7                                 ORA     A                   ; Clear carry
  752/F34F : C9                                 RET
  753/F350 :                                    
  754/F350 :                            REB_EXIT:
  755/F350 : 37                                 STC                         ; Set carry = exit
  756/F351 : C9                                 RET
  757/F352 :                                    
  758/F352 :                            REB_BS:
  759/F352 : 78                                 MOV     A,B
  760/F353 : B7                                 ORA     A
  761/F354 : CA 20 F3                           JZ      REB_LOOP            ; Nothing to delete
  762/F357 :                                    
  763/F357 : 05                                 DCR     B
  764/F358 : 79                                 MOV     A,C                 ; Undo the shift
  765/F359 : 0F                                 RRC
  766/F35A : 0F                                 RRC
  767/F35B : 0F                                 RRC
  768/F35C : 0F                                 RRC
  769/F35D : E6 0F                              ANI     0FH
  770/F35F : 4F                                 MOV     C,A
  771/F360 :                                    
  772/F360 : 3E 08                              MVI     A,BS                ; Erase on screen
  773/F362 : CD 7E F0                           CALL    CONOUT
  774/F365 : 3E 20                              MVI     A,' '
  775/F367 : CD 7E F0                           CALL    CONOUT
  776/F36A : 3E 08                              MVI     A,BS
  777/F36C : CD 7E F0                           CALL    CONOUT
  778/F36F : C3 20 F3                           JMP     REB_LOOP
  779/F372 :                            
  780/F372 :                            ; ============================================
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 14 - 12/11/2025 19:06:00


  781/F372 :                            ; STRINGS
  782/F372 :                            ; ============================================
  783/F372 :                            
  784/F372 :                            MSG_BANNER:
  785/F372 : 0D 0A                              DB      CR,LF
  786/F374 : 38 30 38 30 20 4D 6F 6E 69         DB      "8080 Monitor v0.1",CR,LF
      F37D : 74 6F 72 20 76 30 2E 31 0D
      F386 : 0A                        
  787/F387 : 42 75 69 6C 74 3A 20 31 32         DB      'Built: ', DATE, ' ', TIME, CR, LF
      F390 : 2F 31 31 2F 32 30 32 35 20
      F399 : 31 39 3A 30 36 3A 30 30 0D
      F3A2 : 0A                        
  788/F3A3 : 52 65 61 64 79 2E 0D 0A            DB      "Ready.",CR,LF
  789/F3AB : 00                                 DB      0
  790/F3AC :                            
  791/F3AC :                            MSG_HELP:
  792/F3AC : 43 6F 6D 6D 61 6E 64 73 3A         DB      "Commands:",CR,LF
      F3B5 : 0D 0A                     
  793/F3B7 : 20 20 44 20 5B 73 74 61 72         DB      "  D [start] [end]  - Dump memory",CR,LF
      F3C0 : 74 5D 20 5B 65 6E 64 5D 20
      F3C9 : 20 2D 20 44 75 6D 70 20 6D
      F3D2 : 65 6D 6F 72 79 0D 0A      
  794/F3D9 : 20 20 45 20 5B 61 64 64 72         DB      "  E [addr]         - Examine/modify",CR,LF
      F3E2 : 5D 20 20 20 20 20 20 20 20
      F3EB : 20 2D 20 45 78 61 6D 69 6E
      F3F4 : 65 2F 6D 6F 64 69 66 79 0D
      F3FD : 0A                        
  795/F3FE : 20 20 47 20 5B 61 64 64 72         DB      "  G [addr]         - Go (execute)",CR,LF
      F407 : 5D 20 20 20 20 20 20 20 20
      F410 : 20 2D 20 47 6F 20 28 65 78
      F419 : 65 63 75 74 65 29 0D 0A   
  796/F421 : 20 20 48 20 6E 75 6D 31 20         DB      "  H num1 num2      - Hex math (+/-)",CR,LF
      F42A : 6E 75 6D 32 20 20 20 20 20
      F433 : 20 2D 20 48 65 78 20 6D 61
      F43C : 74 68 20 28 2B 2F 2D 29 0D
      F445 : 0A                        
  797/F446 : 20 20 49 20 70 6F 72 74 20         DB      "  I port           - Input from port",CR,LF
      F44F : 20 20 20 20 20 20 20 20 20
      F458 : 20 2D 20 49 6E 70 75 74 20
      F461 : 66 72 6F 6D 20 70 6F 72 74
      F46A : 0D 0A                     
  798/F46C : 20 20 4F 20 70 6F 72 74 20         DB      "  O port value     - Output to port",CR,LF
      F475 : 76 61 6C 75 65 20 20 20 20
      F47E : 20 2D 20 4F 75 74 70 75 74
      F487 : 20 74 6F 20 70 6F 72 74 0D
      F490 : 0A                        
  799/F491 : 20 20 3F 20 20 20 20 20 20         DB      "  ?                - Help",CR,LF
      F49A : 20 20 20 20 20 20 20 20 20
      F4A3 : 20 2D 20 48 65 6C 70 0D 0A
  800/F4AC : 00                                 DB      0
  801/F4AD :                            
  802/F4AD :                            MSG_UNKNOWN:
  803/F4AD : 55 6E 6B 6E 6F 77 6E 20 63         DB      "Unknown command. Type ? for help.",CR,LF,0
      F4B6 : 6F 6D 6D 61 6E 64 2E 20 54
      F4BF : 79 70 65 20 3F 20 66 6F 72
      F4C8 : 20 68 65 6C 70 2E 0D 0A 00
  804/F4D1 :                            
  805/F4D1 :                            MSG_BAD_ADDR:
  806/F4D1 : 49 6E 76 61 6C 69 64 20 61         DB      "Invalid address",CR,LF,0
      F4DA : 64 64 72 65 73 73 0D 0A 00
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 15 - 12/11/2025 19:06:00


  807/F4E3 :                            
  808/F4E3 :                            MSG_BAD_HEX:
  809/F4E3 : 49 6E 76 61 6C 69 64 20 68         DB      "Invalid hex value",CR,LF,0
      F4EC : 65 78 20 76 61 6C 75 65 0D
      F4F5 : 0A 00                     
  810/F4F7 :                            
  811/F4F7 :                            MSG_BAD_PORT:
  812/F4F7 : 49 6E 76 61 6C 69 64 20 70         DB      "Invalid port/value",CR,LF,0
      F500 : 6F 72 74 2F 76 61 6C 75 65
      F509 : 0D 0A 00                  
  813/F50C :                            
  814/F50C :                            ; ============================================
  815/F50C :                            ; PADDING
  816/F50C :                            ; ============================================
  817/F50C :                            
  818/F50C : =>FALSE                            IF      $ > 0FFFFH
  819/F50C :                                    ERROR   "ROM exceeds 4KB!"
  820/F50C : [818]                              ENDIF
  821/F50C :                            
  822/F50C :                                    END     COLD_START
 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 16 - 12/11/2025 19:06:00


  Symbol Table (* = unused):
  --------------------------

*ARCHITECTURE :                                      "aarch64-apple-darwin" - |
 BS :                             8 - | *BUFFER_PTR :                   0D0 - |
*CASESENSITIVE :                  0 - |  CD_ASCII :                   0F202 C |
 CD_DONE :                    0F22C C |  CD_DOT :                     0F20D C |
 CD_DUMP_RANGE :              0F1D8 C |  CD_ERROR :                   0F1CF C |
 CD_HEX_BYTE :                0F1E7 C |  CD_LINE :                    0F1D9 C |
 CD_NO_ARGS :                 0F1B5 C |  CD_NO_GAP :                  0F1F7 C |
 CD_ONE_ARG :                 0F1C3 C |  CD_POP_ERROR :               0F1CE C |
 CD_PRINT_CHAR :              0F20F C |  CE_ERROR :                   0F27B C |
 CE_EXIT :                    0F272 C |  CE_LOOP :                    0F248 C |
 CE_NEXT :                    0F26B C |  CE_USE_LAST :                0F245 C |
 CG_DEFAULT :                 0F28F C |  CH_ERROR :                   0F2C2 C |
 CH_POP_ERROR :               0F2C1 C |  CI_ERROR :                   0F2E4 C |
 CMD_DUMP :                   0F194 C |  CMD_EXAMINE :                0F233 C |
 CMD_GO :                     0F284 C |  CMD_HELP :                   0F313 C |
 CMD_HEX_MATH :               0F293 C |  CMD_INPUT :                  0F2CB C |
 CMD_OUTPUT :                 0F2ED C |  COLD_START :                 0F000 C |
 CONIN :                      0F08A C |  CONOUT :                     0F07E C |
 CONOUT_WAIT :                0F07F C |  CONSOLE_DATA_IN :                1 - |
 CONSOLE_DATA_OUT :               0 - |  CONSOLE_STATUS :                 2 - |
*CONST :                      0F094 C | *CONSTPI :        3.141592653589793 - |
 CO_ERROR :                   0F30A C |  CR :                            0D - |
 DATE :                "12/11/2025" - | *FALSE :                          0 - |
*FLOATMAX :      1.797693134866E308 - | *HAS64 :                          1 - |
 IO_IN_STUB :                   0D6 - |  IO_OUT_STUB :                  0D9 - |
 LAST_DUMP_ADDR :               0D2 - |  LAST_EXAM_ADDR :               0D4 - |
 LF :                            0A - |  LINE_BUFFER :                   80 - |
 LINE_LENGTH :                   50 - | *LISTON :                         1 - |
*MACEXP :                         7 - |  MAIN_LOOP :                  0F02D C |
*MOMCPU :                      8080 - | *MOMCPUNAME :                "8080" - |
 MSG_BAD_ADDR :               0F4D1 C |  MSG_BAD_HEX :                0F4E3 C |
 MSG_BAD_PORT :               0F4F7 C |  MSG_BANNER :                 0F372 C |
 MSG_HELP :                   0F3AC C |  MSG_UNKNOWN :                0F4AD C |
*NESTMAX :                      100 - |  NOT_LOWER :                  0F051 C |
 PHN_DIGIT :                  0F0D4 C |  PRINT_BANNER :               0F09C C |
 PRINT_CRLF :                 0F0AD C |  PRINT_HEX_BYTE :             0F0BE C |
 PRINT_HEX_NIBBLE :           0F0CB C |  PRINT_HEX_WORD :             0F0DA C |
 PRINT_SPACE :                0F0B8 C |  PRINT_STRING :               0F0A3 C |
 READ_EXAM_BYTE :             0F31C C |  READ_HEX_WORD :              0F137 C |
 READ_LINE :                  0F0E3 C |  REB_BS :                     0F352 C |
 REB_DONE :                   0F34E C |  REB_EXIT :                   0F350 C |
 REB_LOOP :                   0F320 C | *RELAXED :                        0 - |
 RHW_DONE :                   0F164 C |  RHW_LOOP :                   0F13F C |
 RL_BACKSPACE :               0F110 C |  RL_DONE :                    0F129 C |
 RL_LOOP :                    0F0E8 C |  SKIP_SPACES :                0F12F C |
 SPACE :                         20 - |  STACK_TOP :                  0F000 - |
 THD_ALPHA :                  0F18A C |  THD_DIGIT :                  0F18E C |
 THD_FAIL :                   0F192 C |  TIME :                  "19:06:00" - |
 TO_HEX_DIGIT :               0F16A C | *TRUE :                           1 - |
*VERSION :                     142F - | *Z80SYNTAX :                      0 - |

     99 symbols
     17 unused symbols

 AS V1.42 Beta [Bld 295] - Source File monitor.asm - Page 17 - 12/11/2025 19:06:00


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.00 seconds assembly time

    822 lines source file
      2 passes
      0 errors
      0 warnings
